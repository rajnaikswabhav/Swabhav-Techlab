using Modules.EventManagement;
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.ComponentModel.DataAnnotations;
using System.Configuration;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Net.Http.Headers;
using System.Security.Cryptography;
using System.Text;
using System.Web;
using System.Web.Http;
using System.Web.UI;
using Techlabs.Euphoria.API.Models;
using Techlabs.Euphoria.Kernel.Framework.Repository;
using Techlabs.Euphoria.Kernel.Framework.Repository.EntityFramework;
using Techlabs.Euphoria.Kernel.Model;
using Techlabs.Euphoria.Kernel.Modules.BookingManagement;
using Techlabs.Euphoria.Kernel.Modules.DiscountManagement;
using Techlabs.Euphoria.Kernel.Modules.PaymentManagement;
using Techlabs.Euphoria.Kernel.Service;
using Techlabs.Euphoria.Kernel.Service.Email;
using Techlabs.Euphoria.Kernel.Service.PDFGenerator;
using Techlabs.Euphoria.Kernel.Service.SMS;
using Techlabs.Euphoria.Kernel.Specification;

namespace Techlabs.Euphoria.API.Controllers
{
    public class CitrusAmount
    {
        public string value { get; set; }
        public string currency { get; set; }
    }

    public class CustomParameter
    {
        public string param1 { get; set; }
        public string param2 { get; set; }
        public string myParameter { get; set; }
    }

    public class CitrusBill
    {
        public string merchantTxnId { get; set; }
        public CitrusAmount amount { get; set; }
        public string requestSignature { get; set; }
        public string merchantAccessKey { get; set; }
        public string returnUrl { get; set; }
        public string formPostUrl { get; set; }
        public string notifyUrl { get; set; }
        public CustomParameter customParameters { get; set; }
        public CitrusAmount alteredAmout { get; set; }
        public String dpSignature { get; set; }
    }

    [RoutePrefix("api/v1/organizers/{organizerId}/citrus")]
    public class CitrusController : ApiController
    {
        private IRepository<Organizer> _organizerRepository = new EntityFrameworkRepository<Organizer>();
        private IRepository<EventTicket> _eventTicketRepository = new EntityFrameworkRepository<EventTicket>();
        private IRepository<Event> _eventRepository = new EntityFrameworkRepository<Event>();
        private IRepository<Transaction> _transactionRepository = new EntityFrameworkRepository<Transaction>();
        private IRepository<Exhibition> _exhibitionRepository = new EntityFrameworkRepository<Exhibition>();
        private IRepository<Payment> _paymentRepository = new EntityFrameworkRepository<Payment>();
        private IRepository<Booking> _bookingRepository = new EntityFrameworkRepository<Booking>();
        private IRepository<StallBooking> _stallBookingRepository = new EntityFrameworkRepository<StallBooking>();
        private IRepository<Exhibitor> _exhibitorRepository = new EntityFrameworkRepository<Exhibitor>();
        private IRepository<EventExhibitionMap> _eventExhibitionMapRepository = new EntityFrameworkRepository<EventExhibitionMap>();
        private IRepository<VisitorDiscountCouponMap> _visitorDiscountCouponMapRepository = new EntityFrameworkRepository<VisitorDiscountCouponMap>();
        private static TimeZoneInfo INDIAN_ZONE = TimeZoneInfo.FindSystemTimeZoneById("India Standard Time");

        public CitrusController()
        {
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <returns></returns>
        [Route("bill/{ticketId}")]
        public IHttpActionResult Get(Guid organizerId, Guid ticketId)
        {
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Reading))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizer == null)
                    return NotFound();

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    return NotFound();

                var accessKey = ConfigurationManager.AppSettings["Citrus.AccessKey"];
                var secretKey = ConfigurationManager.AppSettings["Citrus.SecretKey"];
                var baseUrl = ConfigurationManager.AppSettings["BaseUrl"];
                var returnUrl = baseUrl + String.Format("/api/v1/organizers/{0}/citrus/return/{1}", organizerId, ticketId);
                var citrustransactionId = eventTicket.TxnIdForPaymentGateWay;

                var amount = eventTicket.TotalPriceOfTicket;     //TODO: Get it from ticket repository
                var currency = "INR";

                var clientFormPostUrl = ConfigurationManager.AppSettings["Citrus.ClientFormPostUrl"];
                var vanityUrl = "gsmarketing";

                var dataString = vanityUrl + amount + citrustransactionId + currency;
                byte[] key = Encoding.ASCII.GetBytes(secretKey);
                var hmac = new HMACSHA1(key);
                var stream = new MemoryStream(Encoding.ASCII.GetBytes(dataString));
                var signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

                return Ok(new CitrusBill()
                {
                    merchantTxnId = citrustransactionId,
                    amount = new CitrusAmount() { value = amount.ToString(), currency = currency },
                    requestSignature = signature,
                    merchantAccessKey = accessKey,
                    returnUrl = returnUrl,
                    formPostUrl = clientFormPostUrl
                });
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <param name="formData"></param>
        /// <returns></returns>
        [Route("return/{ticketId}")]
        public HttpResponseMessage Post(Guid organizerId, Guid ticketId, FormDataCollection formData)
        {
            var citrustransactionId = formData["TxId"];
            var status = formData["TxStatus"];
            var amount = formData["amount"];
            var pgTransactionNo = formData["pgTxnNo"];
            var issuerRefNo = formData["issuerRefNo"];
            var authIdCode = formData["authIdCode"];
            var firstName = formData["firstName"];
            var lastName = formData["lastName"];
            var pgResponseCode = formData["pgRespCode"];
            var addressZip = formData["addressZip"];
            var receivedSignature = formData["signature"];

            var textMessage = formData["TxMsg"];
            var paymentMode = formData["paymentMode"];
            var transactionDate = formData["txnDateTime"];

            bool flag = true;

            var dataString = "";

            if (citrustransactionId != null)
            {
                dataString += citrustransactionId;
            }
            if (status != null)
            {
                dataString += status;
            }
            if (amount != null)
            {
                dataString += amount;
            }
            if (pgTransactionNo != null)
            {
                dataString += pgTransactionNo;
            }
            if (issuerRefNo != null)
            {
                dataString += issuerRefNo;
            }
            if (authIdCode != null)
            {
                dataString += authIdCode;
            }
            if (firstName != null)
            {
                dataString += firstName;
            }
            if (lastName != null)
            {
                dataString += lastName;
            }
            if (pgResponseCode != null)
            {
                dataString += pgResponseCode;
            }
            if (addressZip != null)
            {
                dataString += addressZip;
            }

            var secretKey = ConfigurationManager.AppSettings["Citrus.SecretKey"];
            var key = Encoding.ASCII.GetBytes(secretKey);
            var hmac = new HMACSHA1(key);
            var stream = new MemoryStream(Encoding.ASCII.GetBytes(dataString));
            var signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

            if (receivedSignature != null && !signature.Equals(receivedSignature))
            {
                flag = false;
                throw new ValidationException("CitrusGenerated Signature and  Merchant Signature Mis-Mactch");
            }

            var response = new HttpResponseMessage();

            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Writing))
            {
                var eventTicket = _eventTicketRepository.GetById(ticketId);

                EventTicketType eventTicketType = eventTicket.EventTicketType;
                Event eventDetails = _eventRepository.GetById(eventTicketType.Event.Id);
                Venue venue = eventDetails.Venue;

                var transactionEntity = Transaction.Create(status, Double.Parse(amount),
                    pgTransactionNo, issuerRefNo, authIdCode, firstName, lastName, pgResponseCode,
                    addressZip, citrustransactionId, paymentMode, Convert.ToDateTime(transactionDate), textMessage);

                transactionEntity.EventTicket = eventTicket;

                //Gatting Ticket data to Show tickte after transaction 
                if (status.ToLower() == "success".ToLower())
                {
                    eventTicket.PaymentCompleted = true;

                    var eventExhibitionMapcriteria = new EventExhibitionMapSearchCriteria { EventId = eventDetails.Id };
                    var eventExhibitionMapsepcification = new EventExhibitionMapSpecificationForSearch(eventExhibitionMapcriteria);
                    var eventExhibitionMap = _eventExhibitionMapRepository.Find(eventExhibitionMapsepcification);

                    var visitorDiscountCouponMapCriteria = new VisitorDiscountCouponMapSearchCriteria { EventTicketId = eventTicket.Id };
                    var visitorDiscountCouponMapSpecification = new VisitorDiscountCouponMapSpecificationForSearch(visitorDiscountCouponMapCriteria);
                    var visitorDiscountCouponMap = _visitorDiscountCouponMapRepository.Find(visitorDiscountCouponMapSpecification).FirstOrDefault();

                    var totalAmount = eventTicketType.NonBusinessHrs * eventTicket.NumberOfTicket; ;
                    var discountedAmount = 0;
                    var finalAmount = 0;

                    string discountEmail = "";
                    if (visitorDiscountCouponMap != null)
                    {
                        discountedAmount = (int)Math.Round((double)((Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start of dicount --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;background:#febb13'> <tbody> <tr> <td width='50%'> <div style='height: 0;border-style: solid;border-width: 100px 120px 0 0;border-color: #1f2533 transparent transparent transparent;line-height: 0px;_border-color: #007bff #000000 #000000 #000000;_filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');width: 30%;'></div> </td> <td width='50%'> <h3>Avail {0}% Discount</h3> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of discount -->", visitorDiscountCouponMap.DiscountCoupon.Discount);
                    }
                    else
                    {
                        discountedAmount = (int)Math.Round((double)((20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start of dicount --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;background:#febb13'> <tbody> <tr> <td width='50%'> <div style='height: 0;border-style: solid;border-width: 100px 120px 0 0;border-color: #1f2533 transparent transparent transparent;line-height: 0px;_border-color: #007bff #000000 #000000 #000000;_filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');width: 30%;'></div> </td> <td width='50%'> <h3>Avail {0}% Discount</h3> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of discount -->", 20);
                    }

                    string logoImage = "";
                    string Bgcolor = "";
                    string exhibitionNames = "";

                    foreach (EventExhibitionMap singleEventExhibitionMap in eventExhibitionMap)
                    {
                        Exhibition exhibition = _exhibitionRepository.GetById(singleEventExhibitionMap.Exhibition.Id);
                        if (exhibition != null)
                        {
                            TimeSpan dayCount = eventTicket.TicketDate.Date - eventDetails.StartDate.Date;
                            if (dayCount.Days < 0)
                            {
                                string noTicket = "<html><body>" + "No Ticket Found Please try again" + "</body></html>";
                                Bgcolor = "#EAEAE7";
                            }

                            TicketColors colors = new TicketColors();
                            if (eventTicket.IsPayOnLocation == true)
                            {
                                Bgcolor = "#EAEAE7";
                            }
                            else
                            {
                                Bgcolor = colors[dayCount.Days];
                            }
                        }
                        else
                        {
                            Bgcolor = "#EAEAE7";
                        }

                        if (eventDetails.isActive && eventDetails.StartDate.Date <= eventTicket.TicketDate.Date && eventDetails.EndDate.Date >= eventTicket.TicketDate.Date)
                        {
                            var exhibitionName = exhibition.Name;
                            var BgImage = exhibition.BgImage;
                            var Logo = exhibition.Logo;

                            logoImage += string.Format("<div style='background:url({0});'><center><img src='{1}' alt='{2}' style='align-content:center; margin:auto; width:120px;'/><br><b>{3}</b></center></div>",
                                BgImage, Logo, exhibitionName, exhibitionName);
                            exhibitionNames += string.Format("<h3 style='margin-top:5px;margin-bottom:5px;color:#febb13'>{0}</h3>", exhibitionName);
                        }
                    }

                    var visitorName = eventTicket.Visitor.FirstName;
                    var tokenNumbertoSms = eventTicket.TokenNumber;
                    var mobileNo = eventTicket.Visitor.MobileNo;
                    var ticketTypeName = eventTicket.EventTicketType.Name;
                    var venueNameSMS = eventDetails.Venue.City;
                    var venueNameEmail = eventDetails.Address;
                    var ticketDate = eventTicket.TicketDate.ToString("dd-MMM-yyyy");
                    var noOfTickets = eventTicket.NumberOfTicket;
                    var exhibitionTime = eventDetails.Time;
                    var paymentType = "PAID ONLINE";
                    var paymentsMode = "Web Ticket";
                    var eventDate = eventDetails.StartDate.ToString("dd-MMM-yyyy") + " To " + eventDetails.EndDate.ToString("dd-MMM-yyyy");

                    SendSMS(paymentsMode, paymentType, tokenNumbertoSms, mobileNo, ticketTypeName, venueNameSMS, ticketDate, noOfTickets, finalAmount);

                    var retval = string.Format("<div class='row'> <div class='col-xs-2 col-md-3'> </div> <div class='col-xs-8 col-md-6' style='padding: 10px;margin-bottom:20px;margin-top:20px; justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999;'> <div style='text-align:center;'> <center> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' style='margin:5px;'> </center> </div> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <div> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Your Ticket Confirmation</span> </div> <div style='width:80%'> <span>You have received this email from <a href='http://gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </div> </div> <div class='col-xs-2 col-md-3'> </div> </div> <div class='row'> <div class='col-xs-2 col-md-3'> </div> <div class='col-xs-8 col-md-6' style=' padding:25px;margin-bottom:20px; justify - content: center; background-color:{0}; color:#000000; -moz-box-shadow: 0 0 15px #555;-webkit-box-shadow: 0 0 15px #555;box-shadow: 0 0 15px #555; '> <div class='row'> <div class='col-xs-1'> </div> <div class='col-xs-10' style='background-color:#ffffff '> <div class='row'> <center style='font-size:16px;font-weight:700;padding:10px; '>Transaction ID : {1} </center> </div> <div class='row'> <center style='font-size:18px;font-weight:bold;padding:10px; '><b>Transaction Status : {2}</b></center> </div> <div class='row'>  " + logoImage + "</div> <div class='row' style='margin: 0 auto;'> <center> <div class='col-xs-3' style='text-align:center; '>Date</div> <div class='col-xs-3' style='text-align:center; '>Time</div> <div class='col-xs-3' style='text-align:center; '>Quantity</div> </center> </div> <div class='row'> <div class='col-xs-3' style='text-align:center; '>{3}</div> <div class='col-xs-3' style='text-align:center; '>{4}</div> <div class='col-xs-3' style='text-align:center;font-size:25px; '>{5}</div> </div> <div class='row'> <center style='border: 1px solid transparent;border-color: #FEBB13; '> <h4>{6}</h4> </center> </div> <div class='row'> <center> <h2>{7}</h2> </center> </div> <div class='row'> <img src='http://gsmktg.com/web-ticket/images/ticket_shape.png' style='margin-bottom: 0px' /> </div> <div class='row' style='background-color:#febb13;padding:5px;text-align:center; '> <center style='font-size:16px;font-weight:700; '>BOOKING ID : {8}</center> <br> </div> </div> </div> </div> <div class='col-xs-2 col-md-3'> </div> </div> <div class='row'> <div class='col-xs-2 col-md-3'> </div> <div class='col-xs-8 col-md-6' style='margin-bottom:20px;justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999; '> <div style='margin:20px'> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Thank you and have a nice day</span> </div> <div style='margin:20px;text-align:left'> <ul> <center><b style='color:#000000;'>Terms And Conditions</b></center> <li>This ticket is valid for one visit on the day printed on ticket during the period of the 15th India International Mega Trade Fair (between 16th to 26th December, 2016 at Science City Ground, Kolkata).</li> </ul> </div> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0; '> <div class='row ' style='margin: 0 auto; '> <div class=' col-xs-12 col-sm-6 ' style='width:50%;text-align:center;border-right:1px dotted #febb13;min-height:50px' '> <span style='width:100%;'> Visit us at </span><br> <span style='width:100%;'> <a style='color:#070707;text-decoration:none' href=''>www.gsmktg.com</a> </span> </div> <div class='col-xs-12 col-sm-6 ' style='width:50%;text-align:center;min-height:50px '> <span style='width:100%;text-align:center;'> Customer Support </span><br> <span style='width:100%;text-align:center;'> <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> </span> </div> </div> <hr style='margin:10px;width:80%;background-color:#febb13; height: 1px; border: 0;'> <div class='row'> <span> Best regards, GS Marketing Team <br>Â© 2016 GS Marketing - All Rights Reserved </span> </div> </div> <div class='col-xs-2 col-md-3'> </div> </div> ",
                        Bgcolor, citrustransactionId, status, ticketDate, exhibitionTime, noOfTickets, venueNameEmail, paymentType, tokenNumbertoSms);
                    string htmlPage = "<!DOCTYPE html><!--[if IE 7]><html class='ie ie7' lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><![endif]--><!--[if IE 8]><html class='ie ie8' lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><![endif]--><!--[if !(IE 7) & !(IE 8)]><!--><html lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><!--<![endif]--><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width'> <link rel='profile' href='http://gmpg.org/xfn/11'> <link rel='pingback' href='http://gsmktg.com/xmlrpc.php'> <!--[if lt IE 9]> <script src='http://gsmktg.com/wp-content/themes/eventiz/js/html5.js'></script> <![endif]--> <title>Visitor Lounge &#8211; Best Exhibition In India | GS Marketing</title><link rel='alternate' type='application/rss+xml' title='Best Exhibition In India | GS Marketing &raquo; Feed' href='http://gsmktg.com/feed/' /><link rel='alternate' type='application/rss+xml' title='Best Exhibition In India | GS Marketing &raquo; Comments Feed' href='http://gsmktg.com/comments/feed/' /><script type='text/javascript'>window._wpemojiSettings = {'baseUrl':'https://s.w.org/images/core/emoji/72x72/','ext':'.png','source':{'concatemoji':'http://gsmktg.com/wp/wp-includes/js/wp-emoji-release.min.js?ver=4.5.4'}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement('canvas'),g=f.getContext&&f.getContext('2d'),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline='top',g.font='600 32px Arial',a){case'flag':return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case'diversity':return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+','+c[1]+','+c[2]+','+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+','+c[1]+','+c[2]+','+c[3],d!==e;case'simple':return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case'unicode8':return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement('script');c.src=a,c.type='text/javascript',b.getElementsByTagName('head')[0].appendChild(c)}var f,g,h,i;for(i=Array('simple','flag','unicode8','diversity'),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],'flag'!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener('DOMContentLoaded',g,!1),a.addEventListener('load',g,!1)):(a.attachEvent('onload',g),b.attachEvent('onreadystatechange',function(){'complete'===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script><style type='text/css'>img.wp-smiley,img.emoji {display: inline !important;border: none !important;box-shadow: none !important;height: 1em !important;width: 1em !important;margin: 0 .07em !important;vertical-align: -0.1em !important;background: none !important;padding: 0 !important;}</style><link rel='stylesheet' href='http://www.w3schools.com/lib/w3.css'><link rel='stylesheet' id='jquery-ui-css-css' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='wpsm_ac-sh-font-awesome-front-css' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type='text/css' media='all' /><!--<link rel='stylesheet' id='wpsm_ac-sh-font-awesome-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/font-awesome/css/font-awesome.min.css?ver=4.5.4' type='text/css' media='all' />--><link rel='stylesheet' id='wpsm_ac-sh_bootstrap-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/bootstrap-front.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='jquery-ui-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/jquery-ui.min.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themes.style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.Tabs.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themesTabs.style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='font-awesome-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/bower/font-awesome/css/font-awesome.min.css?ver=4.11.2.1' type='text/css' media='all' /><link rel='stylesheet' id='contact-form-7-css' href='http://gsmktg.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.4.2' type='text/css' media='all' /><link rel='stylesheet' id='ewd-feup-style-css' href='http://gsmktg.com/wp-content/plugins/front-end-only-users/css/feu-styles.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='feup-yahoo-pure-css-css' href='http://gsmktg.com/wp-content/plugins/front-end-only-users/css/feup-pure.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='rs-plugin-settings-css' href='http://gsmktg.com/wp-content/plugins/revslider/public/assets/css/settings.css?ver=5.2.5.3' type='text/css' media='all' /><style id='rs-plugin-settings-inline-css' type='text/css'>#rs-demo-id {}</style><link rel='stylesheet' id='woocommerce-layout-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce-layout.css?ver=2.6.1' type='text/css' media='all' /><link rel='stylesheet' id='woocommerce-smallscreen-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce-smallscreen.css?ver=2.6.1' type='text/css' media='only screen and (max-width: 768px)' /><link rel='stylesheet' id='woocommerce-general-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce.css?ver=2.6.1' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-google-fonts-css' href='http://fonts.googleapis.com/css?family=Playfair%2BDisplay%3A400%2C400italic%2C700italic%2C700%7CUbuntu%3A400%2C300%2C500%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-style-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='prettyPhoto-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/prettyPhoto.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='js_composer_front-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/js_composer.min.css?ver=4.11.2.1' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-woocommerce-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/woocommerce.css?ver=1.0' type='text/css' media='all' /><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script><script>jQueryWP = jQuery;</script><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script><script type='text/javascript'>/* <![CDATA[ */var ewd_feup_ajax_translations = {'mismatch_label':'Mismatch','too_short_label':'Too Short','weak_label':'Weak','good_label':'Good','strong_label':'Strong'};/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/front-end-only-users//js/ewd-feup-check-password-strength.js?ver=4.5.4'></script><script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true&#038;ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/opalsingleevent//assets/gmap3.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/revslider/public/assets/js/jquery.themepunch.tools.min.js?ver=5.2.5.3'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/revslider/public/assets/js/jquery.themepunch.revolution.min.js?ver=5.2.5.3'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/bootstrap.min.js?ver=20130402'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/jquery.prettyPhoto.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/wp-charts/js/Chart.min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/pbrthemer/assets/js/elevatezoom/elevatezoom-min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/easy-logo-slider/js/jquery.jcarousel.min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/easy-logo-slider/js/jcarousel.responsive.js?ver=4.5.4'></script><link rel='https://api.w.org/' href='http://gsmktg.com/wp-json/' /><link rel='EditURI' type='application/rsd+xml' title='RSD' href='http://gsmktg.com/xmlrpc.php?rsd' /><link rel='wlwmanifest' type='application/wlwmanifest+xml' href='http://gsmktg.com/wp-includes/wlwmanifest.xml' /> <meta name='generator' content='WordPress 4.5.4' /><meta name='generator' content='WooCommerce 2.6.1' /><link rel='canonical' href='http://gsmktg.com/reason-for-visiting/' /><link rel='shortlink' href='http://gsmktg.com/?p=10408' /><link rel='alternate' type='application/json+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F' /><link rel='alternate' type='text/xml+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F&#038;format=xml' /><script>var FEUP_Min_Pass = 3;</script><link id='gwfc-body-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-body-style'>body{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h1-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h1-style'>h1{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h2-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h2-style'>h2{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h3-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h3-style'>h3{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h4-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h4-style'>h4{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h5-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h5-style'>h5{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h6-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h6-style'>h6{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-blockquote-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-blockquote-style'>blockquote{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-p-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-p-style'>p{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-li-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-li-style'>li{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><style type='text/css'>.myfixed { margin:0 auto!important; float:none!important; border:0px!important; background:none!important; max-width:100%!important; }#mysticky-nav { width:100%!important; position: static;top: -100px;}.wrapfixed { position: fixed!important; top:0px!important; left: 0px!important; margin-top:0px!important; z-index: 1000000; -webkit-transition: 0.3s; -moz-transition: 0.3s; -o-transition: 0.3s; transition: 0.3s; -ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=95)'; filter: alpha(opacity=95); opacity:.95; background-color: #ffffff!important; }@media (max-width: 359px) {.wrapfixed {position: static!important; display: none!important;}}</style><meta name='generator' content='Powered by Visual Composer - drag and drop page builder for WordPress.'/><!--[if lte IE 9]><link rel='stylesheet' type='text/css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/vc_lte_ie9.min.css' media='screen'><![endif]--><!--[if IE 8]><link rel='stylesheet' type='text/css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/vc-ie8.min.css' media='screen'><![endif]--><!--[if lte IE 8]><script src='http://gsmktg.com/wp-content/plugins/wp-charts/js/excanvas.compiled.js'></script><![endif]--><style> /*wp_charts_js responsive canvas CSS override*/ .wp_charts_canvas { width:100%!important; max-width:100%; } @media screen and (max-width:480px) { div.wp-chart-wrap { width:100%!important; float: none!important;margin-left: auto!important;margin-right: auto!important;text-align: center; } } </style><style type='text/css' id='eventiz-header-css'></style><meta name='generator' content='Powered by Slider Revolution 5.2.5.3 - responsive, Mobile-Friendly Slider Plugin for WordPress with comfortable drag and drop interface.' /><style>.vc_custom_1450323409828{padding-top: 35px !important;padding-bottom: 5px !important;background-image: url(http://gsmktg.com/wp-content/uploads/2016/05/bg-newletter.jpg?id=8467) !important;}</style><style type='text/css' data-type='vc_custom-css'>.site-main{ padding-bottom: 0!important;}.sidebar-line-height{ line-height: 30px; margin-left:20px;}</style> <style> .book-ticket-button { z-index: 6; min-width: 139px; max-width: 63px; white-space: nowrap; font-size: 25px; line-height: 17px; font-weight: 527; color: rgb(12, 12, 12); font-family: Roboto; text-align: center; background-color: rgb(252, 186, 49); padding: 2px 36px; border-color: rgb(0, 0, 0); border-radius: 41px; outline: medium none; box-shadow: none; box-sizing: border-box; cursor: pointer; visibility: inherit; transition: none 0s ease 0s; font-style: normal; text-decoration: none; border-width: 0px; border-style: none; margin: 0px; letter-spacing: 0px; min-height: 40px; max-height: 40px; opacity: 1; transform: translate3d(0px, 0px, 0px); transform-origin: 50% 50% 0px;} } </style> <style type='text/css' data-type='vc_shortcodes-custom-css'>.vc_custom_1470665475652{margin-right: 4% !important;margin-left: 4% !important;}.vc_custom_1469607261759{padding-top: 4% !important;padding-right: 4% !important;}</style><noscript><style type='text/css'> .wpb_animate_when_almost_visible { opacity: 1; }</style></noscript></head><body class='page page-id-10408 page-template page-template-page-templates page-template-full-width page-template-page-templatesfull-width-php masthead-fixed singular wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive'><div id='wptime-plugin-preloader'></div><div id='page' class='hfeed site'><div class='pbr-page-inner row-offcanvas row-offcanvas-left'> <div class='topbar-mobile hidden-lg hidden-md'> <div class='active-mobile pull-left'> <button data-toggle='offcanvas' class='btn btn-offcanvas btn-toggle-canvas offcanvas' type='button'> <i class='fa fa-bars'></i> </button> </div> <div class='topbar-inner pull-left'> <div class='active-mobile search-popup pull-left'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'> <span class='fa fa-search'></span> </a> <div class='active-content dropdown-menu' role='menu'> <form role='search' method='get' class='input-group search-category' action='http://gsmktg.com/'><div class='input-group-addon search-category-container'> <div class='select'> </div></div><input name='s' maxlength='60' class='form-control search-category-input' type='text' size='20' placeholder='What do you need...'> <div class='input-group-btn'> <label class='btn btn-link btn-search'> <span class='title-search hidden'>Search</span> <input type='submit' class='fa searchsubmit' value='&#xf002;'/> </label> <input type='hidden' name='post_type' value='product'/></div></form> </div> </div> <div class='active-mobile setting-popup pull-left hidden'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'> <span class='fa fa-user'></span> </a> <div class='active-content dropdown-menu' role='menu'> </div> </div> </div> </div> <header id='pbr-masthead' class='site-header' role='banner'> <div class='container'> <div class='row'> <div class='header-main'> <div class='logo-wrapper col-lg-2 col-md-2 col-sm-12 col-xs-12 pull-left'> <div id='pbr-logo' class='logo'> <a href='http://gsmktg.com/'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='Best Exhibition In India | GS Marketing'> </a> </div> </div> <section id='pbr-mainmenu' class='pbr-mainmenu col-lg-10 col-md-10 col-sm-12 col-xs-12 pull-right'> <div> <div class='inner navbar-mega-simple pull-right'> <nav data-duration='400' class='hidden-xs hidden-sm pbr-megamenu slide animate navbar navbar-mega' role='navigation'> <button aria-expanded='true' data-target='.navbar-mega-collapse' data-toggle='collapse' type='button' class='navbar-toggle'> <span class='sr-only'>Toggle navigation</span> <span class='icon-bar'></span> <span class='icon-bar'></span> <span class='icon-bar'></span> </button> <div class='collapse navbar-collapse navbar-mega-collapse'> <ul id='primary-menu' class='nav navbar-nav megamenu'> <li id='menu-item-9869' class='dropdown menu-item-9869 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>About <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-9872' class='menu-item-9872 level-1'><a href='http://gsmktg.com/?page_id=9716'>Company Info</a></li><li id='menu-item-11324' class='menu-item-11324 level-1'><a href='http://gsmktg.com/?page_id=11295'>Our Leadership</a></li><li id='menu-item-9871' class='menu-item-9871 level-1'><a href='http://gsmktg.com/?page_id=9729'>Partners and Sponsors</a></li> </ul> </li> <li id='menu-item-9865' class='dropdown menu-item-9865 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Exhibitions <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-10601' class='menu-item-10601 level-1'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li><li id='menu-item-10892' class='menu-item-10892 level-1'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li><li id='menu-item-12018' class='menu-item-12018 level-1'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li><li id='menu-item-11229' class='menu-item-11229 level-1'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calendar</a></li> </ul> </li> <li id='menu-item-9595' class='dropdown menu-item-9595 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Locations <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-9602' class='menu-item-9602 level-1'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li><li id='menu-item-10198' class='menu-item-10198 level-1'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li><li id='menu-item-10199' class='menu-item-10199 level-1'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li><li id='menu-item-10197' class='menu-item-10197 level-1'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <!--<li id='menu-item-12847' class='menu-item-12847 level-1'><a href='#'>Delhi-NCR</a></li>--> </ul> </li> <li id='menu-item-9359' class='dropdown menu-item-9359 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Exhibitors <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-13336' class='menu-item-13336 level-1'><a href='http://gsmktg.com/exhibitor-lounge'>Exhibitor Lounge</a></li><li id='menu-item-10864' class='menu-item-10864 level-1'><a href='http://gsmktg.com/?page_id=10468'>Reason For Exhibiting</a></li><li id='menu-item-11364' class='menu-item-11364 level-1'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li><li id='menu-item-10235' class='menu-item-10235 level-1'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li><li id='menu-item-12851' class='menu-item-12851 level-1'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </li> <li id='menu-item-9873' class='dropdown menu-item-9873 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Visitors <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-12501' class='menu-item-12501 level-1'><a href='http://gsmktg.com/web-ticket/'>Visitor Lounge</a></li><li id='menu-item-10696' class='menu-item-10696 level-1'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li><li id='menu-item-13054' class='menu-item-13054 level-1'><a href='http://gsmktg.com/web-ticket/#/bookticket'>Buy Ticket</a></li><li id='menu-item-9361' class='menu-item-9361 level-1'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&amp;hl=en'>Mobile App</a></li><li id='menu-item-13071' class='menu-item-13071 level-1'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li></ul></li><li id='menu-item-13259' class='dropdown menu-item-13259 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Downloads <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-13279' class='menu-item-13279 level-1'><a href='http://gsmktg.com/?page_id=13261'>Brochure</a></li><li id='menu-item-13287' class='menu-item-13287 level-1'><a href='http://gsmktg.com/?page_id=13280'>Participant Forms</a></li></ul></li><li id='menu-item-11210' class='menu-item-11210 level-0'><a href='http://gsmktg.com/?page_id=11017'>Press</a></li><li id='menu-item-11211' class='menu-item-11211 level-0'><a href='http://gsmktg.com/?page_id=22'>Blog</a></li><li id='menu-item-10229' class='menu-item-10229 level-0'><a href='http://gsmktg.com/?page_id=10207'>Contact</a></li> </ul> </div> </nav> </div> </div> <div id='search-container' class='search-box-wrapper hidden-sm hidden-xs'> <div class='pbr-dropdow-search dropdown'> <a data-target='.bs-search-modal-lg' data-toggle='modal' class='search-focus btn dropdown-toggle dropdown-toggle-overlay'> <i class='fa fa-search'></i> </a> <div class='modal fade bs-search-modal-lg' tabindex='-1' role='dialog' aria-hidden='true'> <div class='modal-dialog modal-lg'> <div class='modal-content'> <div class='modal-header'> <button aria-label='Close' data-dismiss='modal' class='close btn btn-sm btn-primary pull-right' type='button'><span aria-hidden='true'><i class='fa fa-times'></i></span></button> <h4 id='gridSystemModalLabel' class='modal-title'>Search</h4> </div> <div class='modal-body'> <div class='toggle-overlay-container'> <div class='search-box'> <form role='search' method='get' class='searchform' action='http://gsmktg.com/'> <div class='pbr-search input-group'> <input name='s' maxlength='40' class='form-control input-large input-search' type='text' size='20' placeholder='Search...'> <span class='input-group-addon input-large btn-search'> <input type='submit' class='fa fa-search' value='&#xf002;' /> <input type='hidden' name='post_type' value='post' /> </span> </div> </form> </div> <div class='dropdown-toggle-button' data-target='.toggle-overlay-container'></div> </div> </div> </div> </div> </div> </div> </div> </section> </div> </div> </div> <div class='pbr-topcart'> <div id='cart' class='dropdown'> <div class='topcart-inner '> <a class='dropdown-toggle mini-cart' href='http://gsmktg.com/?page_id=5026' title='View your shopping cart'> <span class='text-skin cart-icon'> <i class='icon-cart2'></i> <span class='title-checkout'>Checkout</span> </span> <span class='title-cart'>My Cart </span> <span class='mini-cart-items'> 0 <em>item</em> </span> <span class='mini-cart-total'> <span class='woocommerce-Price-amount amount'><span class='woocommerce-Price-currencySymbol'><span class='currency'>&#8377;</span></span>0.00</span> </span> </a> </div> </div> </div> </header><!-- #masthead --> <section id='main' class='site-main'><section id='pbr-breadscrumb' class='pbr-breadscrumb' style='background-color:#febb13;background-image:url('http://gsmktg.com/web-ticket/images/visitors.jpg')'><div class='container'><div class='breadcrumb-inner'><div class='title-page'>Visitors Lounge</div><ol class='breadcrumb'><li><a href='http://gsmktg.com'>Home</a> &raquo;</li> <li class='active'>Visitors Lounge</li></ol></div></div></section><section id='main-container' class=' inner'><center> <!---->" + retval + "</center></section> </section> <!-- #main --> <footer id='pbr-footer ' class='site-footer pbr-footer ' role='contentinfo '> <div class='inner '> <div class='pbr-footer-profile '> <div class='wpb-container vc_row wpb_row vc_row-fluid space-0 vc_custom_1450323409828 vc_row-has-fill '> <div class='container '> <div class='row '> <div class='col-sm-12 '> <div class='vc_column-inner '> <div class='wpb_wrapper '> <div class='vc_row wpb_row vc_inner vc_row-fluid '> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>Exhibitions</h2> <div class='menu-footer-exhibitions-container'> <ul id='menu-footer-exhibitions' class='menu'> <li id='menu-item-10968' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10968'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li> <li id='menu-item-10967' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10967'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li> <li id='menu-item-12343' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12343'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li> <li id='menu-item-13186' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13186'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calender</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>Locations</h2> <div class='menu-footer-locations-container'> <ul id='menu-footer-locations' class='menu'> <li id='menu-item-10985' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10985'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li> <li id='menu-item-10987' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10987'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li> <li id='menu-item-10981' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10981'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li> <li id='menu-item-10986' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10986'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <li id='menu-item-12857' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-12857'><a href='#'>Delhi-NCR</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>For Exhibitors</h2> <div class='menu-footer-forexhibitors-container'> <ul id='menu-footer-forexhibitors' class='menu'> <li id='menu-item-10994' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10994'><a href='http://gsmktg.com/?page_id=10468'>Reason for Exhibiting</a></li> <li id='menu-item-12855' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12855'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li> <li id='menu-item-10991' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10991'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li> <li id='menu-item-13185' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13185'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>For Visitors</h2> <div class='menu-footer-forvisitors-container'> <ul id='menu-footer-forvisitors' class='menu'> <li id='menu-item-13180' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13180'><a href='http://gsmktg.com/web-ticket/#/'>Visitor Lounge</a></li> <li id='menu-item-10997' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10997'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li> <li id='menu-item-11001' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-11001'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&#038;hl=en'>Mobile App</a></li> <li id='menu-item-13080' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-13080'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class='wpb-container vc_row wpb_row vc_row-fluid '> <div class='container '> <div class='row '> <div class='col-sm-12 '> <div class='vc_column-inner '> <div class='wpb_wrapper '> <div class='wpb_raw_code wpb_content_element wpb_raw_html '> <div class='wpb_wrapper '> <div class='bo-social-icons text-center '> <a class='bo-social-outline-light radius-6x ' href='https://www.facebook.com/gsmarketingassociates/?ref=aymt_homepage_panel '><i class='fa fa-facebook '></i></a><a class='bo-social-outline-light radius-6x ' href='https://twitter.com/gsmktga '><i class='fa fa-twitter '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://plus.google.com/110788377399692549560/posts?gmbpt=true&hl=en '><i class='fa fa-google '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://www.linkedin.com/company/7961893?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A7961893%2Cidx%3A3-5-10%2CtarId%3A1464350269377%2Ctas%3AGS%20Marketing '><i class='fa fa-linkedin '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://www.instagram.com/iimtf/ '><i class='fa fa-instagram '></i></a> </div> </div> </div> <div class='wpb_text_column wpb_content_element '> <div class='wpb_wrapper '> <div class='text-center ' style='font-size: 12px; '> <p>Â© 2016 GS Marketing - All Rights Reserved</p> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </footer> <!-- #colophon --> <div id='pbr-off-canvas ' class='pbr-off-canvas sidebar-offcanvas hidden-lg hidden-md '> <div class='pbr-off-canvas-body '> <div class='offcanvas-head bg-primary '><button type='button ' class='btn btn-offcanvas btn-toggle-canvas btn-default ' data-toggle='offcanvas '><i class='fa fa-close '></i></button><span>Menu</span></div> <nav class='navbar navbar-offcanvas navbar-static ' role='navigation '> <div class='navbar-collapse navbar-offcanvas-collapse '> <ul id='main-menu-offcanvas ' class='nav navbar-nav '> <li class='dropdown menu-item-9869 level-0 '><a href='# '>About </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-9872 level-1 '><a href='http://gsmktg.com/about/companyinfo/ '>Company Info</a></li> <li class='menu-item-11324 level-1 '><a href='http://gsmktg.com/about/our-leadership/ '>Our Leadership</a></li> <li class='menu-item-9871 level-1 '><a href='http://gsmktg.com/about/sponsors/ '>Partners and Sponsors</a></li> </ul> </li> <li class='dropdown menu-item-9865 level-0 '><a href='# '>Exhibitions </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-10601 level-1 '><a href='http://gsmktg.com/india-international-mega-trade-fair-3/ '>India International Mega Trade Fair</a></li> <li class='menu-item-10892 level-1 '><a href='http://gsmktg.com/home-decor/ '>GS Home &#038; Decor</a></li> <li class='menu-item-12018 level-1 '><a href='http://gsmktg.com/gs-tourism-fair/ '>GS Tourism Fair</a></li> <li class='menu-item-11399 level-1 '><a href='http://gsmktg.com/gs-consumer-expo/ '>GS Consumer Expo</a></li> <li class='menu-item-11229 level-1 '><a href='http://gsmktg.com/schedule/ '>Schedule Calendar</a></li> </ul> </li> <li class='dropdown menu-item-9595 level-0 '><a href='# '>Locations </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-9602 level-1 '><a href='http://gsmktg.com/kolkata/ '>Kolkata</a></li> <li class='menu-item-10198 level-1 '><a href='http://gsmktg.com/visakhapatnam-2/ '>Visakhapatnam</a></li> <li class='menu-item-10199 level-1 '><a href='http://gsmktg.com/bhubaneswar-2/ '>Bhubaneswar</a></li> <li class='menu-item-10197 level-1 '><a href='http://gsmktg.com/ranchi-2/ '>Ranchi</a></li> </ul> </li> <li class='dropdown menu-item-9359 level-0 '><a href='# '>For Exhibitors </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-12470 level-1 '><a href='http://gsmktg.com/exhibitor-lounge/ '>Exhibitor Lounge</a></li> <li class='menu-item-10864 level-1 '><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/ '>Reason For Exhibiting</a></li> <li class='menu-item-11364 level-1 '><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/ '>Facts And Figures Exhibitors</a></li> <li class='menu-item-10867 level-1 '><a href='http://gsmktg.com/exhibitor/exhibition-presentation-services/ '>Exhibition Presentation Services</a></li> <li class='menu-item-10266 level-1 '><a href='http://gsmktg.com/stall-booking/ '>Stall Booking</a></li> <li class='menu-item-10235 level-1 '><a href='http://gsmktg.com/exhibitor/exhibition-manual/ '>Exhibition Manual</a></li> <li class='menu-item-12095 level-1 '><a href='http://gsmktg.com/media/ '>Exhibition Media Ads</a></li> </ul> </li> <li class='dropdown menu-item-9873 level-0 '><a href='# '>For Visitors </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-10688 level-1 '><a href='http://gsmktg.com/reason-for-visiting/ '>Reason For Visiting</a></li> <li class='menu-item-10696 level-1 '><a href='http://gsmktg.com/facts-figure-for-visitors/ '>Facts &#038; Figure Visitors</a></li> <li class='menu-item-9349 level-1 '><a href='http://gsmktg.com/visitor-ticketing/ '>Buy Tickets</a></li> <li class='menu-item-9361 level-1 '><a href='# '>Mobile App</a></li> <li class='menu-item-9350 level-1 '><a href='http://gsmktg.com/mobile-app-guide/ '>Mobile App Guide</a></li> </ul> </li> <li class='menu-item-11210 level-0 '><a href='http://gsmktg.com/press/ '>Press</a></li> <li class='menu-item-11211 level-0 '><a href='http://gsmktg.com/blog/ '>Blog</a></li> <li class='menu-item-10229 level-0 '><a href='http://gsmktg.com/contact-us/ '>Contact</a></li> <li class='menu-item-12468 level-0 '><a href='http://gsmktg.com/registration-form/ '>Register</a></li> <li class='menu-item-12469 level-0 '><a href='http://gsmktg.com/my-account/ '>Login</a></li> </ul> </div> </nav> </div> </div> </div> </div> <div class='modal fade ' id='pbr-quickview-modal ' tabindex='-1 ' role='dialog ' aria-hidden='true '> <div class='modal-dialog modal-lg '> <div class='modal-content '> <div class='modal-header '><button type='button ' class='close btn btn-close ' data-dismiss='modal ' aria-hidden='true '><i class='fa fa-times '></i></button></div> <div class='modal-body '><span class='spinner '></span></div> </div> </div> </div> <link rel='stylesheet ' id='style-admin-css ' href='http://gsmktg.com/wp-content/plugins/easy-logo-slider/css/style-admin.css?ver=4.5.3 ' type='text/css ' media='all ' /> <link rel='stylesheet ' id='prettyphoto-css ' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/prettyphoto/css/prettyPhoto.min.css?ver=4.11.2.1 ' type='text/css ' media='all ' /> <script type='text/javascript '> /* <![CDATA[ */ var _wpcf7 = { 'loaderUrl ': 'http://gsmktg.com/wp-content/plugins/contact-form-7/images/ajax-loader.gif ', 'recaptchaEmpty ': 'Please verify that you are not a robot. ', 'sending ': 'Sending ... ' }; /* ]]> */ </script> <script type='text/javascript '> /* <![CDATA[ */ var mysticky_name = { 'mysticky_string ': '.header-main ', 'mysticky_active_on_height_string ': '320 ', 'mysticky_disable_at_width_string ': '359 ' }; /* ]]>*/ </script> <script type='text/javascript ' src='http://gsmktg.com/wp-content/plugins/mystickymenu/js/mystickymenu.min.js?ver=1.0.0 '></script> <script type='text/javascript '> /* <![CDATA[ */ var wc_add_to_cart_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ', 'i18n_view_cart ': 'View Cart ', 'cart_url ': 'http://gsmktg.com/cart/ ', 'is_cart ': ' ', 'cart_redirect_after_add ': 'no ' }; /* ]]>*/ </script> <script type='text/javascript '> /* <![CDATA[ */ var woocommerce_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ' }; /* ]]> */ </script> <script type='text/javascript '> /* <![CDATA[ */ var wc_cart_fragments_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ', 'fragment_name ': 'wc_fragments ' }; /* ]]>*/ </script> <script type='text/javascript '> /* <![CDATA[ */ var eventizAjax = { 'ajaxurl ': 'http://gsmktg.com/wp-admin/admin-ajax.php ' }; /* ]]> */ </script> <script type='text/javascript ' src='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/vc_carousel/js/transition.min.js?ver=4.11.2.1 '></script> <!-- Wordpress Blocks plugin developed by RenzoJohnson.com --> <script type='text/javascript '> (function() { var request, b = document.body, c = 'className ', cs = 'customize-support ', rcs = new RegExp('(^|s+)(no-)? ' + cs + '(s+|$) '); request = true; b[c] = b[c].replace(rcs, ' '); b[c] += (window.postMessage && request ? ' ' : ' no- ') + cs; }()); </script></body></html>";
                    string htmalPDF = "<html><body>" + retval + "</body></html>";

                    //var data = string.Format("<div style='width: 50%; border: 5px solid transparent; border-radius: 4px; border-color: #FEBB13; padding:10px;margin-bottom:20px; justify - content: center; background-color:{0}; color:#000000; -moz-box-shadow: 0 0 15px #555;-webkit-box-shadow: 0 0 15px #555;box-shadow: 0 0 15px #555;'> <div style='width: 400px;background-color:#ffffff'> <table><tr>" + logoImage + " </tr> <tr> <table style='text-align:center;width: 400px;'> <tr> <th style='text-align:center;'>Date</th> <th style='text-align:center;'>Time</th> <th style='text-align:center;'>Quantity</th> </tr> <tr> <td>{1}</td> <td>{2}</td> <td style='font-size:25px;'>{3}</td> </tr> </table> </tr> <tr> <center style='border: 1px solid transparent;border-color: #FEBB13;'> <h4>{4}</h4> </center> </tr> <tr> <center> <h2>{5}</h2> </center> </tr> <tr style='border: 1px solid transparent;border-color: #FFFFFF;'> <img src='http://gsmktg.com/web-ticket/images/ticket_shape.png' width='100%' style='margin-bottom: 0px' /> </tr> <tr> <div style='background-color:#febb13;padding:5px;text-align:center;'> <br> <center style='font-size:16px;font-weight:700;'>BOOKING ID : {6}</center> <br> </div> </tr> </table> </div> </div> <div style='width: 50%;margin-bottom:20px; border: 5px solid transparent; border-radius: 4px; border-color: #FEBB13; padding:10px;justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999;'> <div style='margin:20px'> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Thank you and have a nice day</span> </div> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <div style='margin:20px;text-align:left'> <ul> <center><b style='color:#000000;'>Terms And Conditions</b></center> <li>This ticket is valid for one visit on the day printed on ticket during the period of the 15th India International Mega Trade Fair (between 16th to 26th December, 2016 at Science City Ground, Kolkata).</li> </ul> </div> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <div> <table> <tr> <td> <div style='width:100%;text-align:center;border-right:1px dotted #febb13;min-height:50px'> <span style='width:100%;'> Visit us at </span><br> <span style='width:100%;'> <a style='color:#070707;text-decoration:none' href=''>www.gsmktg.com</a> </span> </div> </td> <td> <div style='width:100%;text-align:center;padding:0px 4px;min-height:50px'> <span style='width:100%;'> Customer Support </span><br> <span style='width:100%;'> <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> </span> </div> </td> </tr> </table> <span> Best regards, GS Marketing Team <br>Â© 2016 GS Marketing - All Rights Reserved </div> </span> </div></center></html>",
                    //    Bgcolor, ticketDate, exhibitionTime, noOfTickets, venue, paymentType, tokenNumbertoSms);
                    //string htmlPagemail = "<html><center> <div style='width: 50%; border: 5px solid transparent; border-radius: 4px; border-color: #FEBB13; padding: 10px;margin-bottom:20px;margin-top:20px; justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999;'> <div style='text-align:center;width: 400px;'> <center> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' style='margin:5px;'> </center> </div> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <div> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Your Ticket Confirmation</span> </div> <div style='width:80%'> <span>You have received this email from <a href='http://gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </div> </div>" + data;

                    var data = string.Format("<h5 style='margin-top:5px;margin-bottom:5px;'>{0}</h5> <b style='margin-top:5px;margin-bottom:5px;'>{1}</b>&nbsp;&nbsp; | &nbsp;&nbsp;<u>{2}</u> </td> <td width='30%' align='center' style='padding: 10px;border-left: dotted 1px;'> <h4 style='font-weight:bolder;'>{3}</h4> <img src='http://gsmktg.com/mobile_images/ticket_icon.png' style='width:30%;height:auto;'><br> Tickets:<b>{4}</b> </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Date </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {5} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Amount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {6} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Quantity </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {7} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Discount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {8} </td> </tr> <tr width='100%' style='paddimg:10px;border-top: #D0CEC7 solid 1px;'> <td width='70%' align='left' style='padding: 10px;'> <b>Total Amount</b> </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> <b>{9} </b> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> </td> </tr> </tbody></table><!--ticket-->",
                        eventDetails.Address, eventDate, eventDetails.Time, paymentType, noOfTickets, ticketDate, totalAmount, noOfTickets, discountedAmount, finalAmount);
                    string htmlPagemail = "<html xmlns='http://www.w3.org/1999/xhtml'> <head> <meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> <meta name='viewport' content='width=device-width, initial-scale=1.0'/> <title>Ticket</title> <style type='text/css'> /* Client-specific Styles */ #outlook a {padding:0;} /* Force Outlook to provide a 'view in browser' menu link. */ body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;font-family: Helvetica, arial, sans-serif;} /* Prevent Webkit and Windows Mobile platforms from changing default font sizes, while not breaking desktop design. */ .ExternalClass {width:100%;} /* Force Hotmail to display emails at full width */ .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Force Hotmail to display normal line spacing.*/ #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;} img {outline:none; text-decoration:none;border:none; -ms-interpolation-mode: bicubic;} a img {border:none;} .image_fix {display:block;} p {margin: 0px 0px !important;} table td {border-collapse: collapse;} table { border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; } a {color: #0a8cce;text-decoration: none;text-decoration:none!important;} /*STYLES*/ table[class=full] { width: 100%; clear: both; } /*IPAD STYLES*/ @media only screen and (max-width: 640px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 440px!important;text-align:center!important;} table[class=devicewidthinner] {width: 420px!important;text-align:center!important;} img[class=banner] {width: 440px!important;height:220px!important;} img[class=colimg2] {width: 440px!important;height:220px!important;} } /*IPHONE STYLES*/ @media only screen and (max-width: 480px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 280px!important;text-align:center!important;} table[class=devicewidthinner] {width: 260px!important;text-align:center!important;} img[class=banner] {width: 280px!important;height:140px!important;} img[class=colimg2] {width: 280px!important;height:140px!important;} td[class=mobile-hide]{display:none!important;} td[class='padding-bottom25']{padding-bottom:25px!important;} } u { border-bottom: 1px dotted #febb13; text-decoration: none; } .myBgColor{ background:" + Bgcolor + "; } </style> </head> <body> <!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='banner'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid;background:#fff;'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;color:#fff;paddimg:10px;'> <td width='30%' align='left' style='padding: 10px;'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='' border='0' width='100%' style='display:block; border:none; outline:none; text-decoration:none;'> </td> <td width='70%' align='center' style='padding: 10px;border-left: dotted 1px #000;'> <h3 style='padding: 0px;'>Ticket Booking ID : " + tokenNumbertoSms + "</h3></td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- Start of seperator --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <!--Start of ticket --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='preheader' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr width='100%' > <td width='100%' > <table width='550' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;;color:#fff;paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'>" + exhibitionNames + " " + data + "" + discountEmail + "<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start Full Text --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='full-text'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td> <table width='550' align='center' cellpadding='0' cellspacing='0' border='0' class='devicewidthinner' style='border: 1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Title --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 30px; color: #333333; text-align:center; line-height: 50px;' st-title='fulltext-heading'> Your Ticket Confirmation </td> </tr> <!-- End of Title --> <!-- spacing --> <tr> <td width='100%' height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- End of spacing --> <!-- content --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 16px; color: #666666; text-align:center; line-height: 30px;' st-content='fulltext-content'> <span>You have received this email from <a href='http://www.gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </td> </tr> <!-- End of content --> </tbody> </table> </td> </tr> <!-- Spacing --> <tr> <td height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- end of full text --><!-- Start of Postfooter --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='postfooter' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth'> <tbody> <tr> <td align='center' valign='middle' style='font-family: Helvetica, arial, sans-serif; font-size: 14px;color: #666666' st-content='postfooter'> Best regards, GS Marketing Team © 2017 GS Marketing - All Rights Reserved </td> </tr> <!-- Spacing --> <tr> <td width='100%' height='20'></td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of postfooter --><!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> </body></html>";


                    string subject = "E-Ticket," + eventDetails.Name + " " + venue;
                    GeneratePDFandMailasAttachMent(htmlPagemail, eventTicket.Id.ToString(), subject, eventTicket.Visitor);

                    response.Content = new StringContent(htmlPage);
                    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                }
                else
                {
                    eventTicket.PaymentCompleted = false;

                    var organizerHomepage = ConfigurationManager.AppSettings["Organizer.HomeUrl"];
                    var retval = string.Format("<div class='row' style='padding-top:5px;padding-bottom:10px;border-color:#febb13'> <div class='col-lg-3'></div> <div class='col-lg-6' style='color:#000;background-color:#febb13;margin:5px;text-align:center;border:2px solid transparent;border-radius:4px;border-color:#000'> <div class='row'> <center style='font-size:16px;font-weight:700;padding:10px;color:#000000'><img src='http://gsmktg.com/imagesTicket/warning.png' style='width:100px;height:100px'></center> </div> <div class='row' style='justify-content:center'> <center style='font-size:26px;font-weight:700;padding:10px'>Oops Transaction Failed!</center> </div> </br> <div class='row'> <center> Sorry, Your ticket booking could not be processed, since payment is declined by your bank due to one of the following reasons: </center> </br> <center style='width:300px;margin:0 auto'> <ul style='list-style-type:disc'> <li>Inaccurate card/account details entered.</li> </br> <li>Insufficient Balance in your account.</li> </br> <li>Due to some technical problem.</li> </br> </br> </ul> </center> <center>Please check your bank account before initiating another transaction.</center> </div> </br> <div class='row' style='background-color:#000000;padding:5px;text-align:center'> <br> <div class='row'> <center style='font-size:18px;font-weight:bold;padding:10px;color:#FFFFFF'>Transaction ID : {0} </center> </div> <div class='row'> <center style='font-size:18px;font-weight:bold;padding:10px;color:#FFFFFF'><b>Transaction Status : {1}</b></center> </div><br><a class='btn' style='background-color:#febb13' href='http://gsmktg.com/web-ticket/#/bookticket'>Book Ticket Again</a></div> </div> </div>", citrustransactionId, status);
                    string htmlPage = "<!DOCTYPE html><!--[if IE 7]><html class='ie ie7' lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><![endif]--><!--[if IE 8]><html class='ie ie8' lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><![endif]--><!--[if !(IE 7) & !(IE 8)]><!--><html lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><!--<![endif]--><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width'> <link rel='profile' href='http://gmpg.org/xfn/11'> <link rel='pingback' href='http://gsmktg.com/xmlrpc.php'> <!--[if lt IE 9]> <script src='http://gsmktg.com/wp-content/themes/eventiz/js/html5.js'></script> <![endif]--> <title>Visitor Lounge &#8211; Best Exhibition In India | GS Marketing</title><link rel='alternate' type='application/rss+xml' title='Best Exhibition In India | GS Marketing &raquo; Feed' href='http://gsmktg.com/feed/' /><link rel='alternate' type='application/rss+xml' title='Best Exhibition In India | GS Marketing &raquo; Comments Feed' href='http://gsmktg.com/comments/feed/' /><script type='text/javascript'>window._wpemojiSettings = {'baseUrl':'https://s.w.org/images/core/emoji/72x72/','ext':'.png','source':{'concatemoji':'http://gsmktg.com/wp/wp-includes/js/wp-emoji-release.min.js?ver=4.5.4'}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement('canvas'),g=f.getContext&&f.getContext('2d'),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline='top',g.font='600 32px Arial',a){case'flag':return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case'diversity':return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+','+c[1]+','+c[2]+','+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+','+c[1]+','+c[2]+','+c[3],d!==e;case'simple':return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case'unicode8':return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement('script');c.src=a,c.type='text/javascript',b.getElementsByTagName('head')[0].appendChild(c)}var f,g,h,i;for(i=Array('simple','flag','unicode8','diversity'),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],'flag'!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener('DOMContentLoaded',g,!1),a.addEventListener('load',g,!1)):(a.attachEvent('onload',g),b.attachEvent('onreadystatechange',function(){'complete'===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script><style type='text/css'>img.wp-smiley,img.emoji {display: inline !important;border: none !important;box-shadow: none !important;height: 1em !important;width: 1em !important;margin: 0 .07em !important;vertical-align: -0.1em !important;background: none !important;padding: 0 !important;}</style><link rel='stylesheet' href='http://www.w3schools.com/lib/w3.css'><link rel='stylesheet' id='jquery-ui-css-css' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='wpsm_ac-sh-font-awesome-front-css' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type='text/css' media='all' /><!--<link rel='stylesheet' id='wpsm_ac-sh-font-awesome-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/font-awesome/css/font-awesome.min.css?ver=4.5.4' type='text/css' media='all' />--><link rel='stylesheet' id='wpsm_ac-sh_bootstrap-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/bootstrap-front.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='jquery-ui-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/jquery-ui.min.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themes.style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.Tabs.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themesTabs.style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='font-awesome-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/bower/font-awesome/css/font-awesome.min.css?ver=4.11.2.1' type='text/css' media='all' /><link rel='stylesheet' id='contact-form-7-css' href='http://gsmktg.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.4.2' type='text/css' media='all' /><link rel='stylesheet' id='ewd-feup-style-css' href='http://gsmktg.com/wp-content/plugins/front-end-only-users/css/feu-styles.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='feup-yahoo-pure-css-css' href='http://gsmktg.com/wp-content/plugins/front-end-only-users/css/feup-pure.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='rs-plugin-settings-css' href='http://gsmktg.com/wp-content/plugins/revslider/public/assets/css/settings.css?ver=5.2.5.3' type='text/css' media='all' /><style id='rs-plugin-settings-inline-css' type='text/css'>#rs-demo-id {}</style><link rel='stylesheet' id='woocommerce-layout-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce-layout.css?ver=2.6.1' type='text/css' media='all' /><link rel='stylesheet' id='woocommerce-smallscreen-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce-smallscreen.css?ver=2.6.1' type='text/css' media='only screen and (max-width: 768px)' /><link rel='stylesheet' id='woocommerce-general-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce.css?ver=2.6.1' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-google-fonts-css' href='http://fonts.googleapis.com/css?family=Playfair%2BDisplay%3A400%2C400italic%2C700italic%2C700%7CUbuntu%3A400%2C300%2C500%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-style-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='prettyPhoto-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/prettyPhoto.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='js_composer_front-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/js_composer.min.css?ver=4.11.2.1' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-woocommerce-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/woocommerce.css?ver=1.0' type='text/css' media='all' /><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script><script>jQueryWP = jQuery;</script><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script><script type='text/javascript'>/* <![CDATA[ */var ewd_feup_ajax_translations = {'mismatch_label':'Mismatch','too_short_label':'Too Short','weak_label':'Weak','good_label':'Good','strong_label':'Strong'};/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/front-end-only-users//js/ewd-feup-check-password-strength.js?ver=4.5.4'></script><script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true&#038;ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/opalsingleevent//assets/gmap3.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/revslider/public/assets/js/jquery.themepunch.tools.min.js?ver=5.2.5.3'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/revslider/public/assets/js/jquery.themepunch.revolution.min.js?ver=5.2.5.3'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/bootstrap.min.js?ver=20130402'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/jquery.prettyPhoto.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/wp-charts/js/Chart.min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/pbrthemer/assets/js/elevatezoom/elevatezoom-min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/easy-logo-slider/js/jquery.jcarousel.min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/easy-logo-slider/js/jcarousel.responsive.js?ver=4.5.4'></script><link rel='https://api.w.org/' href='http://gsmktg.com/wp-json/' /><link rel='EditURI' type='application/rsd+xml' title='RSD' href='http://gsmktg.com/xmlrpc.php?rsd' /><link rel='wlwmanifest' type='application/wlwmanifest+xml' href='http://gsmktg.com/wp-includes/wlwmanifest.xml' /> <meta name='generator' content='WordPress 4.5.4' /><meta name='generator' content='WooCommerce 2.6.1' /><link rel='canonical' href='http://gsmktg.com/reason-for-visiting/' /><link rel='shortlink' href='http://gsmktg.com/?p=10408' /><link rel='alternate' type='application/json+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F' /><link rel='alternate' type='text/xml+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F&#038;format=xml' /><script>var FEUP_Min_Pass = 3;</script><link id='gwfc-body-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-body-style'>body{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h1-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h1-style'>h1{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h2-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h2-style'>h2{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h3-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h3-style'>h3{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h4-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h4-style'>h4{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h5-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h5-style'>h5{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h6-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h6-style'>h6{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-blockquote-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-blockquote-style'>blockquote{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-p-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-p-style'>p{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-li-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-li-style'>li{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><style type='text/css'>.myfixed { margin:0 auto!important; float:none!important; border:0px!important; background:none!important; max-width:100%!important; }#mysticky-nav { width:100%!important; position: static;top: -100px;}.wrapfixed { position: fixed!important; top:0px!important; left: 0px!important; margin-top:0px!important; z-index: 1000000; -webkit-transition: 0.3s; -moz-transition: 0.3s; -o-transition: 0.3s; transition: 0.3s; -ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=95)'; filter: alpha(opacity=95); opacity:.95; background-color: #ffffff!important; }@media (max-width: 359px) {.wrapfixed {position: static!important; display: none!important;}}</style><meta name='generator' content='Powered by Visual Composer - drag and drop page builder for WordPress.'/><!--[if lte IE 9]><link rel='stylesheet' type='text/css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/vc_lte_ie9.min.css' media='screen'><![endif]--><!--[if IE 8]><link rel='stylesheet' type='text/css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/vc-ie8.min.css' media='screen'><![endif]--><!--[if lte IE 8]><script src='http://gsmktg.com/wp-content/plugins/wp-charts/js/excanvas.compiled.js'></script><![endif]--><style> /*wp_charts_js responsive canvas CSS override*/ .wp_charts_canvas { width:100%!important; max-width:100%; } @media screen and (max-width:480px) { div.wp-chart-wrap { width:100%!important; float: none!important;margin-left: auto!important;margin-right: auto!important;text-align: center; } } </style><style type='text/css' id='eventiz-header-css'></style><meta name='generator' content='Powered by Slider Revolution 5.2.5.3 - responsive, Mobile-Friendly Slider Plugin for WordPress with comfortable drag and drop interface.' /><style>.vc_custom_1450323409828{padding-top: 35px !important;padding-bottom: 5px !important;background-image: url(http://gsmktg.com/wp-content/uploads/2016/05/bg-newletter.jpg?id=8467) !important;}</style><style type='text/css' data-type='vc_custom-css'>.site-main{ padding-bottom: 0!important;}.sidebar-line-height{ line-height: 30px; margin-left:20px;}</style> <style> .book-ticket-button { z-index: 6; min-width: 139px; max-width: 63px; white-space: nowrap; font-size: 25px; line-height: 17px; font-weight: 527; color: rgb(12, 12, 12); font-family: Roboto; text-align: center; background-color: rgb(252, 186, 49); padding: 2px 36px; border-color: rgb(0, 0, 0); border-radius: 41px; outline: medium none; box-shadow: none; box-sizing: border-box; cursor: pointer; visibility: inherit; transition: none 0s ease 0s; font-style: normal; text-decoration: none; border-width: 0px; border-style: none; margin: 0px; letter-spacing: 0px; min-height: 40px; max-height: 40px; opacity: 1; transform: translate3d(0px, 0px, 0px); transform-origin: 50% 50% 0px;} } </style> <style type='text/css' data-type='vc_shortcodes-custom-css'>.vc_custom_1470665475652{margin-right: 4% !important;margin-left: 4% !important;}.vc_custom_1469607261759{padding-top: 4% !important;padding-right: 4% !important;}</style><noscript><style type='text/css'> .wpb_animate_when_almost_visible { opacity: 1; }</style></noscript></head><body class='page page-id-10408 page-template page-template-page-templates page-template-full-width page-template-page-templatesfull-width-php masthead-fixed singular wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive'><div id='wptime-plugin-preloader'></div><div id='page' class='hfeed site'><div class='pbr-page-inner row-offcanvas row-offcanvas-left'> <div class='topbar-mobile hidden-lg hidden-md'> <div class='active-mobile pull-left'> <button data-toggle='offcanvas' class='btn btn-offcanvas btn-toggle-canvas offcanvas' type='button'> <i class='fa fa-bars'></i> </button> </div> <div class='topbar-inner pull-left'> <div class='active-mobile search-popup pull-left'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'> <span class='fa fa-search'></span> </a> <div class='active-content dropdown-menu' role='menu'> <form role='search' method='get' class='input-group search-category' action='http://gsmktg.com/'><div class='input-group-addon search-category-container'> <div class='select'> </div></div><input name='s' maxlength='60' class='form-control search-category-input' type='text' size='20' placeholder='What do you need...'> <div class='input-group-btn'> <label class='btn btn-link btn-search'> <span class='title-search hidden'>Search</span> <input type='submit' class='fa searchsubmit' value='&#xf002;'/> </label> <input type='hidden' name='post_type' value='product'/></div></form> </div> </div> <div class='active-mobile setting-popup pull-left hidden'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'> <span class='fa fa-user'></span> </a> <div class='active-content dropdown-menu' role='menu'> </div> </div> </div> </div> <header id='pbr-masthead' class='site-header' role='banner'> <div class='container'> <div class='row'> <div class='header-main'> <div class='logo-wrapper col-lg-2 col-md-2 col-sm-12 col-xs-12 pull-left'> <div id='pbr-logo' class='logo'> <a href='http://gsmktg.com/'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='Best Exhibition In India | GS Marketing'> </a> </div> </div> <section id='pbr-mainmenu' class='pbr-mainmenu col-lg-10 col-md-10 col-sm-12 col-xs-12 pull-right'> <div> <div class='inner navbar-mega-simple pull-right'> <nav data-duration='400' class='hidden-xs hidden-sm pbr-megamenu slide animate navbar navbar-mega' role='navigation'> <button aria-expanded='true' data-target='.navbar-mega-collapse' data-toggle='collapse' type='button' class='navbar-toggle'> <span class='sr-only'>Toggle navigation</span> <span class='icon-bar'></span> <span class='icon-bar'></span> <span class='icon-bar'></span> </button> <div class='collapse navbar-collapse navbar-mega-collapse'> <ul id='primary-menu' class='nav navbar-nav megamenu'> <li id='menu-item-9869' class='dropdown menu-item-9869 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>About <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-9872' class='menu-item-9872 level-1'><a href='http://gsmktg.com/?page_id=9716'>Company Info</a></li><li id='menu-item-11324' class='menu-item-11324 level-1'><a href='http://gsmktg.com/?page_id=11295'>Our Leadership</a></li><li id='menu-item-9871' class='menu-item-9871 level-1'><a href='http://gsmktg.com/?page_id=9729'>Partners and Sponsors</a></li> </ul> </li> <li id='menu-item-9865' class='dropdown menu-item-9865 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Exhibitions <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-10601' class='menu-item-10601 level-1'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li><li id='menu-item-10892' class='menu-item-10892 level-1'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li><li id='menu-item-12018' class='menu-item-12018 level-1'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li><li id='menu-item-11229' class='menu-item-11229 level-1'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calendar</a></li> </ul> </li> <li id='menu-item-9595' class='dropdown menu-item-9595 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Locations <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-9602' class='menu-item-9602 level-1'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li><li id='menu-item-10198' class='menu-item-10198 level-1'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li><li id='menu-item-10199' class='menu-item-10199 level-1'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li><li id='menu-item-10197' class='menu-item-10197 level-1'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <!--<li id='menu-item-12847' class='menu-item-12847 level-1'><a href='#'>Delhi-NCR</a></li>--> </ul> </li> <li id='menu-item-9359' class='dropdown menu-item-9359 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Exhibitors <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-13336' class='menu-item-13336 level-1'><a href='http://gsmktg.com/exhibitor-lounge'>Exhibitor Lounge</a></li><li id='menu-item-10864' class='menu-item-10864 level-1'><a href='http://gsmktg.com/?page_id=10468'>Reason For Exhibiting</a></li><li id='menu-item-11364' class='menu-item-11364 level-1'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li><li id='menu-item-10235' class='menu-item-10235 level-1'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li><li id='menu-item-12851' class='menu-item-12851 level-1'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </li> <li id='menu-item-9873' class='dropdown menu-item-9873 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Visitors <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-12501' class='menu-item-12501 level-1'><a href='http://gsmktg.com/web-ticket/'>Visitor Lounge</a></li><li id='menu-item-10696' class='menu-item-10696 level-1'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li><li id='menu-item-13054' class='menu-item-13054 level-1'><a href='http://gsmktg.com/web-ticket/#/bookticket'>Buy Ticket</a></li><li id='menu-item-9361' class='menu-item-9361 level-1'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&amp;hl=en'>Mobile App</a></li><li id='menu-item-13071' class='menu-item-13071 level-1'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li></ul></li><li id='menu-item-13259' class='dropdown menu-item-13259 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Downloads <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-13279' class='menu-item-13279 level-1'><a href='http://gsmktg.com/?page_id=13261'>Brochure</a></li><li id='menu-item-13287' class='menu-item-13287 level-1'><a href='http://gsmktg.com/?page_id=13280'>Participant Forms</a></li></ul></li><li id='menu-item-11210' class='menu-item-11210 level-0'><a href='http://gsmktg.com/?page_id=11017'>Press</a></li><li id='menu-item-11211' class='menu-item-11211 level-0'><a href='http://gsmktg.com/?page_id=22'>Blog</a></li><li id='menu-item-10229' class='menu-item-10229 level-0'><a href='http://gsmktg.com/?page_id=10207'>Contact</a></li> </ul> </div> </nav> </div> </div> <div id='search-container' class='search-box-wrapper hidden-sm hidden-xs'> <div class='pbr-dropdow-search dropdown'> <a data-target='.bs-search-modal-lg' data-toggle='modal' class='search-focus btn dropdown-toggle dropdown-toggle-overlay'> <i class='fa fa-search'></i> </a> <div class='modal fade bs-search-modal-lg' tabindex='-1' role='dialog' aria-hidden='true'> <div class='modal-dialog modal-lg'> <div class='modal-content'> <div class='modal-header'> <button aria-label='Close' data-dismiss='modal' class='close btn btn-sm btn-primary pull-right' type='button'><span aria-hidden='true'><i class='fa fa-times'></i></span></button> <h4 id='gridSystemModalLabel' class='modal-title'>Search</h4> </div> <div class='modal-body'> <div class='toggle-overlay-container'> <div class='search-box'> <form role='search' method='get' class='searchform' action='http://gsmktg.com/'> <div class='pbr-search input-group'> <input name='s' maxlength='40' class='form-control input-large input-search' type='text' size='20' placeholder='Search...'> <span class='input-group-addon input-large btn-search'> <input type='submit' class='fa fa-search' value='&#xf002;' /> <input type='hidden' name='post_type' value='post' /> </span> </div> </form> </div> <div class='dropdown-toggle-button' data-target='.toggle-overlay-container'></div> </div> </div> </div> </div> </div> </div> </div> </section> </div> </div> </div> <div class='pbr-topcart'> <div id='cart' class='dropdown'> <div class='topcart-inner '> <a class='dropdown-toggle mini-cart' href='http://gsmktg.com/?page_id=5026' title='View your shopping cart'> <span class='text-skin cart-icon'> <i class='icon-cart2'></i> <span class='title-checkout'>Checkout</span> </span> <span class='title-cart'>My Cart </span> <span class='mini-cart-items'> 0 <em>item</em> </span> <span class='mini-cart-total'> <span class='woocommerce-Price-amount amount'><span class='woocommerce-Price-currencySymbol'><span class='currency'>&#8377;</span></span>0.00</span> </span> </a> </div> </div> </div> </header><!-- #masthead --> <section id='main' class='site-main'><section id='pbr-breadscrumb' class='pbr-breadscrumb' style='background-color:#febb13;background-image:url('http://gsmktg.com/web-ticket/images/visitors.jpg')'><div class='container'><div class='breadcrumb-inner'><div class='title-page'>Visitors Lounge</div><ol class='breadcrumb'><li><a href='http://gsmktg.com'>Home</a> &raquo;</li> <li class='active'>Visitors Lounge</li></ol></div></div></section><section id='main-container' class=' inner'><center> <!---->" + retval + "</center></section> </section> <!-- #main --> <footer id='pbr-footer ' class='site-footer pbr-footer ' role='contentinfo '> <div class='inner '> <div class='pbr-footer-profile '> <div class='wpb-container vc_row wpb_row vc_row-fluid space-0 vc_custom_1450323409828 vc_row-has-fill '> <div class='container '> <div class='row '> <div class='col-sm-12 '> <div class='vc_column-inner '> <div class='wpb_wrapper '> <div class='vc_row wpb_row vc_inner vc_row-fluid '> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>Exhibitions</h2> <div class='menu-footer-exhibitions-container'> <ul id='menu-footer-exhibitions' class='menu'> <li id='menu-item-10968' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10968'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li> <li id='menu-item-10967' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10967'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li> <li id='menu-item-12343' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12343'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li> <li id='menu-item-13186' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13186'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calender</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>Locations</h2> <div class='menu-footer-locations-container'> <ul id='menu-footer-locations' class='menu'> <li id='menu-item-10985' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10985'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li> <li id='menu-item-10987' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10987'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li> <li id='menu-item-10981' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10981'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li> <li id='menu-item-10986' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10986'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <li id='menu-item-12857' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-12857'><a href='#'>Delhi-NCR</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>For Exhibitors</h2> <div class='menu-footer-forexhibitors-container'> <ul id='menu-footer-forexhibitors' class='menu'> <li id='menu-item-10994' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10994'><a href='http://gsmktg.com/?page_id=10468'>Reason for Exhibiting</a></li> <li id='menu-item-12855' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12855'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li> <li id='menu-item-10991' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10991'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li> <li id='menu-item-13185' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13185'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>For Visitors</h2> <div class='menu-footer-forvisitors-container'> <ul id='menu-footer-forvisitors' class='menu'> <li id='menu-item-13180' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13180'><a href='http://gsmktg.com/web-ticket/#/'>Visitor Lounge</a></li> <li id='menu-item-10997' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10997'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li> <li id='menu-item-11001' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-11001'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&#038;hl=en'>Mobile App</a></li> <li id='menu-item-13080' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-13080'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class='wpb-container vc_row wpb_row vc_row-fluid '> <div class='container '> <div class='row '> <div class='col-sm-12 '> <div class='vc_column-inner '> <div class='wpb_wrapper '> <div class='wpb_raw_code wpb_content_element wpb_raw_html '> <div class='wpb_wrapper '> <div class='bo-social-icons text-center '> <a class='bo-social-outline-light radius-6x ' href='https://www.facebook.com/gsmarketingassociates/?ref=aymt_homepage_panel '><i class='fa fa-facebook '></i></a><a class='bo-social-outline-light radius-6x ' href='https://twitter.com/gsmktga '><i class='fa fa-twitter '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://plus.google.com/110788377399692549560/posts?gmbpt=true&hl=en '><i class='fa fa-google '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://www.linkedin.com/company/7961893?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A7961893%2Cidx%3A3-5-10%2CtarId%3A1464350269377%2Ctas%3AGS%20Marketing '><i class='fa fa-linkedin '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://www.instagram.com/iimtf/ '><i class='fa fa-instagram '></i></a> </div> </div> </div> <div class='wpb_text_column wpb_content_element '> <div class='wpb_wrapper '> <div class='text-center ' style='font-size: 12px; '> <p>Â© 2016 GS Marketing - All Rights Reserved</p> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </footer> <!-- #colophon --> <div id='pbr-off-canvas ' class='pbr-off-canvas sidebar-offcanvas hidden-lg hidden-md '> <div class='pbr-off-canvas-body '> <div class='offcanvas-head bg-primary '><button type='button ' class='btn btn-offcanvas btn-toggle-canvas btn-default ' data-toggle='offcanvas '><i class='fa fa-close '></i></button><span>Menu</span></div> <nav class='navbar navbar-offcanvas navbar-static ' role='navigation '> <div class='navbar-collapse navbar-offcanvas-collapse '> <ul id='main-menu-offcanvas ' class='nav navbar-nav '> <li class='dropdown menu-item-9869 level-0 '><a href='# '>About </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-9872 level-1 '><a href='http://gsmktg.com/about/companyinfo/ '>Company Info</a></li> <li class='menu-item-11324 level-1 '><a href='http://gsmktg.com/about/our-leadership/ '>Our Leadership</a></li> <li class='menu-item-9871 level-1 '><a href='http://gsmktg.com/about/sponsors/ '>Partners and Sponsors</a></li> </ul> </li> <li class='dropdown menu-item-9865 level-0 '><a href='# '>Exhibitions </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-10601 level-1 '><a href='http://gsmktg.com/india-international-mega-trade-fair-3/ '>India International Mega Trade Fair</a></li> <li class='menu-item-10892 level-1 '><a href='http://gsmktg.com/home-decor/ '>GS Home &#038; Decor</a></li> <li class='menu-item-12018 level-1 '><a href='http://gsmktg.com/gs-tourism-fair/ '>GS Tourism Fair</a></li> <li class='menu-item-11399 level-1 '><a href='http://gsmktg.com/gs-consumer-expo/ '>GS Consumer Expo</a></li> <li class='menu-item-11229 level-1 '><a href='http://gsmktg.com/schedule/ '>Schedule Calendar</a></li> </ul> </li> <li class='dropdown menu-item-9595 level-0 '><a href='# '>Locations </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-9602 level-1 '><a href='http://gsmktg.com/kolkata/ '>Kolkata</a></li> <li class='menu-item-10198 level-1 '><a href='http://gsmktg.com/visakhapatnam-2/ '>Visakhapatnam</a></li> <li class='menu-item-10199 level-1 '><a href='http://gsmktg.com/bhubaneswar-2/ '>Bhubaneswar</a></li> <li class='menu-item-10197 level-1 '><a href='http://gsmktg.com/ranchi-2/ '>Ranchi</a></li> </ul> </li> <li class='dropdown menu-item-9359 level-0 '><a href='# '>For Exhibitors </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-12470 level-1 '><a href='http://gsmktg.com/exhibitor-lounge/ '>Exhibitor Lounge</a></li> <li class='menu-item-10864 level-1 '><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/ '>Reason For Exhibiting</a></li> <li class='menu-item-11364 level-1 '><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/ '>Facts And Figures Exhibitors</a></li> <li class='menu-item-10867 level-1 '><a href='http://gsmktg.com/exhibitor/exhibition-presentation-services/ '>Exhibition Presentation Services</a></li> <li class='menu-item-10266 level-1 '><a href='http://gsmktg.com/stall-booking/ '>Stall Booking</a></li> <li class='menu-item-10235 level-1 '><a href='http://gsmktg.com/exhibitor/exhibition-manual/ '>Exhibition Manual</a></li> <li class='menu-item-12095 level-1 '><a href='http://gsmktg.com/media/ '>Exhibition Media Ads</a></li> </ul> </li> <li class='dropdown menu-item-9873 level-0 '><a href='# '>For Visitors </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-10688 level-1 '><a href='http://gsmktg.com/reason-for-visiting/ '>Reason For Visiting</a></li> <li class='menu-item-10696 level-1 '><a href='http://gsmktg.com/facts-figure-for-visitors/ '>Facts &#038; Figure Visitors</a></li> <li class='menu-item-9349 level-1 '><a href='http://gsmktg.com/visitor-ticketing/ '>Buy Tickets</a></li> <li class='menu-item-9361 level-1 '><a href='# '>Mobile App</a></li> <li class='menu-item-9350 level-1 '><a href='http://gsmktg.com/mobile-app-guide/ '>Mobile App Guide</a></li> </ul> </li> <li class='menu-item-11210 level-0 '><a href='http://gsmktg.com/press/ '>Press</a></li> <li class='menu-item-11211 level-0 '><a href='http://gsmktg.com/blog/ '>Blog</a></li> <li class='menu-item-10229 level-0 '><a href='http://gsmktg.com/contact-us/ '>Contact</a></li> <li class='menu-item-12468 level-0 '><a href='http://gsmktg.com/registration-form/ '>Register</a></li> <li class='menu-item-12469 level-0 '><a href='http://gsmktg.com/my-account/ '>Login</a></li> </ul> </div> </nav> </div> </div> </div> </div> <div class='modal fade ' id='pbr-quickview-modal ' tabindex='-1 ' role='dialog ' aria-hidden='true '> <div class='modal-dialog modal-lg '> <div class='modal-content '> <div class='modal-header '><button type='button ' class='close btn btn-close ' data-dismiss='modal ' aria-hidden='true '><i class='fa fa-times '></i></button></div> <div class='modal-body '><span class='spinner '></span></div> </div> </div> </div> <link rel='stylesheet ' id='style-admin-css ' href='http://gsmktg.com/wp-content/plugins/easy-logo-slider/css/style-admin.css?ver=4.5.3 ' type='text/css ' media='all ' /> <link rel='stylesheet ' id='prettyphoto-css ' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/prettyphoto/css/prettyPhoto.min.css?ver=4.11.2.1 ' type='text/css ' media='all ' /> <script type='text/javascript '> /* <![CDATA[ */ var _wpcf7 = { 'loaderUrl ': 'http://gsmktg.com/wp-content/plugins/contact-form-7/images/ajax-loader.gif ', 'recaptchaEmpty ': 'Please verify that you are not a robot. ', 'sending ': 'Sending ... ' }; /* ]]> */ </script> <script type='text/javascript '> /* <![CDATA[ */ var mysticky_name = { 'mysticky_string ': '.header-main ', 'mysticky_active_on_height_string ': '320 ', 'mysticky_disable_at_width_string ': '359 ' }; /* ]]>*/ </script> <script type='text/javascript ' src='http://gsmktg.com/wp-content/plugins/mystickymenu/js/mystickymenu.min.js?ver=1.0.0 '></script> <script type='text/javascript '> /* <![CDATA[ */ var wc_add_to_cart_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ', 'i18n_view_cart ': 'View Cart ', 'cart_url ': 'http://gsmktg.com/cart/ ', 'is_cart ': ' ', 'cart_redirect_after_add ': 'no ' }; /* ]]>*/ </script> <script type='text/javascript '> /* <![CDATA[ */ var woocommerce_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ' }; /* ]]> */ </script> <script type='text/javascript '> /* <![CDATA[ */ var wc_cart_fragments_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ', 'fragment_name ': 'wc_fragments ' }; /* ]]>*/ </script> <script type='text/javascript '> /* <![CDATA[ */ var eventizAjax = { 'ajaxurl ': 'http://gsmktg.com/wp-admin/admin-ajax.php ' }; /* ]]> */ </script> <script type='text/javascript ' src='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/vc_carousel/js/transition.min.js?ver=4.11.2.1 '></script> <!-- Wordpress Blocks plugin developed by RenzoJohnson.com --> <script type='text/javascript '> (function() { var request, b = document.body, c = 'className ', cs = 'customize-support ', rcs = new RegExp('(^|s+)(no-)? ' + cs + '(s+|$) '); request = true; b[c] = b[c].replace(rcs, ' '); b[c] += (window.postMessage && request ? ' ' : ' no- ') + cs; }()); </script></body></html>";
                    //var response = new HttpResponseMessage();
                    //  response.Content = new StringContent("<html><head></head><body>" + retval + "</body></html>");
                    response.Content = new StringContent(htmlPage);
                    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                }

                _eventTicketRepository.Update(eventTicket);
                _transactionRepository.Add(transactionEntity);

                unitOfWork.SaveChanges();
            }
            return response;
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <returns></returns>
        [Route("ionic/bill/{ticketId}")]
        public IHttpActionResult GetIonicBill(Guid organizerId, Guid ticketId)
        {
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Reading))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizer == null)
                    return NotFound();

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    return NotFound();

                var accessKey = ConfigurationManager.AppSettings["Citrus.AccessKey"];
                var secretKey = ConfigurationManager.AppSettings["Citrus.SecretKey"];
                var baseUrl = ConfigurationManager.AppSettings["BaseUrl"];
                var returnUrl = baseUrl + String.Format("/api/v1/organizers/{0}/citrus/ionic/return/{1}", organizerId, ticketId);
                var citrustransactionId = eventTicket.TxnIdForPaymentGateWay;

                var amount = eventTicket.TotalPriceOfTicket;     //TODO: Get it from ticket repository
                var currency = "INR";

                var clientFormPostUrl = ConfigurationManager.AppSettings["Citrus.ClientFormPostUrl"];
                var vanityUrl = "gsmarketing";

                var dataString = vanityUrl + amount + citrustransactionId + currency;
                byte[] key = Encoding.ASCII.GetBytes(secretKey);
                var hmac = new HMACSHA1(key);
                var stream = new MemoryStream(Encoding.ASCII.GetBytes(dataString));
                var signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

                return Ok(new CitrusBill()
                {
                    merchantTxnId = citrustransactionId,
                    amount = new CitrusAmount() { value = amount.ToString(), currency = currency },
                    requestSignature = signature,
                    merchantAccessKey = accessKey,
                    returnUrl = returnUrl,
                    formPostUrl = clientFormPostUrl
                });
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <param name="formData"></param>
        /// <returns></returns>
        [Route("ionic/return/{ticketId}")]
        public HttpResponseMessage PostIonicReturn(Guid organizerId, Guid ticketId, FormDataCollection formData)
        {
            var citrustransactionId = formData["TxId"];
            var status = formData["TxStatus"];
            var amount = formData["amount"];
            var pgTransactionNo = formData["pgTxnNo"];
            var issuerRefNo = formData["issuerRefNo"];
            var authIdCode = formData["authIdCode"];
            var firstName = formData["firstName"];
            var lastName = formData["lastName"];
            var pgResponseCode = formData["pgRespCode"];
            var addressZip = formData["addressZip"];
            var receivedSignature = formData["signature"];

            var textMessage = formData["TxMsg"];
            var paymentMode = formData["paymentMode"];
            var transactionDate = formData["txnDateTime"];

            bool flag = true;

            var dataString = "";

            if (citrustransactionId != null)
            {
                dataString += citrustransactionId;
            }
            if (status != null)
            {
                dataString += status;
            }
            if (amount != null)
            {
                dataString += amount;
            }
            if (pgTransactionNo != null)
            {
                dataString += pgTransactionNo;
            }
            if (issuerRefNo != null)
            {
                dataString += issuerRefNo;
            }
            if (authIdCode != null)
            {
                dataString += authIdCode;
            }
            if (firstName != null)
            {
                dataString += firstName;
            }
            if (lastName != null)
            {
                dataString += lastName;
            }
            if (pgResponseCode != null)
            {
                dataString += pgResponseCode;
            }
            if (addressZip != null)
            {
                dataString += addressZip;
            }

            var secretKey = ConfigurationManager.AppSettings["Citrus.SecretKey"];
            var key = Encoding.ASCII.GetBytes(secretKey);
            var hmac = new HMACSHA1(key);
            var stream = new MemoryStream(Encoding.ASCII.GetBytes(dataString));
            var signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

            if (receivedSignature != null && !signature.Equals(receivedSignature))
            {
                flag = false;
                throw new ValidationException("CitrusGenerated Signature and  Merchant Signature Mis-Mactch");
            }

            var response = new HttpResponseMessage();

            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Writing))
            {
                var eventTicket = _eventTicketRepository.GetById(ticketId);

                EventTicketType eventTicketType = eventTicket.EventTicketType;
                Event eventDetails = _eventRepository.GetById(eventTicketType.Event.Id);
                Venue venue = eventDetails.Venue;

                var transactionEntity = Transaction.Create(status, Double.Parse(amount),
                    pgTransactionNo, issuerRefNo, authIdCode, firstName, lastName, pgResponseCode,
                    addressZip, citrustransactionId, paymentMode, Convert.ToDateTime(transactionDate), textMessage);

                transactionEntity.EventTicket = eventTicket;

                //Gatting Ticket data to Show tickte after transaction 
                if (status.ToLower() == "success".ToLower())
                {
                    eventTicket.PaymentCompleted = true;

                    var eventExhibitionMapcriteria = new EventExhibitionMapSearchCriteria { EventId = eventDetails.Id };
                    var eventExhibitionMapsepcification = new EventExhibitionMapSpecificationForSearch(eventExhibitionMapcriteria);
                    var eventExhibitionMap = _eventExhibitionMapRepository.Find(eventExhibitionMapsepcification);

                    var visitorDiscountCouponMapCriteria = new VisitorDiscountCouponMapSearchCriteria { EventTicketId = eventTicket.Id };
                    var visitorDiscountCouponMapSpecification = new VisitorDiscountCouponMapSpecificationForSearch(visitorDiscountCouponMapCriteria);
                    var visitorDiscountCouponMap = _visitorDiscountCouponMapRepository.Find(visitorDiscountCouponMapSpecification).FirstOrDefault();

                    var totalAmount = eventTicketType.NonBusinessHrs * eventTicket.NumberOfTicket; ;
                    var discountedAmount = 0;
                    var finalAmount = 0;

                    string discountEmail = "";
                    if (visitorDiscountCouponMap != null)
                    {
                        discountedAmount = (int)Math.Round((double)((Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start of dicount --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;background:#febb13'> <tbody> <tr> <td width='50%'> <div style='height: 0;border-style: solid;border-width: 100px 120px 0 0;border-color: #1f2533 transparent transparent transparent;line-height: 0px;_border-color: #007bff #000000 #000000 #000000;_filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');width: 30%;'></div> </td> <td width='50%'> <h3>Avail {0}% Discount</h3> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of discount -->", visitorDiscountCouponMap.DiscountCoupon.Discount);
                    }
                    else
                    {
                        discountedAmount = (int)Math.Round((double)((20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start of dicount --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;background:#febb13'> <tbody> <tr> <td width='50%'> <div style='height: 0;border-style: solid;border-width: 100px 120px 0 0;border-color: #1f2533 transparent transparent transparent;line-height: 0px;_border-color: #007bff #000000 #000000 #000000;_filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');width: 30%;'></div> </td> <td width='50%'> <h3>Avail {0}% Discount</h3> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of discount -->", 20);
                    }

                    string logoImage = "";
                    string Bgcolor = "";
                    string exhibitionNames = "";

                    foreach (EventExhibitionMap singleEventExhibitionMap in eventExhibitionMap)
                    {
                        Exhibition exhibition = _exhibitionRepository.GetById(singleEventExhibitionMap.Exhibition.Id);
                        if (exhibition != null)
                        {
                            TimeSpan dayCount = eventTicket.TicketDate.Date - eventDetails.StartDate.Date;
                            if (dayCount.Days < 0)
                            {
                                string noTicket = "<html><body>" + "No Ticket Found Please try again" + "</body></html>";
                                Bgcolor = "#EAEAE7";
                            }

                            TicketColors colors = new TicketColors();
                            if (eventTicket.IsPayOnLocation == true)
                            {
                                Bgcolor = "#EAEAE7";
                            }
                            else
                            {
                                Bgcolor = colors[dayCount.Days];
                            }
                        }
                        else
                        {
                            Bgcolor = "#EAEAE7";
                        }

                        if (eventDetails.isActive && eventDetails.StartDate.Date <= eventTicket.TicketDate.Date && eventDetails.EndDate.Date >= eventTicket.TicketDate.Date)
                        {
                            var exhibitionName = exhibition.Name;
                            var BgImage = exhibition.BgImage;
                            var Logo = exhibition.Logo;

                            logoImage += string.Format("<div style='background:url({0});'><center><img src='{1}' alt='{2}' style='align-content:center; margin:auto; width:120px;'/><br><b>{3}</b></center></div>",
                                BgImage, Logo, exhibitionName, exhibitionName);
                            exhibitionNames += string.Format("<h3 style='margin-top:5px;margin-bottom:5px;color:#febb13'>{0}</h3>", exhibitionName);
                        }
                    }

                    var visitorName = eventTicket.Visitor.FirstName;
                    var tokenNumbertoSms = eventTicket.TokenNumber;
                    var mobileNo = eventTicket.Visitor.MobileNo;
                    var ticketTypeName = eventTicket.EventTicketType.Name;
                    var venueNameSMS = eventDetails.Venue.City;
                    var venueNameEmail = eventDetails.Address;
                    var ticketDate = eventTicket.TicketDate.ToString("dd-MMM-yyyy");
                    var noOfTickets = eventTicket.NumberOfTicket;
                    var exhibitionTime = eventDetails.Time;
                    var paymentType = "PAID ONLINE";
                    var paymentsMode = "Web Ticket";
                    var eventDate = eventDetails.StartDate.ToString("dd-MMM-yyyy") + " To " + eventDetails.EndDate.ToString("dd-MMM-yyyy");

                    SendSMS(paymentsMode, paymentType, tokenNumbertoSms, mobileNo, ticketTypeName, venueNameSMS, ticketDate, noOfTickets, finalAmount);

                    var retval = string.Format("<div class='row'> <div class='col-xs-2 col-md-3'> </div> <div class='col-xs-8 col-md-6' style='padding: 10px;margin-bottom:20px;margin-top:20px; justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999;'> <div style='text-align:center;'> <center> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' style='margin:5px;'> </center> </div> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <div> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Your Ticket Confirmation</span> </div> <div style='width:80%'> <span>You have received this email from <a href='http://gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </div> </div> <div class='col-xs-2 col-md-3'> </div> </div> <div class='row'> <div class='col-xs-2 col-md-3'> </div> <div class='col-xs-8 col-md-6' style=' padding:25px;margin-bottom:20px; justify - content: center; background-color:{0}; color:#000000; -moz-box-shadow: 0 0 15px #555;-webkit-box-shadow: 0 0 15px #555;box-shadow: 0 0 15px #555; '> <div class='row'> <div class='col-xs-1'> </div> <div class='col-xs-10' style='background-color:#ffffff '> <div class='row'> <center style='font-size:16px;font-weight:700;padding:10px; '>Transaction ID : {1} </center> </div> <div class='row'> <center style='font-size:18px;font-weight:bold;padding:10px; '><b>Transaction Status : {2}</b></center> </div> <div class='row'>  " + logoImage + "</div> <div class='row' style='margin: 0 auto;'> <center> <div class='col-xs-3' style='text-align:center; '>Date</div> <div class='col-xs-3' style='text-align:center; '>Time</div> <div class='col-xs-3' style='text-align:center; '>Quantity</div> </center> </div> <div class='row'> <div class='col-xs-3' style='text-align:center; '>{3}</div> <div class='col-xs-3' style='text-align:center; '>{4}</div> <div class='col-xs-3' style='text-align:center;font-size:25px; '>{5}</div> </div> <div class='row'> <center style='border: 1px solid transparent;border-color: #FEBB13; '> <h4>{6}</h4> </center> </div> <div class='row'> <center> <h2>{7}</h2> </center> </div> <div class='row'> <img src='http://gsmktg.com/web-ticket/images/ticket_shape.png' style='margin-bottom: 0px' /> </div> <div class='row' style='background-color:#febb13;padding:5px;text-align:center; '> <center style='font-size:16px;font-weight:700; '>BOOKING ID : {8}</center> <br> </div> </div> </div> </div> <div class='col-xs-2 col-md-3'> </div> </div> <div class='row'> <div class='col-xs-2 col-md-3'> </div> <div class='col-xs-8 col-md-6' style='margin-bottom:20px;justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999; '> <div style='margin:20px'> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Thank you and have a nice day</span> </div> <div style='margin:20px;text-align:left'> <ul> <center><b style='color:#000000;'>Terms And Conditions</b></center> <li>This ticket is valid for one visit on the day printed on ticket during the period of the 15th India International Mega Trade Fair (between 16th to 26th December, 2016 at Science City Ground, Kolkata).</li> </ul> </div> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0; '> <div class='row ' style='margin: 0 auto; '> <div class=' col-xs-12 col-sm-6 ' style='width:50%;text-align:center;border-right:1px dotted #febb13;min-height:50px' '> <span style='width:100%;'> Visit us at </span><br> <span style='width:100%;'> <a style='color:#070707;text-decoration:none' href=''>www.gsmktg.com</a> </span> </div> <div class='col-xs-12 col-sm-6 ' style='width:50%;text-align:center;min-height:50px '> <span style='width:100%;text-align:center;'> Customer Support </span><br> <span style='width:100%;text-align:center;'> <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> </span> </div> </div> <hr style='margin:10px;width:80%;background-color:#febb13; height: 1px; border: 0;'> <div class='row'> <span> Best regards, GS Marketing Team <br>Â© 2016 GS Marketing - All Rights Reserved </span> </div> </div> <div class='col-xs-2 col-md-3'> </div> </div> ",
                        Bgcolor, citrustransactionId, status, ticketDate, exhibitionTime, noOfTickets, venueNameEmail, paymentType, tokenNumbertoSms);
                    string htmlPage = "<!DOCTYPE html><!--[if IE 7]><html class='ie ie7' lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><![endif]--><!--[if IE 8]><html class='ie ie8' lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><![endif]--><!--[if !(IE 7) & !(IE 8)]><!--><html lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><!--<![endif]--><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width'> <link rel='profile' href='http://gmpg.org/xfn/11'> <link rel='pingback' href='http://gsmktg.com/xmlrpc.php'> <!--[if lt IE 9]> <script src='http://gsmktg.com/wp-content/themes/eventiz/js/html5.js'></script> <![endif]--> <title>Visitor Lounge &#8211; Best Exhibition In India | GS Marketing</title><link rel='alternate' type='application/rss+xml' title='Best Exhibition In India | GS Marketing &raquo; Feed' href='http://gsmktg.com/feed/' /><link rel='alternate' type='application/rss+xml' title='Best Exhibition In India | GS Marketing &raquo; Comments Feed' href='http://gsmktg.com/comments/feed/' /><script type='text/javascript'>window._wpemojiSettings = {'baseUrl':'https://s.w.org/images/core/emoji/72x72/','ext':'.png','source':{'concatemoji':'http://gsmktg.com/wp/wp-includes/js/wp-emoji-release.min.js?ver=4.5.4'}};!function(a,b,c){function d(a){var c,d,e,f=b.createElement('canvas'),g=f.getContext&&f.getContext('2d'),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline='top',g.font='600 32px Arial',a){case'flag':return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case'diversity':return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+','+c[1]+','+c[2]+','+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+','+c[1]+','+c[2]+','+c[3],d!==e;case'simple':return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case'unicode8':return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement('script');c.src=a,c.type='text/javascript',b.getElementsByTagName('head')[0].appendChild(c)}var f,g,h,i;for(i=Array('simple','flag','unicode8','diversity'),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],'flag'!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener('DOMContentLoaded',g,!1),a.addEventListener('load',g,!1)):(a.attachEvent('onload',g),b.attachEvent('onreadystatechange',function(){'complete'===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script><style type='text/css'>img.wp-smiley,img.emoji {display: inline !important;border: none !important;box-shadow: none !important;height: 1em !important;width: 1em !important;margin: 0 .07em !important;vertical-align: -0.1em !important;background: none !important;padding: 0 !important;}</style><link rel='stylesheet' href='http://www.w3schools.com/lib/w3.css'><link rel='stylesheet' id='jquery-ui-css-css' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='wpsm_ac-sh-font-awesome-front-css' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type='text/css' media='all' /><!--<link rel='stylesheet' id='wpsm_ac-sh-font-awesome-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/font-awesome/css/font-awesome.min.css?ver=4.5.4' type='text/css' media='all' />--><link rel='stylesheet' id='wpsm_ac-sh_bootstrap-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/bootstrap-front.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='jquery-ui-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/jquery-ui.min.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themes.style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.Tabs.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themesTabs.style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='font-awesome-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/bower/font-awesome/css/font-awesome.min.css?ver=4.11.2.1' type='text/css' media='all' /><link rel='stylesheet' id='contact-form-7-css' href='http://gsmktg.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.4.2' type='text/css' media='all' /><link rel='stylesheet' id='ewd-feup-style-css' href='http://gsmktg.com/wp-content/plugins/front-end-only-users/css/feu-styles.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='feup-yahoo-pure-css-css' href='http://gsmktg.com/wp-content/plugins/front-end-only-users/css/feup-pure.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='rs-plugin-settings-css' href='http://gsmktg.com/wp-content/plugins/revslider/public/assets/css/settings.css?ver=5.2.5.3' type='text/css' media='all' /><style id='rs-plugin-settings-inline-css' type='text/css'>#rs-demo-id {}</style><link rel='stylesheet' id='woocommerce-layout-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce-layout.css?ver=2.6.1' type='text/css' media='all' /><link rel='stylesheet' id='woocommerce-smallscreen-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce-smallscreen.css?ver=2.6.1' type='text/css' media='only screen and (max-width: 768px)' /><link rel='stylesheet' id='woocommerce-general-css' href='//gsmktg.com/wp-content/plugins/woocommerce/assets/css/woocommerce.css?ver=2.6.1' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-google-fonts-css' href='http://fonts.googleapis.com/css?family=Playfair%2BDisplay%3A400%2C400italic%2C700italic%2C700%7CUbuntu%3A400%2C300%2C500%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-style-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/style.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='prettyPhoto-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/prettyPhoto.css?ver=4.5.4' type='text/css' media='all' /><link rel='stylesheet' id='js_composer_front-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/js_composer.min.css?ver=4.11.2.1' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-woocommerce-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/woocommerce.css?ver=1.0' type='text/css' media='all' /><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script><script>jQueryWP = jQuery;</script><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script><script type='text/javascript'>/* <![CDATA[ */var ewd_feup_ajax_translations = {'mismatch_label':'Mismatch','too_short_label':'Too Short','weak_label':'Weak','good_label':'Good','strong_label':'Strong'};/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/front-end-only-users//js/ewd-feup-check-password-strength.js?ver=4.5.4'></script><script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true&#038;ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/opalsingleevent//assets/gmap3.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/revslider/public/assets/js/jquery.themepunch.tools.min.js?ver=5.2.5.3'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/revslider/public/assets/js/jquery.themepunch.revolution.min.js?ver=5.2.5.3'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/bootstrap.min.js?ver=20130402'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/jquery.prettyPhoto.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/wp-charts/js/Chart.min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/pbrthemer/assets/js/elevatezoom/elevatezoom-min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/easy-logo-slider/js/jquery.jcarousel.min.js?ver=4.5.4'></script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/easy-logo-slider/js/jcarousel.responsive.js?ver=4.5.4'></script><link rel='https://api.w.org/' href='http://gsmktg.com/wp-json/' /><link rel='EditURI' type='application/rsd+xml' title='RSD' href='http://gsmktg.com/xmlrpc.php?rsd' /><link rel='wlwmanifest' type='application/wlwmanifest+xml' href='http://gsmktg.com/wp-includes/wlwmanifest.xml' /> <meta name='generator' content='WordPress 4.5.4' /><meta name='generator' content='WooCommerce 2.6.1' /><link rel='canonical' href='http://gsmktg.com/reason-for-visiting/' /><link rel='shortlink' href='http://gsmktg.com/?p=10408' /><link rel='alternate' type='application/json+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F' /><link rel='alternate' type='text/xml+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F&#038;format=xml' /><script>var FEUP_Min_Pass = 3;</script><link id='gwfc-body-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-body-style'>body{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h1-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h1-style'>h1{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h2-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h2-style'>h2{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h3-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h3-style'>h3{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h4-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h4-style'>h4{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h5-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h5-style'>h5{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h6-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h6-style'>h6{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-blockquote-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-blockquote-style'>blockquote{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-p-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-p-style'>p{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-li-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-li-style'>li{font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><style type='text/css'>.myfixed { margin:0 auto!important; float:none!important; border:0px!important; background:none!important; max-width:100%!important; }#mysticky-nav { width:100%!important; position: static;top: -100px;}.wrapfixed { position: fixed!important; top:0px!important; left: 0px!important; margin-top:0px!important; z-index: 1000000; -webkit-transition: 0.3s; -moz-transition: 0.3s; -o-transition: 0.3s; transition: 0.3s; -ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=95)'; filter: alpha(opacity=95); opacity:.95; background-color: #ffffff!important; }@media (max-width: 359px) {.wrapfixed {position: static!important; display: none!important;}}</style><meta name='generator' content='Powered by Visual Composer - drag and drop page builder for WordPress.'/><!--[if lte IE 9]><link rel='stylesheet' type='text/css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/vc_lte_ie9.min.css' media='screen'><![endif]--><!--[if IE 8]><link rel='stylesheet' type='text/css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/css/vc-ie8.min.css' media='screen'><![endif]--><!--[if lte IE 8]><script src='http://gsmktg.com/wp-content/plugins/wp-charts/js/excanvas.compiled.js'></script><![endif]--><style> /*wp_charts_js responsive canvas CSS override*/ .wp_charts_canvas { width:100%!important; max-width:100%; } @media screen and (max-width:480px) { div.wp-chart-wrap { width:100%!important; float: none!important;margin-left: auto!important;margin-right: auto!important;text-align: center; } } </style><style type='text/css' id='eventiz-header-css'></style><meta name='generator' content='Powered by Slider Revolution 5.2.5.3 - responsive, Mobile-Friendly Slider Plugin for WordPress with comfortable drag and drop interface.' /><style>.vc_custom_1450323409828{padding-top: 35px !important;padding-bottom: 5px !important;background-image: url(http://gsmktg.com/wp-content/uploads/2016/05/bg-newletter.jpg?id=8467) !important;}</style><style type='text/css' data-type='vc_custom-css'>.site-main{ padding-bottom: 0!important;}.sidebar-line-height{ line-height: 30px; margin-left:20px;}</style> <style> .book-ticket-button { z-index: 6; min-width: 139px; max-width: 63px; white-space: nowrap; font-size: 25px; line-height: 17px; font-weight: 527; color: rgb(12, 12, 12); font-family: Roboto; text-align: center; background-color: rgb(252, 186, 49); padding: 2px 36px; border-color: rgb(0, 0, 0); border-radius: 41px; outline: medium none; box-shadow: none; box-sizing: border-box; cursor: pointer; visibility: inherit; transition: none 0s ease 0s; font-style: normal; text-decoration: none; border-width: 0px; border-style: none; margin: 0px; letter-spacing: 0px; min-height: 40px; max-height: 40px; opacity: 1; transform: translate3d(0px, 0px, 0px); transform-origin: 50% 50% 0px;} } </style> <style type='text/css' data-type='vc_shortcodes-custom-css'>.vc_custom_1470665475652{margin-right: 4% !important;margin-left: 4% !important;}.vc_custom_1469607261759{padding-top: 4% !important;padding-right: 4% !important;}</style><noscript><style type='text/css'> .wpb_animate_when_almost_visible { opacity: 1; }</style></noscript></head><body class='page page-id-10408 page-template page-template-page-templates page-template-full-width page-template-page-templatesfull-width-php masthead-fixed singular wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive'><div id='wptime-plugin-preloader'></div><div id='page' class='hfeed site'><div class='pbr-page-inner row-offcanvas row-offcanvas-left'> <div class='topbar-mobile hidden-lg hidden-md'> <div class='active-mobile pull-left'> <button data-toggle='offcanvas' class='btn btn-offcanvas btn-toggle-canvas offcanvas' type='button'> <i class='fa fa-bars'></i> </button> </div> <div class='topbar-inner pull-left'> <div class='active-mobile search-popup pull-left'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'> <span class='fa fa-search'></span> </a> <div class='active-content dropdown-menu' role='menu'> <form role='search' method='get' class='input-group search-category' action='http://gsmktg.com/'><div class='input-group-addon search-category-container'> <div class='select'> </div></div><input name='s' maxlength='60' class='form-control search-category-input' type='text' size='20' placeholder='What do you need...'> <div class='input-group-btn'> <label class='btn btn-link btn-search'> <span class='title-search hidden'>Search</span> <input type='submit' class='fa searchsubmit' value='&#xf002;'/> </label> <input type='hidden' name='post_type' value='product'/></div></form> </div> </div> <div class='active-mobile setting-popup pull-left hidden'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'> <span class='fa fa-user'></span> </a> <div class='active-content dropdown-menu' role='menu'> </div> </div> </div> </div> <header id='pbr-masthead' class='site-header' role='banner'> <div class='container'> <div class='row'> <div class='header-main'> <div class='logo-wrapper col-lg-2 col-md-2 col-sm-12 col-xs-12 pull-left'> <div id='pbr-logo' class='logo'> <a href='http://gsmktg.com/'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='Best Exhibition In India | GS Marketing'> </a> </div> </div> <section id='pbr-mainmenu' class='pbr-mainmenu col-lg-10 col-md-10 col-sm-12 col-xs-12 pull-right'> <div> <div class='inner navbar-mega-simple pull-right'> <nav data-duration='400' class='hidden-xs hidden-sm pbr-megamenu slide animate navbar navbar-mega' role='navigation'> <button aria-expanded='true' data-target='.navbar-mega-collapse' data-toggle='collapse' type='button' class='navbar-toggle'> <span class='sr-only'>Toggle navigation</span> <span class='icon-bar'></span> <span class='icon-bar'></span> <span class='icon-bar'></span> </button> <div class='collapse navbar-collapse navbar-mega-collapse'> <ul id='primary-menu' class='nav navbar-nav megamenu'> <li id='menu-item-9869' class='dropdown menu-item-9869 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>About <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-9872' class='menu-item-9872 level-1'><a href='http://gsmktg.com/?page_id=9716'>Company Info</a></li><li id='menu-item-11324' class='menu-item-11324 level-1'><a href='http://gsmktg.com/?page_id=11295'>Our Leadership</a></li><li id='menu-item-9871' class='menu-item-9871 level-1'><a href='http://gsmktg.com/?page_id=9729'>Partners and Sponsors</a></li> </ul> </li> <li id='menu-item-9865' class='dropdown menu-item-9865 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Exhibitions <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-10601' class='menu-item-10601 level-1'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li><li id='menu-item-10892' class='menu-item-10892 level-1'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li><li id='menu-item-12018' class='menu-item-12018 level-1'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li><li id='menu-item-11229' class='menu-item-11229 level-1'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calendar</a></li> </ul> </li> <li id='menu-item-9595' class='dropdown menu-item-9595 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Locations <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-9602' class='menu-item-9602 level-1'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li><li id='menu-item-10198' class='menu-item-10198 level-1'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li><li id='menu-item-10199' class='menu-item-10199 level-1'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li><li id='menu-item-10197' class='menu-item-10197 level-1'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <!--<li id='menu-item-12847' class='menu-item-12847 level-1'><a href='#'>Delhi-NCR</a></li>--> </ul> </li> <li id='menu-item-9359' class='dropdown menu-item-9359 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Exhibitors <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-13336' class='menu-item-13336 level-1'><a href='http://gsmktg.com/exhibitor-lounge'>Exhibitor Lounge</a></li><li id='menu-item-10864' class='menu-item-10864 level-1'><a href='http://gsmktg.com/?page_id=10468'>Reason For Exhibiting</a></li><li id='menu-item-11364' class='menu-item-11364 level-1'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li><li id='menu-item-10235' class='menu-item-10235 level-1'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li><li id='menu-item-12851' class='menu-item-12851 level-1'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </li> <li id='menu-item-9873' class='dropdown menu-item-9873 level-0'> <a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Visitors <b class='caret'></b></a> <ul class='dropdown-menu'><li id='menu-item-12501' class='menu-item-12501 level-1'><a href='http://gsmktg.com/web-ticket/'>Visitor Lounge</a></li><li id='menu-item-10696' class='menu-item-10696 level-1'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li><li id='menu-item-13054' class='menu-item-13054 level-1'><a href='http://gsmktg.com/web-ticket/#/bookticket'>Buy Ticket</a></li><li id='menu-item-9361' class='menu-item-9361 level-1'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&amp;hl=en'>Mobile App</a></li><li id='menu-item-13071' class='menu-item-13071 level-1'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li></ul></li><li id='menu-item-13259' class='dropdown menu-item-13259 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Downloads <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-13279' class='menu-item-13279 level-1'><a href='http://gsmktg.com/?page_id=13261'>Brochure</a></li><li id='menu-item-13287' class='menu-item-13287 level-1'><a href='http://gsmktg.com/?page_id=13280'>Participant Forms</a></li></ul></li><li id='menu-item-11210' class='menu-item-11210 level-0'><a href='http://gsmktg.com/?page_id=11017'>Press</a></li><li id='menu-item-11211' class='menu-item-11211 level-0'><a href='http://gsmktg.com/?page_id=22'>Blog</a></li><li id='menu-item-10229' class='menu-item-10229 level-0'><a href='http://gsmktg.com/?page_id=10207'>Contact</a></li> </ul> </div> </nav> </div> </div> <div id='search-container' class='search-box-wrapper hidden-sm hidden-xs'> <div class='pbr-dropdow-search dropdown'> <a data-target='.bs-search-modal-lg' data-toggle='modal' class='search-focus btn dropdown-toggle dropdown-toggle-overlay'> <i class='fa fa-search'></i> </a> <div class='modal fade bs-search-modal-lg' tabindex='-1' role='dialog' aria-hidden='true'> <div class='modal-dialog modal-lg'> <div class='modal-content'> <div class='modal-header'> <button aria-label='Close' data-dismiss='modal' class='close btn btn-sm btn-primary pull-right' type='button'><span aria-hidden='true'><i class='fa fa-times'></i></span></button> <h4 id='gridSystemModalLabel' class='modal-title'>Search</h4> </div> <div class='modal-body'> <div class='toggle-overlay-container'> <div class='search-box'> <form role='search' method='get' class='searchform' action='http://gsmktg.com/'> <div class='pbr-search input-group'> <input name='s' maxlength='40' class='form-control input-large input-search' type='text' size='20' placeholder='Search...'> <span class='input-group-addon input-large btn-search'> <input type='submit' class='fa fa-search' value='&#xf002;' /> <input type='hidden' name='post_type' value='post' /> </span> </div> </form> </div> <div class='dropdown-toggle-button' data-target='.toggle-overlay-container'></div> </div> </div> </div> </div> </div> </div> </div> </section> </div> </div> </div> <div class='pbr-topcart'> <div id='cart' class='dropdown'> <div class='topcart-inner '> <a class='dropdown-toggle mini-cart' href='http://gsmktg.com/?page_id=5026' title='View your shopping cart'> <span class='text-skin cart-icon'> <i class='icon-cart2'></i> <span class='title-checkout'>Checkout</span> </span> <span class='title-cart'>My Cart </span> <span class='mini-cart-items'> 0 <em>item</em> </span> <span class='mini-cart-total'> <span class='woocommerce-Price-amount amount'><span class='woocommerce-Price-currencySymbol'><span class='currency'>&#8377;</span></span>0.00</span> </span> </a> </div> </div> </div> </header><!-- #masthead --> <section id='main' class='site-main'><section id='pbr-breadscrumb' class='pbr-breadscrumb' style='background-color:#febb13;background-image:url('http://gsmktg.com/web-ticket/images/visitors.jpg')'><div class='container'><div class='breadcrumb-inner'><div class='title-page'>Visitors Lounge</div><ol class='breadcrumb'><li><a href='http://gsmktg.com'>Home</a> &raquo;</li> <li class='active'>Visitors Lounge</li></ol></div></div></section><section id='main-container' class=' inner'><center> <!---->" + retval + "</center></section> </section> <!-- #main --> <footer id='pbr-footer ' class='site-footer pbr-footer ' role='contentinfo '> <div class='inner '> <div class='pbr-footer-profile '> <div class='wpb-container vc_row wpb_row vc_row-fluid space-0 vc_custom_1450323409828 vc_row-has-fill '> <div class='container '> <div class='row '> <div class='col-sm-12 '> <div class='vc_column-inner '> <div class='wpb_wrapper '> <div class='vc_row wpb_row vc_inner vc_row-fluid '> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>Exhibitions</h2> <div class='menu-footer-exhibitions-container'> <ul id='menu-footer-exhibitions' class='menu'> <li id='menu-item-10968' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10968'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li> <li id='menu-item-10967' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10967'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li> <li id='menu-item-12343' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12343'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li> <li id='menu-item-13186' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13186'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calender</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>Locations</h2> <div class='menu-footer-locations-container'> <ul id='menu-footer-locations' class='menu'> <li id='menu-item-10985' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10985'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li> <li id='menu-item-10987' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10987'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li> <li id='menu-item-10981' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10981'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li> <li id='menu-item-10986' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10986'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <li id='menu-item-12857' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-12857'><a href='#'>Delhi-NCR</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>For Exhibitors</h2> <div class='menu-footer-forexhibitors-container'> <ul id='menu-footer-forexhibitors' class='menu'> <li id='menu-item-10994' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10994'><a href='http://gsmktg.com/?page_id=10468'>Reason for Exhibiting</a></li> <li id='menu-item-12855' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12855'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li> <li id='menu-item-10991' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10991'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li> <li id='menu-item-13185' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13185'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </div> </div> </div> </div> </div> </div> <div class='col-sm-3'> <div class='vc_column-inner '> <div class='wpb_wrapper'> <div class='vc_wp_custommenu wpb_content_element'> <div class='widget widget_nav_menu'> <h2 class='widgettitle'>For Visitors</h2> <div class='menu-footer-forvisitors-container'> <ul id='menu-footer-forvisitors' class='menu'> <li id='menu-item-13180' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-13180'><a href='http://gsmktg.com/web-ticket/#/'>Visitor Lounge</a></li> <li id='menu-item-10997' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10997'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li> <li id='menu-item-11001' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-11001'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&#038;hl=en'>Mobile App</a></li> <li id='menu-item-13080' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-13080'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li> </ul> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class='wpb-container vc_row wpb_row vc_row-fluid '> <div class='container '> <div class='row '> <div class='col-sm-12 '> <div class='vc_column-inner '> <div class='wpb_wrapper '> <div class='wpb_raw_code wpb_content_element wpb_raw_html '> <div class='wpb_wrapper '> <div class='bo-social-icons text-center '> <a class='bo-social-outline-light radius-6x ' href='https://www.facebook.com/gsmarketingassociates/?ref=aymt_homepage_panel '><i class='fa fa-facebook '></i></a><a class='bo-social-outline-light radius-6x ' href='https://twitter.com/gsmktga '><i class='fa fa-twitter '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://plus.google.com/110788377399692549560/posts?gmbpt=true&hl=en '><i class='fa fa-google '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://www.linkedin.com/company/7961893?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A7961893%2Cidx%3A3-5-10%2CtarId%3A1464350269377%2Ctas%3AGS%20Marketing '><i class='fa fa-linkedin '></i></a> <a class='bo-social-outline-light radius-6x ' href='https://www.instagram.com/iimtf/ '><i class='fa fa-instagram '></i></a> </div> </div> </div> <div class='wpb_text_column wpb_content_element '> <div class='wpb_wrapper '> <div class='text-center ' style='font-size: 12px; '> <p>Â© 2016 GS Marketing - All Rights Reserved</p> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </footer> <!-- #colophon --> <div id='pbr-off-canvas ' class='pbr-off-canvas sidebar-offcanvas hidden-lg hidden-md '> <div class='pbr-off-canvas-body '> <div class='offcanvas-head bg-primary '><button type='button ' class='btn btn-offcanvas btn-toggle-canvas btn-default ' data-toggle='offcanvas '><i class='fa fa-close '></i></button><span>Menu</span></div> <nav class='navbar navbar-offcanvas navbar-static ' role='navigation '> <div class='navbar-collapse navbar-offcanvas-collapse '> <ul id='main-menu-offcanvas ' class='nav navbar-nav '> <li class='dropdown menu-item-9869 level-0 '><a href='# '>About </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-9872 level-1 '><a href='http://gsmktg.com/about/companyinfo/ '>Company Info</a></li> <li class='menu-item-11324 level-1 '><a href='http://gsmktg.com/about/our-leadership/ '>Our Leadership</a></li> <li class='menu-item-9871 level-1 '><a href='http://gsmktg.com/about/sponsors/ '>Partners and Sponsors</a></li> </ul> </li> <li class='dropdown menu-item-9865 level-0 '><a href='# '>Exhibitions </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-10601 level-1 '><a href='http://gsmktg.com/india-international-mega-trade-fair-3/ '>India International Mega Trade Fair</a></li> <li class='menu-item-10892 level-1 '><a href='http://gsmktg.com/home-decor/ '>GS Home &#038; Decor</a></li> <li class='menu-item-12018 level-1 '><a href='http://gsmktg.com/gs-tourism-fair/ '>GS Tourism Fair</a></li> <li class='menu-item-11399 level-1 '><a href='http://gsmktg.com/gs-consumer-expo/ '>GS Consumer Expo</a></li> <li class='menu-item-11229 level-1 '><a href='http://gsmktg.com/schedule/ '>Schedule Calendar</a></li> </ul> </li> <li class='dropdown menu-item-9595 level-0 '><a href='# '>Locations </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-9602 level-1 '><a href='http://gsmktg.com/kolkata/ '>Kolkata</a></li> <li class='menu-item-10198 level-1 '><a href='http://gsmktg.com/visakhapatnam-2/ '>Visakhapatnam</a></li> <li class='menu-item-10199 level-1 '><a href='http://gsmktg.com/bhubaneswar-2/ '>Bhubaneswar</a></li> <li class='menu-item-10197 level-1 '><a href='http://gsmktg.com/ranchi-2/ '>Ranchi</a></li> </ul> </li> <li class='dropdown menu-item-9359 level-0 '><a href='# '>For Exhibitors </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-12470 level-1 '><a href='http://gsmktg.com/exhibitor-lounge/ '>Exhibitor Lounge</a></li> <li class='menu-item-10864 level-1 '><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/ '>Reason For Exhibiting</a></li> <li class='menu-item-11364 level-1 '><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/ '>Facts And Figures Exhibitors</a></li> <li class='menu-item-10867 level-1 '><a href='http://gsmktg.com/exhibitor/exhibition-presentation-services/ '>Exhibition Presentation Services</a></li> <li class='menu-item-10266 level-1 '><a href='http://gsmktg.com/stall-booking/ '>Stall Booking</a></li> <li class='menu-item-10235 level-1 '><a href='http://gsmktg.com/exhibitor/exhibition-manual/ '>Exhibition Manual</a></li> <li class='menu-item-12095 level-1 '><a href='http://gsmktg.com/media/ '>Exhibition Media Ads</a></li> </ul> </li> <li class='dropdown menu-item-9873 level-0 '><a href='# '>For Visitors </a> <b class='caret '></b> <ul class='dropdown-menu '> <li class='menu-item-10688 level-1 '><a href='http://gsmktg.com/reason-for-visiting/ '>Reason For Visiting</a></li> <li class='menu-item-10696 level-1 '><a href='http://gsmktg.com/facts-figure-for-visitors/ '>Facts &#038; Figure Visitors</a></li> <li class='menu-item-9349 level-1 '><a href='http://gsmktg.com/visitor-ticketing/ '>Buy Tickets</a></li> <li class='menu-item-9361 level-1 '><a href='# '>Mobile App</a></li> <li class='menu-item-9350 level-1 '><a href='http://gsmktg.com/mobile-app-guide/ '>Mobile App Guide</a></li> </ul> </li> <li class='menu-item-11210 level-0 '><a href='http://gsmktg.com/press/ '>Press</a></li> <li class='menu-item-11211 level-0 '><a href='http://gsmktg.com/blog/ '>Blog</a></li> <li class='menu-item-10229 level-0 '><a href='http://gsmktg.com/contact-us/ '>Contact</a></li> <li class='menu-item-12468 level-0 '><a href='http://gsmktg.com/registration-form/ '>Register</a></li> <li class='menu-item-12469 level-0 '><a href='http://gsmktg.com/my-account/ '>Login</a></li> </ul> </div> </nav> </div> </div> </div> </div> <div class='modal fade ' id='pbr-quickview-modal ' tabindex='-1 ' role='dialog ' aria-hidden='true '> <div class='modal-dialog modal-lg '> <div class='modal-content '> <div class='modal-header '><button type='button ' class='close btn btn-close ' data-dismiss='modal ' aria-hidden='true '><i class='fa fa-times '></i></button></div> <div class='modal-body '><span class='spinner '></span></div> </div> </div> </div> <link rel='stylesheet ' id='style-admin-css ' href='http://gsmktg.com/wp-content/plugins/easy-logo-slider/css/style-admin.css?ver=4.5.3 ' type='text/css ' media='all ' /> <link rel='stylesheet ' id='prettyphoto-css ' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/prettyphoto/css/prettyPhoto.min.css?ver=4.11.2.1 ' type='text/css ' media='all ' /> <script type='text/javascript '> /* <![CDATA[ */ var _wpcf7 = { 'loaderUrl ': 'http://gsmktg.com/wp-content/plugins/contact-form-7/images/ajax-loader.gif ', 'recaptchaEmpty ': 'Please verify that you are not a robot. ', 'sending ': 'Sending ... ' }; /* ]]> */ </script> <script type='text/javascript '> /* <![CDATA[ */ var mysticky_name = { 'mysticky_string ': '.header-main ', 'mysticky_active_on_height_string ': '320 ', 'mysticky_disable_at_width_string ': '359 ' }; /* ]]>*/ </script> <script type='text/javascript ' src='http://gsmktg.com/wp-content/plugins/mystickymenu/js/mystickymenu.min.js?ver=1.0.0 '></script> <script type='text/javascript '> /* <![CDATA[ */ var wc_add_to_cart_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ', 'i18n_view_cart ': 'View Cart ', 'cart_url ': 'http://gsmktg.com/cart/ ', 'is_cart ': ' ', 'cart_redirect_after_add ': 'no ' }; /* ]]>*/ </script> <script type='text/javascript '> /* <![CDATA[ */ var woocommerce_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ' }; /* ]]> */ </script> <script type='text/javascript '> /* <![CDATA[ */ var wc_cart_fragments_params = { 'ajax_url ': '/wp-admin/admin-ajax.php ', 'wc_ajax_url ': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%% ', 'fragment_name ': 'wc_fragments ' }; /* ]]>*/ </script> <script type='text/javascript '> /* <![CDATA[ */ var eventizAjax = { 'ajaxurl ': 'http://gsmktg.com/wp-admin/admin-ajax.php ' }; /* ]]> */ </script> <script type='text/javascript ' src='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/vc_carousel/js/transition.min.js?ver=4.11.2.1 '></script> <!-- Wordpress Blocks plugin developed by RenzoJohnson.com --> <script type='text/javascript '> (function() { var request, b = document.body, c = 'className ', cs = 'customize-support ', rcs = new RegExp('(^|s+)(no-)? ' + cs + '(s+|$) '); request = true; b[c] = b[c].replace(rcs, ' '); b[c] += (window.postMessage && request ? ' ' : ' no- ') + cs; }()); </script></body></html>";
                    string htmalPDF = "<html><body>" + retval + "</body></html>";

                    //var data = string.Format("<div style='width: 50%; border: 5px solid transparent; border-radius: 4px; border-color: #FEBB13; padding:10px;margin-bottom:20px; justify - content: center; background-color:{0}; color:#000000; -moz-box-shadow: 0 0 15px #555;-webkit-box-shadow: 0 0 15px #555;box-shadow: 0 0 15px #555;'> <div style='width: 400px;background-color:#ffffff'> <table><tr>" + logoImage + " </tr> <tr> <table style='text-align:center;width: 400px;'> <tr> <th style='text-align:center;'>Date</th> <th style='text-align:center;'>Time</th> <th style='text-align:center;'>Quantity</th> </tr> <tr> <td>{1}</td> <td>{2}</td> <td style='font-size:25px;'>{3}</td> </tr> </table> </tr> <tr> <center style='border: 1px solid transparent;border-color: #FEBB13;'> <h4>{4}</h4> </center> </tr> <tr> <center> <h2>{5}</h2> </center> </tr> <tr style='border: 1px solid transparent;border-color: #FFFFFF;'> <img src='http://gsmktg.com/web-ticket/images/ticket_shape.png' width='100%' style='margin-bottom: 0px' /> </tr> <tr> <div style='background-color:#febb13;padding:5px;text-align:center;'> <br> <center style='font-size:16px;font-weight:700;'>BOOKING ID : {6}</center> <br> </div> </tr> </table> </div> </div> <div style='width: 50%;margin-bottom:20px; border: 5px solid transparent; border-radius: 4px; border-color: #FEBB13; padding:10px;justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999;'> <div style='margin:20px'> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Thank you and have a nice day</span> </div> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <div style='margin:20px;text-align:left'> <ul> <center><b style='color:#000000;'>Terms And Conditions</b></center> <li>This ticket is valid for one visit on the day printed on ticket during the period of the 15th India International Mega Trade Fair (between 16th to 26th December, 2016 at Science City Ground, Kolkata).</li> </ul> </div> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <div> <table> <tr> <td> <div style='width:100%;text-align:center;border-right:1px dotted #febb13;min-height:50px'> <span style='width:100%;'> Visit us at </span><br> <span style='width:100%;'> <a style='color:#070707;text-decoration:none' href=''>www.gsmktg.com</a> </span> </div> </td> <td> <div style='width:100%;text-align:center;padding:0px 4px;min-height:50px'> <span style='width:100%;'> Customer Support </span><br> <span style='width:100%;'> <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> </span> </div> </td> </tr> </table> <span> Best regards, GS Marketing Team <br>Â© 2016 GS Marketing - All Rights Reserved </div> </span> </div></center></html>",
                    //    Bgcolor, ticketDate, exhibitionTime, noOfTickets, venue, paymentType, tokenNumbertoSms);
                    //string htmlPagemail = "<html><center> <div style='width: 50%; border: 5px solid transparent; border-radius: 4px; border-color: #FEBB13; padding: 10px;margin-bottom:20px;margin-top:20px; justify - content: center; -moz-box-shadow: 0 0 5px #999;-webkit-box-shadow: 0 0 5px #999;box-shadow: 0 0 5px #999;'> <div style='text-align:center;width: 400px;'> <center> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' style='margin:5px;'> </center> </div> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <div> <span style='font-size: 200%;color: #000000;font-weight: bold;'>Your Ticket Confirmation</span> </div> <div style='width:80%'> <span>You have received this email from <a href='http://gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;px;background-color:#febb13; height: 1px; border: 0;width:80%'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </div> </div>" + data;

                    var data = string.Format("<h5 style='margin-top:5px;margin-bottom:5px;'>{0}</h5> <b style='margin-top:5px;margin-bottom:5px;'>{1}</b>&nbsp;&nbsp; | &nbsp;&nbsp;<u>{2}</u> </td> <td width='30%' align='center' style='padding: 10px;border-left: dotted 1px;'> <h4 style='font-weight:bolder;'>{3}</h4> <img src='http://gsmktg.com/mobile_images/ticket_icon.png' style='width:30%;height:auto;'><br> Tickets:<b>{4}</b> </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Date </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {5} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Amount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {6} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Quantity </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {7} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Discount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {8} </td> </tr> <tr width='100%' style='paddimg:10px;border-top: #D0CEC7 solid 1px;'> <td width='70%' align='left' style='padding: 10px;'> <b>Total Amount</b> </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> <b>{9} </b> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> </td> </tr> </tbody></table><!--ticket-->",
                        eventDetails.Address, eventDate, eventDetails.Time, paymentType, noOfTickets, ticketDate, totalAmount, noOfTickets, discountedAmount, finalAmount);
                    string htmlPagemail = "<html xmlns='http://www.w3.org/1999/xhtml'> <head> <meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> <meta name='viewport' content='width=device-width, initial-scale=1.0'/> <title>Ticket</title> <style type='text/css'> /* Client-specific Styles */ #outlook a {padding:0;} /* Force Outlook to provide a 'view in browser' menu link. */ body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;font-family: Helvetica, arial, sans-serif;} /* Prevent Webkit and Windows Mobile platforms from changing default font sizes, while not breaking desktop design. */ .ExternalClass {width:100%;} /* Force Hotmail to display emails at full width */ .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Force Hotmail to display normal line spacing.*/ #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;} img {outline:none; text-decoration:none;border:none; -ms-interpolation-mode: bicubic;} a img {border:none;} .image_fix {display:block;} p {margin: 0px 0px !important;} table td {border-collapse: collapse;} table { border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; } a {color: #0a8cce;text-decoration: none;text-decoration:none!important;} /*STYLES*/ table[class=full] { width: 100%; clear: both; } /*IPAD STYLES*/ @media only screen and (max-width: 640px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 440px!important;text-align:center!important;} table[class=devicewidthinner] {width: 420px!important;text-align:center!important;} img[class=banner] {width: 440px!important;height:220px!important;} img[class=colimg2] {width: 440px!important;height:220px!important;} } /*IPHONE STYLES*/ @media only screen and (max-width: 480px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 280px!important;text-align:center!important;} table[class=devicewidthinner] {width: 260px!important;text-align:center!important;} img[class=banner] {width: 280px!important;height:140px!important;} img[class=colimg2] {width: 280px!important;height:140px!important;} td[class=mobile-hide]{display:none!important;} td[class='padding-bottom25']{padding-bottom:25px!important;} } u { border-bottom: 1px dotted #febb13; text-decoration: none; } .myBgColor{ background:" + Bgcolor + "; } </style> </head> <body> <!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='banner'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid;background:#fff;'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;color:#fff;paddimg:10px;'> <td width='30%' align='left' style='padding: 10px;'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='' border='0' width='100%' style='display:block; border:none; outline:none; text-decoration:none;'> </td> <td width='70%' align='center' style='padding: 10px;border-left: dotted 1px #000;'> <h3 style='padding: 0px;'>Ticket Booking ID : " + tokenNumbertoSms + "</h3></td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- Start of seperator --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <!--Start of ticket --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='preheader' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr width='100%' > <td width='100%' > <table width='550' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;;color:#fff;paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'>" + exhibitionNames + " " + data + "" + discountEmail + "<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start Full Text --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='full-text'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td> <table width='550' align='center' cellpadding='0' cellspacing='0' border='0' class='devicewidthinner' style='border: 1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Title --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 30px; color: #333333; text-align:center; line-height: 50px;' st-title='fulltext-heading'> Your Ticket Confirmation </td> </tr> <!-- End of Title --> <!-- spacing --> <tr> <td width='100%' height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- End of spacing --> <!-- content --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 16px; color: #666666; text-align:center; line-height: 30px;' st-content='fulltext-content'> <span>You have received this email from <a href='http://www.gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </td> </tr> <!-- End of content --> </tbody> </table> </td> </tr> <!-- Spacing --> <tr> <td height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- end of full text --><!-- Start of Postfooter --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='postfooter' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth'> <tbody> <tr> <td align='center' valign='middle' style='font-family: Helvetica, arial, sans-serif; font-size: 14px;color: #666666' st-content='postfooter'> Best regards, GS Marketing Team © 2017 GS Marketing - All Rights Reserved </td> </tr> <!-- Spacing --> <tr> <td width='100%' height='20'></td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of postfooter --><!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> </body></html>";


                    string subject = "E-Ticket," + eventDetails.Name + " " + venue;
                    GeneratePDFandMailasAttachMent(htmlPagemail, eventTicket.Id.ToString(), subject, eventTicket.Visitor);

                    response.Content = new StringContent(htmlPage);
                    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                }
                else
                {
                    eventTicket.PaymentCompleted = false;

                    var organizerHomepage = ConfigurationManager.AppSettings["Organizer.HomeUrl"];
                    var retval = string.Format("<div class='card' style='text-align: center'> <img src='http://gsmktg.com/imagesTicket/warning.png' style='width:300px;height:300px;' alt='Failed'> <h4>Oops Transaction Failed!</h4> <hr> <h5>Sorry, Your ticket booking could not be processed, since payment is declined by your bank due to one of the following reasons:</h5> <ul style='display: inline-block; text-align: left;'> <li>Inaccurate card/account details entered.</li> <li>Insufficient Balance in your account.</li> <li>Due to some technical problem.</li> </ul> <hr> <i>Please check your bank account before initiating another transaction.</i> <div style='background: #000;color: #fff;font-size: 30px;padding-bottom: 20px;'> <h4 style='color: #fff;'>Transaction ID : {0}</h4> <h4 style='color: #fff;'>Transaction Status : {1}</h4> <a href='/failed'><button class='button' style='background: #febb13;' >Book Ticket Again</button></a> </div> </div>", citrustransactionId, status);
                   string htmlPage = "<html> <head> <title>India International Mega Trade Fair</title><style> .card { position: relative; margin: .5rem 0 1rem 0; background-color: #fff; transition: box-shadow .25s, -webkit-box-shadow .25s; border-radius: 2px; margin: 10px; background: #febb13; } .button { display: inline-block; padding: 6px 12px; margin-bottom: 0; font-size: 30px; font-weight: 400; line-height: 1.42857143; text-align: center; white-space: nowrap; vertical-align: middle; touch-action: manipulation; cursor: pointer; } </style> </head><body style='width:100%;font-size: 40px;'>" + retval+ "</body> </html>";
                    //var response = new HttpResponseMessage();
                    //  response.Content = new StringContent("<html><head></head><body>" + retval + "</body></html>");
                    response.Content = new StringContent(htmlPage);
                    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                }
                _eventTicketRepository.Update(eventTicket);
                _transactionRepository.Add(transactionEntity);

                unitOfWork.SaveChanges();
            }
            return response;
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="paymentId"></param>
        /// <returns></returns>
        [Route("stalls/bill/{paymentId}")]
        public IHttpActionResult GetStallBill(Guid organizerId, Guid paymentId)
        {
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Reading))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizer == null)
                    return NotFound();

                var payment = _paymentRepository.GetById(paymentId);
                if (payment == null)
                    return NotFound();

                var accessKey = ConfigurationManager.AppSettings["Citrus.AccessKey"];
                var secretKey = ConfigurationManager.AppSettings["Citrus.SecretKey"];
                var baseUrl = ConfigurationManager.AppSettings["BaseUrl"];
                var returnUrl = baseUrl + String.Format("/api/v1/organizers/{0}/citrus/stalls/return/{1}", organizerId, paymentId);
                var citrustransactionId = payment.TxnIdForPaymentGateWay;

                var amount = payment.AmountPaid;
                var currency = "INR";

                var clientFormPostUrl = ConfigurationManager.AppSettings["Citrus.ClientFormPostUrl"];
                var vanityUrl = "gsmarketing";

                var dataString = vanityUrl + amount + citrustransactionId + currency;
                byte[] key = Encoding.ASCII.GetBytes(secretKey);
                var hmac = new HMACSHA1(key);
                var stream = new MemoryStream(Encoding.ASCII.GetBytes(dataString));
                var signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

                return Ok(new CitrusBill()
                {
                    merchantTxnId = citrustransactionId,
                    amount = new CitrusAmount() { value = amount.ToString(), currency = currency },
                    requestSignature = signature,
                    merchantAccessKey = accessKey,
                    returnUrl = returnUrl,
                    formPostUrl = clientFormPostUrl
                });
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="paymentId"></param>
        /// <param name="formData"></param>
        /// <returns></returns>
        [Route("stalls/return/{paymentId}")]
        public HttpResponseMessage PostStall(Guid organizerId, Guid paymentId, FormDataCollection formData)
        {
            var citrustransactionId = formData["TxId"];
            var status = formData["TxStatus"];
            var amount = formData["amount"];
            var pgTransactionNo = formData["pgTxnNo"];
            var issuerRefNo = formData["issuerRefNo"];
            var authIdCode = formData["authIdCode"];
            var firstName = formData["firstName"];
            var lastName = formData["lastName"];
            var pgResponseCode = formData["pgRespCode"];
            var addressZip = formData["addressZip"];
            var receivedSignature = formData["signature"];

            var textMessage = formData["TxMsg"];
            var paymentMode = formData["paymentMode"];
            var transactionDate = formData["txnDateTime"];

            bool flag = true;

            var dataString = "";

            if (citrustransactionId != null)
            {
                dataString += citrustransactionId;
            }
            if (status != null)
            {
                dataString += status;
            }
            if (amount != null)
            {
                dataString += amount;
            }
            if (pgTransactionNo != null)
            {
                dataString += pgTransactionNo;
            }
            if (issuerRefNo != null)
            {
                dataString += issuerRefNo;
            }
            if (authIdCode != null)
            {
                dataString += authIdCode;
            }
            if (firstName != null)
            {
                dataString += firstName;
            }
            if (lastName != null)
            {
                dataString += lastName;
            }
            if (pgResponseCode != null)
            {
                dataString += pgResponseCode;
            }
            if (addressZip != null)
            {
                dataString += addressZip;
            }

            var secretKey = ConfigurationManager.AppSettings["Citrus.SecretKey"];
            var key = Encoding.ASCII.GetBytes(secretKey);
            var hmac = new HMACSHA1(key);
            var stream = new MemoryStream(Encoding.ASCII.GetBytes(dataString));
            var signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

            if (receivedSignature != null && !signature.Equals(receivedSignature))
            {
                flag = false;
                throw new ValidationException("CitrusGenerated Signature and  Merchant Signature Mis-Mactch");
            }
            var response = new HttpResponseMessage();
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Writing))
            {
                Payment paymentDetails = _paymentRepository.GetById(paymentId);

                StallTransaction transactionEntity = StallTransaction.Create(status, Double.Parse(amount),
                    pgTransactionNo, issuerRefNo, authIdCode, firstName, lastName, pgResponseCode,
                    addressZip, citrustransactionId, paymentMode, Convert.ToDateTime(transactionDate), textMessage);
                transactionEntity.Payment = paymentDetails;

                if (status.ToLower() == "success".ToLower())
                {
                    paymentDetails.IsPaymentDone = true;
                    Booking bookingDetails = _bookingRepository.GetById(paymentDetails.Booking.Id);

                    Exhibitor exhibitor = _exhibitorRepository.GetById(bookingDetails.Exhibitor.Id);

                    var paymentSearchCriteria = new PaymentSearchCriteria { BookingId = bookingDetails.Id };
                    var paymentSepcification = new PaymentSpecificationForSearch(paymentSearchCriteria);
                    var payments = _paymentRepository.Find(paymentSepcification);

                    var bookingStallSearchCriteria = new BookingStallSearchCriteria { BookingId = bookingDetails.Id };
                    var bookingStallSepcification = new BookingStallSpecificationForSearch(bookingStallSearchCriteria);
                    var bookingStallList = _stallBookingRepository.Find(bookingStallSepcification);

                    double totalAmountPaid = 0;

                    foreach (Payment payment in payments)
                    {
                        totalAmountPaid = totalAmountPaid + payment.AmountPaid;
                    }

                    double AlreadyPaid = totalAmountPaid - paymentDetails.AmountPaid;
                    double balance = bookingDetails.TotalAmount - totalAmountPaid;

                    var InvoiceNo = paymentDetails.InvoiceNo;
                    var AmountPaid = paymentDetails.AmountPaid;
                    var PaymentDate = paymentDetails.PaymentDate.ToString("dd-MMM-yyyy");
                    var Quantity = bookingStallList.Count();
                    var TotalAmount = bookingDetails.TotalAmount;
                    var ExhibitorName = exhibitor.Name;
                    var Address = exhibitor.Address;
                    var CompanyName = exhibitor.CompanyName;
                    string IsPayOnLocation;
                    if (paymentDetails.IsPayOnLocation)
                    {
                        IsPayOnLocation = "Pay At Location";
                    }
                    else
                    {
                        IsPayOnLocation = "Paid Online";
                    }
                    var Rate = bookingStallList.FirstOrDefault().Stall.Price;

                    var retval = string.Format("<section id='main-container' class=' inner'> <center> <!----> <div style='padding:10px;margin-bottom:10px;border:4px solid;border-color: #febb13;width:60%;color:black; '> <header> <h1>Booking Confirmation</h1> <address style='text-align:left;'><p style='font-size:150%;font-weight: bold;'>GS Marketing Associates</p> <p style='font-size:125% font-weight: bold;'>108/9, Manohar Pukur Road,</p> <p style='font-size:125% font-weight: bold;'>Kalighat,Kolkata,</p> <p style='font-size:125% font-weight: bold;'> West Bengal 700026</p></address> <span><img alt='' src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png'><input type='file' accept='image/*'></span> </header> <article> <h1>Recipient</h1> <address style='text-align:left;'> <p style='font-size:100%;margin-bottom:1px'> {0} </p><p style='font-size:100%;margin-bottom:1px'> {1} </p><p style='font-size:80%;margin-bottom:1px'> {2} </p></address> <table class='meta'> <tr> <th><span>Booking ID </span></th> <td><span> {3} </span></td> </tr> <tr> <th><span>Date</span></th> <td><span> {4} </span></td> </tr> <tr> <th><span>Amount Due</span></th> <td><span id='prefix'>Rs</span><span> {5} </span></td> </tr> </table> <table class='inventory'> <thead> <tr> <th><span>Item</span></th> <th><span>Quantity</span></th> <th><span>Rate</span></th> <th><span>Amount</span></th> </tr> </thead> <tbody> <tr> <td><span>Stalls</span></td> <td><span> {6} </span></td><td><span data-prefix>Rs</span><span> {7} </span></td><td><span data-prefix>Rs</span><span> {8} </span></td> </tr> </tbody> </table> <table style=' float: left;width: 60%;margin-bottom:5px;margin-top:40px;'> <tr> </tr> <tr> <th>Payment Mode</th> <td> {9} </td> </tr> </table> <table class='balance' style='margin-bottom:5px;'> <tr> <th><span>Total</span></th> <td><span data-prefix>Rs</span><span> {10} </span></td> </tr> <tr> <th><span>Previously Paid Amount</span></th> <td><span data-prefix>Rs</span><span> {11} </span></td> </tr> <tr> <th><span>Amount Paid</span></th> <td><span data-prefix>Rs</span><span> {12} </span></td> </tr> <tr> <th><span>Balance Due</span></th> <td><span data-prefix>Rs</span><span> {13} </span></td> </tr> </table> </article> </div> <!----> </center></section> ", ExhibitorName, CompanyName, Address, InvoiceNo, PaymentDate, balance, Quantity, Rate, TotalAmount, IsPayOnLocation, TotalAmount, AlreadyPaid, AmountPaid, balance);
                    string htmlPage = "<!DOCTYPE html><html lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><!--<![endif]--><head> <meta charset='UTF-8'> <meta name='viewport' content='width=device-width'> <link rel='profile' href='http://gmpg.org/xfn/11'> <link rel='pingback' href='http://gsmktg.com/xmlrpc.php'> <!--[if lt IE 9]><script src='http://gsmktg.com/wp-content/themes/eventiz/js/html5.js'></script><![endif]--> <title>Reason For Visiting &#8211; Best Exhibition In India | GS Marketing</title> <script type='text/javascript'> window._wpemojiSettings = { 'baseUrl': 'https://s.w.org/images/core/emoji/72x72/', 'ext': '.png', 'source': { 'concatemoji': 'http://gsmktg.com/wp-includes/js/wp-emoji-release.min.js?ver=4.5.3' } }; ! function(a, b, c) { function d(a) { var c, d, e, f = b.createElement('canvas'), g = f.getContext && f.getContext('2d'), h = String.fromCharCode; if (!g || !g.fillText) return !1; switch (g.textBaseline = 'top', g.font = '600 32px Arial', a) { case 'flag': return g.fillText(h(55356, 56806, 55356, 56826), 0, 0), f.toDataURL().length > 3e3; case 'diversity': return g.fillText(h(55356, 57221), 0, 0), c = g.getImageData(16, 16, 1, 1).data, d = c[0] + ',' + c[1] + ',' + c[2] + ',' + c[3], g.fillText(h(55356, 57221, 55356, 57343), 0, 0), c = g.getImageData(16, 16, 1, 1).data, e = c[0] + ',' + c[1] + ',' + c[2] + ',' + c[3], d !== e; case 'simple': return g.fillText(h(55357, 56835), 0, 0), 0 !== g.getImageData(16, 16, 1, 1).data[0]; case 'unicode8': return g.fillText(h(55356, 57135), 0, 0), 0 !== g.getImageData(16, 16, 1, 1).data[0] } return !1 } function e(a) { var c = b.createElement('script'); c.src = a, c.type = 'text/javascript', b.getElementsByTagName('head')[0].appendChild(c) } var f, g, h, i; for (i = Array('simple', 'flag', 'unicode8', 'diversity'), c.supports = { everything: !0, everythingExceptFlag: !0 }, h = 0; h < i.length; h++) c.supports[i[h]] = d(i[h]), c.supports.everything = c.supports.everything && c.supports[i[h]], 'flag' !== i[h] && (c.supports.everythingExceptFlag = c.supports.everythingExceptFlag && c.supports[i[h]]); c.supports.everythingExceptFlag = c.supports.everythingExceptFlag && !c.supports.flag, c.DOMReady = !1, c.readyCallback = function() { c.DOMReady = !0 }, c.supports.everything || (g = function() { c.readyCallback() }, b.addEventListener ? (b.addEventListener('DOMContentLoaded', g, !1), a.addEventListener('load', g, !1)) : (a.attachEvent('onload', g), b.attachEvent('onreadystatechange', function() { 'complete' === b.readyState && c.readyCallback() })), f = c.source || {}, f.concatemoji ? e(f.concatemoji) : f.wpemoji && f.twemoji && (e(f.twemoji), e(f.wpemoji))) }(window, document, window._wpemojiSettings); </script> <style type='text/css'> img.wp-smiley, img.emoji { display: inline !important; border: none !important; box-shadow: none !important; height: 1em !important; width: 1em !important; margin: 0 .07em !important; vertical-align: -0.1em !important; background: none !important; padding: 0 !important; } </style> <link rel='stylesheet' id='wpsm_ac-sh_bootstrap-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/bootstrap-front.css?ver=4.5.3' type='text/css' media='all' /> <link rel='stylesheet' id='accordions_style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/style.css?ver=4.5.3' type='text/css' media='all' /> <link rel='stylesheet' id='accordions_themes.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themes.style.css?ver=4.5.3' type='text/css' media='all' /> <link rel='stylesheet' id='accordions_themes.Tabs.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themesTabs.style.css?ver=4.5.3' type='text/css' media='all' /> <link rel='stylesheet' id='contact-form-7-css' href='http://gsmktg.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.4.2' type='text/css' media='all' /> <link rel='stylesheet' id='rs-plugin-settings-css' href='http://gsmktg.com/wp-content/plugins/revslider/public/assets/css/settings.css?ver=5.2.5.3' type='text/css' media='all' /> <link rel='stylesheet' href='http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css'> <style id='rs-plugin-settings-inline-css' type='text/css'> #rs-demo-id {} </style> <link rel='stylesheet' id='eventiz-google-fonts-css' href='http://fonts.googleapis.com/css?family=Playfair%2BDisplay%3A400%2C400italic%2C700italic%2C700%7CUbuntu%3A400%2C300%2C500%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /> <link rel='stylesheet' id='eventiz-style-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/style.css?ver=4.5.3' type='text/css' media='all' /> <link rel='stylesheet' id='prettyPhoto-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/prettyPhoto.css?ver=4.5.3' type='text/css' media='all' /> <script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script> <script> jQueryWP = jQuery; </script> <script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/bootstrap.min.js?ver=20130402'></script> <link rel='https://api.w.org/' href='http://gsmktg.com/wp-json/' /> <link rel='EditURI' type='application/rsd+xml' title='RSD' href='http://gsmktg.com/xmlrpc.php?rsd' /> <link rel='wlwmanifest' type='application/wlwmanifest+xml' href='http://gsmktg.com/wp-includes/wlwmanifest.xml' /> <meta name='generator' content='WordPress 4.5.3' /> <meta name='generator' content='WooCommerce 2.6.1' /> <link rel='canonical' href='http://gsmktg.com/reason-for-visiting/' /> <link rel='shortlink' href='http://gsmktg.com/?p=10408' /> <link rel='alternate' type='application/json+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F' /> <link rel='alternate' type='text/xml+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F&#038;format=xml' /> <link id='gwfc-body-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-body-style'> body { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-h1-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-h1-style'> h1 { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-h2-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-h2-style'> h2 { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-h3-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-h3-style'> h3 { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-h4-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-h4-style'> h4 { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-h5-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-h5-style'> h5 { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-h6-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-h6-style'> h6 { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-blockquote-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-blockquote-style'> blockquote { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-p-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-p-style'> p { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <link id='gwfc-li-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'> <style id='gwfc-li-style'> li { font-family: 'Roboto', sans-serif !important; font-weight: !important; font-style: normal !important; } </style> <style type='text/css'> .myfixed { margin: 0 auto !important; float: none !important; border: 0px !important; background: none !important; max-width: 100% !important; } #mysticky-nav { width: 100% !important; position: static; top: -100px; } .wrapfixed { position: fixed !important; top: 0px !important; left: 0px !important; margin-top: 0px !important; z-index: 1000000; -webkit-transition: 0.3s; -moz-transition: 0.3s; -o-transition: 0.3s; transition: 0.3s; -ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=95)'; filter: alpha(opacity=95); opacity: .95; background-color: #ffffff !important; } @media (max-width: 359px) { .wrapfixed { position: static !important; display: none !important; } } </style> <meta name='generator' content='Powered by Visual Composer - drag and drop page builder for WordPress.' /> <style> /*wp_charts_js responsive canvas CSS override*/ .wp_charts_canvas { width: 100% !important; max-width: 100%; } @media screen and (max-width:480px) { div.wp-chart-wrap { width: 100% !important; float: none !important; margin-left: auto !important; margin-right: auto !important; text-align: center; } } </style> <style type='text/css' id='eventiz-header-css'></style> <meta name='generator' content='Powered by Slider Revolution 5.2.5.3 - responsive, Mobile-Friendly Slider Plugin for WordPress with comfortable drag and drop interface.' /> <style> </style> <style type='text/css' data-type='vc_custom-css'> .site-main { padding-bottom: 0 !important; } .sidebar-line-height { line-height: 30px; margin-left: 20px; } .pbr-breadscrumb { background-image: url('http://gsmktg.com/wp-content/uploads/2016/08/exhibitorlounge.jpg'); } </style> <style type='text/css' data-type='vc_shortcodes-custom-css'> .vc_custom_1470665475652 { margin-right: 4% !important; margin-left: 4% !important; } .vc_custom_1469607261759 { padding-top: 4% !important; padding-right: 4% !important; } </style> <noscript> <style type='text/css'> .wpb_animate_when_almost_visible { opacity: 1; } </style> </noscript></head><body class='page page-id-11431 page-child parent-pageid-11504 page-template-default logged-in admin-bar no-customize-support masthead-fixed singular wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive'> <div id='wptime-plugin-preloader'></div> <div id='page' class='hfeed site'> <div class='pbr-page-inner row-offcanvas row-offcanvas-left'> <div class='topbar-mobile hidden-lg hidden-md'> <div class='active-mobile pull-left'><button data-toggle='offcanvas' class='btn btn-offcanvas btn-toggle-canvas offcanvas' type='button'><i class='fa fa-bars'></i></button></div> <div class='topbar-inner pull-left'> <div class='active-mobile search-popup pull-left'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'><span class='fa fa-search'></span></a> <div class='active-content dropdown-menu' role='menu'> <form role='search' method='get' class='input-group search-category' action='http://gsmktg.com/'> <div class='input-group-addon search-category-container'> <div class='select'></div> </div><input name='s' maxlength='60' class='form-control search-category-input' type='text' size='20' placeholder='What do you need...'> <div class='input-group-btn'><label class='btn btn-link btn-search'><span class='title-search hidden'>Search</span><input type='submit' class='fa searchsubmit' value='&#xf002;' /></label><input type='hidden' name='post_type' value='product' /></div> </form> </div> </div> <div class='active-mobile setting-popup pull-left hidden'> <a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'><span class='fa fa-user'></span></a> <div class='active-content dropdown-menu' role='menu'></div> </div> </div> </div> <header id='pbr-masthead' class='site-header' role='banner'> <div class='container'> <div class='row'> <div class='header-main'> <div class='logo-wrapper col-lg-2 col-md-2 col-sm-12 col-xs-12 pull-left'> <div id='pbr-logo' class='logo'> <a href='http://gsmktg.com/'><img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='Best Exhibition In India | GS Marketing'></a> </div> </div> <section id='pbr-mainmenu' class='pbr-mainmenu col-lg-10 col-md-10 col-sm-12 col-xs-12 pull-right'> <div> <div class='inner navbar-mega-simple pull-right'> <nav data-duration='400' class='hidden-xs hidden-sm pbr-megamenu slide animate navbar navbar-mega' role='navigation'><button aria-expanded='true' data-target='.navbar-mega-collapse' data-toggle='collapse' type='button' class='navbar-toggle'><span class='sr-only'>Toggle navigation</span><span class='icon-bar'></span><span class='icon-bar'></span><span class='icon-bar'></span></button> <div class='collapse navbar-collapse navbar-mega-collapse'> <ul id='primary-menu' class='nav navbar-nav megamenu'> <li id='menu-item-9869' class='dropdown menu-item-9869 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>About <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-9872' class='menu-item-9872 level-1'><a href='http://gsmktg.com/?page_id=9716'>Company Info</a></li> <li id='menu-item-11324' class='menu-item-11324 level-1'><a href='http://gsmktg.com/?page_id=11295'>Our Leadership</a></li> <li id='menu-item-9871' class='menu-item-9871 level-1'><a href='http://gsmktg.com/?page_id=9729'>Partners and Sponsors</a></li> </ul> </li> <li id='menu-item-9865' class='dropdown menu-item-9865 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Exhibitions <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-10601' class='menu-item-10601 level-1'><a href='http://gsmktg.com/?page_id=10316'>India International Mega Trade Fair</a></li> <li id='menu-item-10892' class='menu-item-10892 level-1'><a href='http://gsmktg.com/?page_id=10862'>Home &#038; Decor</a></li> <li id='menu-item-12018' class='menu-item-12018 level-1'><a href='http://gsmktg.com/?page_id=11946'>Tourism Fair</a></li> <li id='menu-item-11229' class='menu-item-11229 level-1'><a href='http://gsmktg.com/?page_id=8875'>Schedule Calendar</a></li> </ul> </li> <li id='menu-item-9595' class='dropdown menu-item-9595 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Locations <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-9602' class='menu-item-9602 level-1'><a href='http://gsmktg.com/?page_id=9538'>Kolkata</a></li> <li id='menu-item-10198' class='menu-item-10198 level-1'><a href='http://gsmktg.com/?page_id=10152'>Visakhapatnam</a></li> <li id='menu-item-10199' class='menu-item-10199 level-1'><a href='http://gsmktg.com/?page_id=10153'>Bhubaneswar</a></li> <li id='menu-item-10197' class='menu-item-10197 level-1'><a href='http://gsmktg.com/?page_id=10181'>Ranchi</a></li> <li id='menu-item-12847' class='menu-item-12847 level-1'><a href='#'>Delhi-NCR</a></li> </ul> </li> <li id='menu-item-9359' class='dropdown menu-item-9359 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Exhibitors <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-13336' class='menu-item-13336 level-1'><a href='http://gsmktg.com/exhibitor-lounge'>Exhibitor Lounge</a></li> <li id='menu-item-10864' class='menu-item-10864 level-1'><a href='http://gsmktg.com/?page_id=10468'>Reason For Exhibiting</a></li> <li id='menu-item-11364' class='menu-item-11364 level-1'><a href='http://gsmktg.com/?page_id=10414'>Exhibition Calendar</a></li> <li id='menu-item-10235' class='menu-item-10235 level-1'><a href='http://gsmktg.com/?page_id=9630'>Exhibition Manual</a></li> <li id='menu-item-12851' class='menu-item-12851 level-1'><a href='http://gsmktg.com/?page_id=8757'>Media Ads For Exhibition</a></li> </ul> </li> <li id='menu-item-9873' class='dropdown menu-item-9873 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Visitors <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-12501' class='menu-item-12501 level-1'><a href='http://gsmktg.com/web-ticket/'>Visitor Lounge</a></li> <li id='menu-item-10696' class='menu-item-10696 level-1'><a href='http://gsmktg.com/?page_id=10425'>Facts &#038; Figures Of Visitors</a></li> <li id='menu-item-13054' class='menu-item-13054 level-1'><a href='http://gsmktg.com/web-ticket/#/bookticket'>Buy Ticket</a></li> <li id='menu-item-9361' class='menu-item-9361 level-1'><a href='https://play.google.com/store/apps/details?id=com.swabhavtechlabs.gsmktgvisitor.ui.activity&amp;hl=en'>Mobile App</a></li> <li id='menu-item-13071' class='menu-item-13071 level-1'><a href='http://gsmktg.com/?page_id=13067'>Mobile App Guide</a></li> </ul> <li id='menu-item-13259' class='dropdown menu-item-13259 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Downloads <b class='caret'></b></a> <ul class='dropdown-menu'> <li id='menu-item-13279' class='menu-item-13279 level-1'><a href='http://gsmktg.com/?page_id=13261'>Brochure</a></li> <li id='menu-item-13287' class='menu-item-13287 level-1'><a href='http://gsmktg.com/?page_id=13280'>Participant Forms</a></li> </ul> </li> <li id='menu-item-11210' class='menu-item-11210 level-0'><a href='http://gsmktg.com/?page_id=11017'>Press</a></li> <li id='menu-item-11211' class='menu-item-11211 level-0'><a href='http://gsmktg.com/?page_id=22'>Blog</a></li> <li id='menu-item-10229' class='menu-item-10229 level-0'><a href='http://gsmktg.com/?page_id=10207'>Contact</a></li> </ul> </div> </nav> </div> </div> </section> </div> </div> </div> </header> <!-- #masthead --> <section id='main' class='site-main'><section id='pbr-breadscrumb' style='background-color: #febb12;' class='pbr-breadscrumb'><div class='container'><div class='breadcrumb-inner'><div class='title-page'>Exhibitor Lounge</div><ol class='breadcrumb'><li><a href='http://gsmktg.com'>Home</a> &raquo;</li> <li class='active'>Exhibitor Lounge</li></ol></div></div></section> <section id='main' class='site-main'> <section id='main-container' class=' inner'> <center> <!---->" + retval + "</center></section></section><!-- #main --><footer id='pbr-footer' class='site-footer pbr-footer' role='contentinfo'><div class='inner'><div class='pbr-footer-profile'><div class='wpb-container vc_row wpb_row vc_row-fluid space-0 vc_custom_1450323409828 vc_row-has-fill'><div class='container'><div class='row'><div class='col-sm-12'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_row wpb_row vc_inner vc_row-fluid'><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>Exhibitions</h2><div class='menu-footer-exhibitions-container'><ul id='menu-footer-exhibitions' class='menu'><li id='menu-item-10968' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10968'><a href='http://gsmktg.com/india-international-mega-trade-fair-3/'>India International Mega Trade Fair</a></li><li id='menu-item-10967' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10967'><a href='http://gsmktg.com/home-decor/'>GS Home &#038; Decor</a></li><li id='menu-item-12343' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12343'><a href='http://gsmktg.com/gs-tourism-fair/'>GS Tourism Fair</a></li><li id='menu-item-10962' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10962'><a href='http://gsmktg.com/gs-consumer-expo/'>GS Consumer Expo</a></li></ul></div></div></div></div></div></div><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>Locations</h2><div class='menu-footer-locations-container'><ul id='menu-footer-locations' class='menu'><li id='menu-item-10985' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10985'><a href='http://gsmktg.com/kolkata/'>Kolkata</a></li><li id='menu-item-10987' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10987'><a href='http://gsmktg.com/visakhapatnam-2/'>Visakhapatnam</a></li><li id='menu-item-10981' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10981'><a href='http://gsmktg.com/bhubaneswar-2/'>Bhubaneswar</a></li><li id='menu-item-10986' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10986'><a href='http://gsmktg.com/ranchi-2/'>Ranchi</a></li></ul></div></div></div></div></div></div><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>For Exhibitors</h2><div class='menu-footer-forexhibitors-container'><ul id='menu-footer-forexhibitors' class='menu'><li id='menu-item-10991' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10991'><a href='http://gsmktg.com/exhibitor/exhibition-manual/'>Exhibition Manual</a></li><li id='menu-item-10992' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10992'><a href='http://gsmktg.com/exhibition-presentation-services__trashed/'>Exhibition Presentation &#038; Services</a></li><li id='menu-item-10993' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10993'><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/'>Facts and Figures</a></li><li id='menu-item-10994' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10994'><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/'>Reason for Exhibiting</a></li></ul></div></div></div></div></div></div><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>For Visitors</h2><div class='menu-footer-forvisitors-container'><ul id='menu-footer-forvisitors' class='menu'><li id='menu-item-11000' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-11000'><a href='http://gsmktg.com/reason-for-visiting/'>Reason For Visiting</a></li><li id='menu-item-10997' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10997'><a href='http://gsmktg.com/facts-figure-for-visitors/'>Facts &#038; Figure Visitors</a></li><li id='menu-item-11001' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-11001'><a href='#'>Mobile App</a></li><li id='menu-item-10999' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10999'><a href='http://gsmktg.com/mobile-app-guide-2/'>Mobile App Guide</a></li></ul></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='wpb-container vc_row wpb_row vc_row-fluid'><div class='container'><div class='row'><div class='col-sm-12'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='wpb_raw_code wpb_content_element wpb_raw_html'><div class='wpb_wrapper'><div class='bo-social-icons text-center'><a class='bo-social-outline-light radius-6x' href='https://www.facebook.com/gsmarketingassociates/?ref=aymt_homepage_panel'><i class='fa fa-facebook'></i></a><a class='bo-social-outline-light radius-6x' href='https://twitter.com/gsmktga'><i class='fa fa-twitter'></i></a><a class='bo-social-outline-light radius-6x' href='https://plus.google.com/110788377399692549560/posts?gmbpt=true&hl=en'><i class='fa fa-google'></i></a><a class='bo-social-outline-light radius-6x' href='https://www.linkedin.com/company/7961893?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A7961893%2Cidx%3A3-5-10%2CtarId%3A1464350269377%2Ctas%3AGS%20Marketing'><i class='fa fa-linkedin'></i></a><a class='bo-social-outline-light radius-6x' href='https://www.instagram.com/iimtf/'><i class='fa fa-instagram'></i></a></div></div></div><div class='wpb_text_column wpb_content_element '><div class='wpb_wrapper'><div class='text-center' style='font-size: 12px;'><p>© 2016 GS Marketing - All Rights Reserved</p></div></div></div></div></div></div></div></div></div></div></div></footer><!-- #colophon --><div id='pbr-off-canvas' class='pbr-off-canvas sidebar-offcanvas hidden-lg hidden-md'><div class='pbr-off-canvas-body'><div class='offcanvas-head bg-primary'><button type='button' class='btn btn-offcanvas btn-toggle-canvas btn-default' data-toggle='offcanvas'><i class='fa fa-close'></i></button><span>Menu</span></div><nav class='navbar navbar-offcanvas navbar-static' role='navigation'><div class='navbar-collapse navbar-offcanvas-collapse'><ul id='main-menu-offcanvas' class='nav navbar-nav'><li class='dropdown menu-item-9869 level-0'><a href='#'>About </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-9872 level-1'><a href='http://gsmktg.com/about/companyinfo/'>Company Info</a></li><li class='menu-item-11324 level-1'><a href='http://gsmktg.com/about/our-leadership/'>Our Leadership</a></li><li class='menu-item-9871 level-1'><a href='http://gsmktg.com/about/sponsors/'>Partners and Sponsors</a></li></ul></li><li class='dropdown menu-item-9865 level-0'><a href='#'>Exhibitions </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-10601 level-1'><a href='http://gsmktg.com/india-international-mega-trade-fair-3/'>India International Mega Trade Fair</a></li><li class='menu-item-10892 level-1'><a href='http://gsmktg.com/home-decor/'>GS Home &#038; Decor</a></li><li class='menu-item-12018 level-1'><a href='http://gsmktg.com/gs-tourism-fair/'>GS Tourism Fair</a></li><li class='menu-item-11399 level-1'><a href='http://gsmktg.com/gs-consumer-expo/'>GS Consumer Expo</a></li><li class='menu-item-11229 level-1'><a href='http://gsmktg.com/schedule/'>Schedule Calendar</a></li></ul></li><li class='dropdown menu-item-9595 level-0'><a href='#'>Locations </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-9602 level-1'><a href='http://gsmktg.com/kolkata/'>Kolkata</a></li><li class='menu-item-10198 level-1'><a href='http://gsmktg.com/visakhapatnam-2/'>Visakhapatnam</a></li><li class='menu-item-10199 level-1'><a href='http://gsmktg.com/bhubaneswar-2/'>Bhubaneswar</a></li><li class='menu-item-10197 level-1'><a href='http://gsmktg.com/ranchi-2/'>Ranchi</a></li></ul></li><li class='dropdown menu-item-9359 level-0'><a href='#'>For Exhibitors </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-12470 level-1'><a href='http://gsmktg.com/exhibitor-lounge/'>Exhibitor Lounge</a></li><li class='menu-item-10864 level-1'><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/'>Reason For Exhibiting</a></li><li class='menu-item-11364 level-1'><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/'>Facts And Figures Exhibitors</a></li><li class='menu-item-10867 level-1'><a href='http://gsmktg.com/exhibitor/exhibition-presentation-services/'>Exhibition Presentation Services</a></li><li class='menu-item-10266 level-1'><a href='http://gsmktg.com/stall-booking/'>Stall Booking</a></li><li class='menu-item-10235 level-1'><a href='http://gsmktg.com/exhibitor/exhibition-manual/'>Exhibition Manual</a></li><li class='menu-item-12095 level-1'><a href='http://gsmktg.com/media/'>Exhibition Media Ads</a></li></ul></li><li class='dropdown menu-item-9873 level-0'><a href='#'>For Visitors </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-10688 level-1'><a href='http://gsmktg.com/reason-for-visiting/'>Reason For Visiting</a></li><li class='menu-item-10696 level-1'><a href='http://gsmktg.com/facts-figure-for-visitors/'>Facts &#038; Figure Visitors</a></li><li class='menu-item-9349 level-1'><a href='http://gsmktg.com/visitor-ticketing/'>Buy Tickets</a></li><li class='menu-item-9361 level-1'><a href='#'>Mobile App</a></li><li class='menu-item-9350 level-1'><a href='http://gsmktg.com/mobile-app-guide/'>Mobile App Guide</a></li></ul></li><li class='menu-item-11210 level-0'><a href='http://gsmktg.com/press/'>Press</a></li><li class='menu-item-11211 level-0'><a href='http://gsmktg.com/blog/'>Blog</a></li><li class='menu-item-10229 level-0'><a href='http://gsmktg.com/contact-us/'>Contact</a></li><li class='menu-item-12468 level-0'><a href='http://gsmktg.com/registration-form/'>Register</a></li><li class='menu-item-12469 level-0'><a href='http://gsmktg.com/my-account/'>Login</a></li></ul></div></nav></div></div></div></div><div class='modal fade' id='pbr-quickview-modal' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog modal-lg'><div class='modal-content'><div class='modal-header'><button type='button' class='close btn btn-close' data-dismiss='modal' aria-hidden='true'><i class='fa fa-times'></i></button></div><div class='modal-body'><span class='spinner'></span></div></div></div></div><link rel='stylesheet' id='style-admin-css' href='http://gsmktg.com/wp-content/plugins/easy-logo-slider/css/style-admin.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='prettyphoto-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/prettyphoto/css/prettyPhoto.min.css?ver=4.11.2.1' type='text/css' media='all' /><script type='text/javascript'>/* <![CDATA[ */var _wpcf7 = { 'loaderUrl': 'http://gsmktg.com/wp-content/plugins/contact-form-7/images/ajax-loader.gif', 'recaptchaEmpty': 'Please verify that you are not a robot.', 'sending': 'Sending ...' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var mysticky_name = { 'mysticky_string': '.header-main', 'mysticky_active_on_height_string': '320', 'mysticky_disable_at_width_string': '359' };/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/mystickymenu/js/mystickymenu.min.js?ver=1.0.0'></script><script type='text/javascript'>/* <![CDATA[ */var wc_add_to_cart_params = { 'ajax_url': '/wp-admin/admin-ajax.php', 'wc_ajax_url': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%%', 'i18n_view_cart': 'View Cart', 'cart_url': 'http://gsmktg.com/cart/', 'is_cart': '', 'cart_redirect_after_add': 'no' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var woocommerce_params = { 'ajax_url': '/wp-admin/admin-ajax.php', 'wc_ajax_url': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%%' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var wc_cart_fragments_params = { 'ajax_url': '/wp-admin/admin-ajax.php', 'wc_ajax_url': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%%', 'fragment_name': 'wc_fragments' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var eventizAjax = { 'ajaxurl': 'http://gsmktg.com/wp-admin/admin-ajax.php' };/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/vc_carousel/js/transition.min.js?ver=4.11.2.1'></script><!-- Wordpress Blocks plugin developed by RenzoJohnson.com --><script type='text/javascript'>(function () {var request, b = document.body, c = 'className', cs = 'customize-support', rcs = new RegExp('(^|s+)(no-)?' + cs + '(s+|$)');request = true;b[c] = b[c].replace(rcs, ' ');b[c] += (window.postMessage && request ? ' ' : ' no-') + cs;}());</script></body></html>";
                    string htmalPDF = "<html><head><style> h1 { font: bold 100% sans-serif; letter-spacing: 0.5em; text-align: center; text-transform: uppercase; } /* table */ table { font-size: 75%; table-layout: fixed; width: 100%; } table { border-collapse: separate; border-spacing: 2px; } th, td { border-width: 1px; padding: 0.5em; position: relative; text-align: left; } th, td { border-radius: 0.25em; border-style: solid; } th { background: #EEE; border-color: #BBB; } td { border-color: #DDD; } /* page */ /*html { font: 16px/1 'Open Sans', sans-serif; overflow: auto; padding: 0.5in; }html { background: #999; cursor: default; }body { box-sizing: border-box; height: 11in; margin: 0 auto; overflow: hidden; padding: 0.5in; width: 8.5in; }body { background: #FFF; border-radius: 1px; box-shadow: 0 0 1in -0.25in rgba(0, 0, 0, 0.5); }*/ /* header */ header { margin: 0 0 3em; } header:after { clear: both; content: ''; display: table; } header h1 { background: #febb13; border-radius: 0.25em; color: #FFF; margin: 0 0 1em; padding: 0.5em 0; } header address { float: left; font-size: 75%; font-style: normal; line-height: 1.25; margin: 0 1em 1em 0; } header address p { margin: 0 0 0 0; } header span, header img { display: block; float: right; } header span { margin: 0 0 1em 1em; max-height: 25%; max-width: 60%; position: relative; } header img { max-height: 100%; max-width: 100%; } header input { cursor: pointer; -ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=0)'; height: 100%; left: 0; opacity: 0; position: absolute; top: 0; width: 100%; } /* article */ article, article address, table.meta, table.inventory { margin: 0 0 0.5em; } article:after { clear: both; content: ''; display: table; } article h1 { clip: rect(0 0 0 0); } article address { float: left; font-size: 125%; font-weight: bold; } article i { clear: both; font-size: 100%; } article b { float: left; font-size: 100%; font-weight: bold; } /* table meta & balance */ table.meta, table.balance { float: right; width: 36%; } table.meta:after, table.balance:after { clear: both; content: ''; display: table; } /* table meta */ table.meta th { width: 40%; } table.meta td { width: 60%; } /* table items */ table.inventory { clear: both; width: 100%; } table.inventory th { font-weight: bold; text-align: center; } table.inventory td:nth-child(1) { width: 26%; } table.inventory td:nth-child(2) { width: 38%; } table.inventory td:nth-child(3) { text-align: right; width: 12%; } table.inventory td:nth-child(4) { text-align: right; width: 12%; } table.inventory td:nth-child(5) { text-align: right; width: 12%; } /* table balance */ table.balance th, table.balance td { width: 50%; } table.balance td { text-align: right; } /* aside */ aside h1 { border: none; border-width: 0 0 1px; margin: 0 0 1em; } aside h1 { border-color: #999; border-bottom-style: solid; } /* javascript */ tr:hover .cut { opacity: 1; }</style></head><body>" + retval + "</body></html>";

                    GeneratePDFandMailasAttachMentStall(htmalPDF, bookingDetails.Id.ToString(), exhibitor);

                    response.Content = new StringContent(htmlPage);
                    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                }
                else
                {
                    paymentDetails.IsPaymentDone = false;

                    var organizerHomepage = ConfigurationManager.AppSettings["Organizer.HomeUrl"];
                    var retval = string.Format("<div class='row' style='padding-top:5px;padding-bottom:10px;border-color:#febb13'> <div class='col-lg-3'></div> <div class='col-lg-6' style='color:#000;background-color:#febb13;margin:5px;text-align:center;border:2px solid transparent;border-radius:4px;border-color:#000'> <div class='row'> <center style='font-size:16px;font-weight:700;padding:10px;color:#000000'><img src='http://gsmktg.com/imagesTicket/warning.png' style='width:100px;height:100px'></center> </div> <div class='row' style='justify-content:center'> <center style='font-size:26px;font-weight:700;padding:10px'>Oops Transaction Failed!</center> </div> </br> <div class='row'> <center> Sorry, Your transaction could not be processed, since payment is declined by your bank due to one of the following reasons: </center> </br> <center style='width:300px;margin:0 auto'> <ul style='list-style-type:disc'> <li>Inaccurate card/account details entered.</li> </br> <li>Insufficient Balance in your account.</li> </br> <li>Due to some technical problem.</li> </br> </br> </ul> </center> <center>Please check your bank account before initiating another transaction.</center> </div> </br> <div class='row' style='background-color:#000000;padding:5px;text-align:center'> <br> <div class='row'> <center style='font-size:18px;font-weight:bold;padding:10px;color:#FFFFFF'>Transaction ID : {0} </center> </div> <div class='row'> <center style='font-size:18px;font-weight:bold;padding:10px;color:#FFFFFF'><b>Transaction Status : {1}</b></center> </div></div> </div> </div>", citrustransactionId, status);
                    string htmlPage = "<!DOCTYPE html><html lang='en-US' class='no-js spartan wp-content skin eventiz page-templates full-width' data-useragent='Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' data-spartan='wp-content skin eventiz page-templates full-width'><!--<![endif]--><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width'><link rel='profile' href='http://gmpg.org/xfn/11'><link rel='pingback' href='http://gsmktg.com/xmlrpc.php'><!--[if lt IE 9]><script src='http://gsmktg.com/wp-content/themes/eventiz/js/html5.js'></script><![endif]--><title>Reason For Visiting &#8211; Best Exhibition In India | GS Marketing</title><script type='text/javascript'>window._wpemojiSettings = { 'baseUrl': 'https://s.w.org/images/core/emoji/72x72/', 'ext': '.png', 'source': { 'concatemoji': 'http://gsmktg.com/wp-includes/js/wp-emoji-release.min.js?ver=4.5.3' } };!function (a, b, c) { function d(a) { var c, d, e, f = b.createElement('canvas'), g = f.getContext && f.getContext('2d'), h = String.fromCharCode; if (!g || !g.fillText) return !1; switch (g.textBaseline = 'top', g.font = '600 32px Arial', a) { case 'flag': return g.fillText(h(55356, 56806, 55356, 56826), 0, 0), f.toDataURL().length > 3e3; case 'diversity': return g.fillText(h(55356, 57221), 0, 0), c = g.getImageData(16, 16, 1, 1).data, d = c[0] + ',' + c[1] + ',' + c[2] + ',' + c[3], g.fillText(h(55356, 57221, 55356, 57343), 0, 0), c = g.getImageData(16, 16, 1, 1).data, e = c[0] + ',' + c[1] + ',' + c[2] + ',' + c[3], d !== e; case 'simple': return g.fillText(h(55357, 56835), 0, 0), 0 !== g.getImageData(16, 16, 1, 1).data[0]; case 'unicode8': return g.fillText(h(55356, 57135), 0, 0), 0 !== g.getImageData(16, 16, 1, 1).data[0] } return !1 } function e(a) { var c = b.createElement('script'); c.src = a, c.type = 'text/javascript', b.getElementsByTagName('head')[0].appendChild(c) } var f, g, h, i; for (i = Array('simple', 'flag', 'unicode8', 'diversity'), c.supports = { everything: !0, everythingExceptFlag: !0 }, h = 0; h < i.length; h++) c.supports[i[h]] = d(i[h]), c.supports.everything = c.supports.everything && c.supports[i[h]], 'flag' !== i[h] && (c.supports.everythingExceptFlag = c.supports.everythingExceptFlag && c.supports[i[h]]); c.supports.everythingExceptFlag = c.supports.everythingExceptFlag && !c.supports.flag, c.DOMReady = !1, c.readyCallback = function () { c.DOMReady = !0 }, c.supports.everything || (g = function () { c.readyCallback() }, b.addEventListener ? (b.addEventListener('DOMContentLoaded', g, !1), a.addEventListener('load', g, !1)) : (a.attachEvent('onload', g), b.attachEvent('onreadystatechange', function () { 'complete' === b.readyState && c.readyCallback() })), f = c.source || {}, f.concatemoji ? e(f.concatemoji) : f.wpemoji && f.twemoji && (e(f.twemoji), e(f.wpemoji))) }(window, document, window._wpemojiSettings);</script><style type='text/css'>img.wp-smiley,img.emoji {display: inline !important;border: none !important;box-shadow: none !important;height: 1em !important;width: 1em !important;margin: 0 .07em !important;vertical-align: -0.1em !important;background: none !important;padding: 0 !important;}</style><link rel='stylesheet' id='wpsm_ac-sh_bootstrap-front-css' href='http://gsmktg.com/wp-content/plugins/accordion-shortcode-and-widget/css/bootstrap-front.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='accordions_style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/frontend/css/style.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themes.style.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='accordions_themes.Tabs.style-css' href='http://gsmktg.com/wp-content/plugins/accordions/assets/global/css/themesTabs.style.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='contact-form-7-css' href='http://gsmktg.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.4.2' type='text/css' media='all' /><link rel='stylesheet' id='rs-plugin-settings-css' href='http://gsmktg.com/wp-content/plugins/revslider/public/assets/css/settings.css?ver=5.2.5.3' type='text/css' media='all' /><link rel='stylesheet' href='http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css'><style id='rs-plugin-settings-inline-css' type='text/css'>#rs-demo-id {}</style><link rel='stylesheet' id='eventiz-google-fonts-css' href='http://fonts.googleapis.com/css?family=Playfair%2BDisplay%3A400%2C400italic%2C700italic%2C700%7CUbuntu%3A400%2C300%2C500%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /><link rel='stylesheet' id='eventiz-style-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/style.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='prettyPhoto-css' href='http://gsmktg.com/wp-content/themes/eventiz/css/prettyPhoto.css?ver=4.5.3' type='text/css' media='all' /><script type='text/javascript' src='http://gsmktg.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script><script>jQueryWP = jQuery;</script><script type='text/javascript' src='http://gsmktg.com/wp-content/themes/eventiz/js/bootstrap.min.js?ver=20130402'></script><link rel='https://api.w.org/' href='http://gsmktg.com/wp-json/' /><link rel='EditURI' type='application/rsd+xml' title='RSD' href='http://gsmktg.com/xmlrpc.php?rsd' /><link rel='wlwmanifest' type='application/wlwmanifest+xml' href='http://gsmktg.com/wp-includes/wlwmanifest.xml' /><meta name='generator' content='WordPress 4.5.3' /><meta name='generator' content='WooCommerce 2.6.1' /><link rel='canonical' href='http://gsmktg.com/reason-for-visiting/' /><link rel='shortlink' href='http://gsmktg.com/?p=10408' /><link rel='alternate' type='application/json+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F' /><link rel='alternate' type='text/xml+oembed' href='http://gsmktg.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fgsmktg.com%2Fwp%2Freason-for-visiting%2F&#038;format=xml' /><link id='gwfc-body-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-body-style'>body {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h1-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h1-style'>h1 {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h2-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h2-style'>h2 {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h3-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h3-style'>h3 {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h4-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h4-style'>h4 {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h5-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h5-style'>h5 {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-h6-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-h6-style'>h6 {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-blockquote-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-blockquote-style'>blockquote {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-p-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-p-style'>p {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><link id='gwfc-li-font-family' href='http://fonts.googleapis.com/css?family=Roboto:,400' rel='stylesheet' type='text/css'><style id='gwfc-li-style'>li {font-family: 'Roboto', sans-serif !important;font-weight: !important;font-style: normal !important;}</style><style type='text/css'>.myfixed {margin: 0 auto !important;float: none !important;border: 0px !important;background: none !important;max-width: 100% !important;}#mysticky-nav {width: 100% !important;position: static;top: -100px;}.wrapfixed {position: fixed !important;top: 0px !important;left: 0px !important;margin-top: 0px !important;z-index: 1000000;-webkit-transition: 0.3s;-moz-transition: 0.3s;-o-transition: 0.3s;transition: 0.3s;-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=95)';filter: alpha(opacity=95);opacity: .95;background-color: #ffffff !important;}@media (max-width: 359px) {.wrapfixed {position: static !important;display: none !important;}}</style><meta name='generator' content='Powered by Visual Composer - drag and drop page builder for WordPress.' /><style>/*wp_charts_js responsive canvas CSS override*/.wp_charts_canvas {width: 100% !important;max-width: 100%;}@media screen and (max-width:480px) {div.wp-chart-wrap {width: 100% !important;float: none !important;margin-left: auto !important;margin-right: auto !important;text-align: center;}}</style><style type='text/css' id='eventiz-header-css'></style><meta name='generator' content='Powered by Slider Revolution 5.2.5.3 - responsive, Mobile-Friendly Slider Plugin for WordPress with comfortable drag and drop interface.' /><style>    </style><style type='text/css' data-type='vc_custom-css'>.site-main {padding-bottom: 0 !important;}.sidebar-line-height {line-height: 30px;margin-left: 20px;} .pbr-breadscrumb { background-image:url('http://gsmktg.com/wp-content/uploads/2016/08/exhibitors02.jpg'); }</style><style type='text/css' data-type='vc_shortcodes-custom-css'>.vc_custom_1470665475652 {margin-right: 4% !important;margin-left: 4% !important;}.vc_custom_1469607261759 {padding-top: 4% !important;padding-right: 4% !important;}</style><noscript><style type='text/css'>.wpb_animate_when_almost_visible {opacity: 1; }</style></noscript></head><body class='page page-id-11431 page-child parent-pageid-11504 page-template-default logged-in admin-bar no-customize-support masthead-fixed singular wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive'><div id='wptime-plugin-preloader'></div><div id='page' class='hfeed site'><div class='pbr-page-inner row-offcanvas row-offcanvas-left'><div class='topbar-mobile  hidden-lg hidden-md'><div class='active-mobile pull-left'><button data-toggle='offcanvas' class='btn btn-offcanvas btn-toggle-canvas offcanvas' type='button'><i class='fa fa-bars'></i></button></div><div class='topbar-inner pull-left'><div class='active-mobile search-popup pull-left'><a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'><span class='fa fa-search'></span></a><div class='active-content dropdown-menu' role='menu'><form role='search' method='get' class='input-group search-category' action='http://gsmktg.com/'><div class='input-group-addon search-category-container'><div class='select'></div></div><input name='s' maxlength='60' class='form-control search-category-input' type='text' size='20' placeholder='What do you need...'><div class='input-group-btn'><label class='btn btn-link btn-search'><span class='title-search hidden'>Search</span><input type='submit' class='fa searchsubmit' value='&#xf002;' /></label><input type='hidden' name='post_type' value='product' /></div></form></div></div><div class='active-mobile setting-popup pull-left hidden'><a class='dropdown-toggle' data-toggle='dropdown' href='#' role='button' aria-expanded='false'><span class='fa fa-user'></span></a><div class='active-content dropdown-menu' role='menu'></div></div></div></div><header id='pbr-masthead' class='site-header' role='banner'><div class='container'><div class='row'><div class='header-main'><div class='logo-wrapper col-lg-2 col-md-2 col-sm-12 col-xs-12 pull-left'><div id='pbr-logo' class='logo'><a href='http://gsmktg.com/'><img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='Best Exhibition In India | GS Marketing'></a></div></div><section id='pbr-mainmenu' class='pbr-mainmenu col-lg-10 col-md-10 col-sm-12 col-xs-12 pull-right'><div><div class='inner navbar-mega-simple pull-right'><nav data-duration='400' class='hidden-xs hidden-sm pbr-megamenu slide animate navbar navbar-mega' role='navigation'><button aria-expanded='true' data-target='.navbar-mega-collapse' data-toggle='collapse' type='button' class='navbar-toggle'><span class='sr-only'>Toggle navigation</span><span class='icon-bar'></span><span class='icon-bar'></span><span class='icon-bar'></span></button><div class='collapse navbar-collapse navbar-mega-collapse'><ul id='primary-menu' class='nav navbar-nav megamenu'><li id='menu-item-9869' class='dropdown menu-item-9869 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>About <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-9872' class='menu-item-9872 level-1'><a href='http://gsmktg.com/about/companyinfo/'>Company Info</a></li><li id='menu-item-11324' class='menu-item-11324 level-1'><a href='http://gsmktg.com/about/our-leadership/'>Our Leadership</a></li><li id='menu-item-9871' class='menu-item-9871 level-1'><a href='http://gsmktg.com/about/sponsors/'>Partners and Sponsors</a></li></ul></li><li id='menu-item-9865' class='dropdown menu-item-9865 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Exhibitions <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-10601' class='menu-item-10601 level-1'><a href='http://gsmktg.com/india-international-mega-trade-fair-3/'>India International Mega Trade Fair</a></li><li id='menu-item-10892' class='menu-item-10892 level-1'><a href='http://gsmktg.com/home-decor/'>GS Home &#038; Decor</a></li><li id='menu-item-12018' class='menu-item-12018 level-1'><a href='http://gsmktg.com/gs-tourism-fair/'>GS Tourism Fair</a></li><li id='menu-item-11399' class='menu-item-11399 level-1'><a href='http://gsmktg.com/gs-consumer-expo/'>GS Consumer Expo</a></li><li id='menu-item-11229' class='menu-item-11229 level-1'><a href='http://gsmktg.com/schedule/'>Schedule Calendar</a></li></ul></li><li id='menu-item-9595' class='dropdown menu-item-9595 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>Locations <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-9602' class='menu-item-9602 level-1'><a href='http://gsmktg.com/kolkata/'>Kolkata</a></li><li id='menu-item-10198' class='menu-item-10198 level-1'><a href='http://gsmktg.com/visakhapatnam-2/'>Visakhapatnam</a></li><li id='menu-item-10199' class='menu-item-10199 level-1'><a href='http://gsmktg.com/bhubaneswar-2/'>Bhubaneswar</a></li><li id='menu-item-10197' class='menu-item-10197 level-1'><a href='http://gsmktg.com/ranchi-2/'>Ranchi</a></li></ul></li><li id='menu-item-9359' class='dropdown menu-item-9359 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Exhibitors <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-12470' class='menu-item-12470 level-1'><a href='http://gsmktg.com/exhibitor-lounge/'>Exhibitor Lounge</a></li><li id='menu-item-10864' class='menu-item-10864 level-1'><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/'>Reason For Exhibiting</a></li><li id='menu-item-11364' class='menu-item-11364 level-1'><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/'>Facts And Figures Exhibitors</a></li><li id='menu-item-10867' class='menu-item-10867 level-1'><a href='http://gsmktg.com/exhibitor/exhibition-presentation-services/'>Exhibition Presentation Services</a></li><li id='menu-item-11213' class='menu-item-11213 level-1'><a href='http://gsmktg.com/exhibition-marketing/'>Exhibition Marketing</a></li><li id='menu-item-10266' class='menu-item-10266 level-1'><a href='http://gsmktg.com/stall-booking/'>Stall Booking</a></li><li id='menu-item-10235' class='menu-item-10235 level-1'><a href='http://gsmktg.com/exhibitor/exhibition-manual/'>Exhibition Manual</a></li><li id='menu-item-12095' class='menu-item-12095 level-1'><a href='http://gsmktg.com/media/'>Exhibition Media Ads</a></li></ul></li><li id='menu-item-9873' class='dropdown menu-item-9873 level-0'><a href='#' class='dropdown-toggle' data-hover='dropdown' data-toggle='dropdown'>For Visitors <b class='caret'></b></a><ul class='dropdown-menu'><li id='menu-item-10688' class='menu-item-10688 level-1'><a href='http://gsmktg.com/reason-for-visiting/'>Reason For Visiting</a></li><li id='menu-item-10696' class='menu-item-10696 level-1'><a href='http://gsmktg.com/facts-figure-for-visitors/'>Facts &#038; Figure Visitors</a></li><li id='menu-item-9349' class='menu-item-9349 level-1'><a href='http://gsmktg.com/visitor-ticketing/'>Buy Tickets</a></li><li id='menu-item-9361' class='menu-item-9361 level-1'><a href='#'>Mobile App</a></li><li id='menu-item-9350' class='menu-item-9350 level-1'><a href='http://gsmktg.com/mobile-app-guide/'>Mobile App Guide</a></li></ul></li><li id='menu-item-11210' class='menu-item-11210 level-0'><a href='http://gsmktg.com/press/'>Press</a></li><li id='menu-item-11211' class='menu-item-11211 level-0'><a href='http://gsmktg.com/blog/'>Blog</a></li><li id='menu-item-10229' class='menu-item-10229 level-0'><a href='http://gsmktg.com/contact-us/'>Contact</a></li><li id='menu-item-12468' class='menu-item-12468 level-0'><a href='http://gsmktg.com/registration-form/'>Register</a></li><li id='menu-item-12469' class='menu-item-12469 level-0'><a href='http://gsmktg.com/about/login/'>Login</a></li></ul></div></nav></div></div></section></div></div></div></header><!-- #masthead --><section id='main' class='site-main'><section id='pbr-breadscrumb' class='pbr-breadscrumb'><div class='container'><div class='breadcrumb-inner'><div class='title-page'>Visitor Lounge</div><ol class='breadcrumb'><li><a href='http://gsmktg.com'>Home</a> &raquo;</li> <li class='active'>Visitor Lounge</li></ol></div></div></section><section id='main-container' class=' inner'><center>" + retval + "</center></section></section><!-- #main --><footer id='pbr-footer' class='site-footer pbr-footer' role='contentinfo'><div class='inner'><div class='pbr-footer-profile'><div class='wpb-container vc_row wpb_row vc_row-fluid space-0 vc_custom_1450323409828 vc_row-has-fill'><div class='container'><div class='row'><div class='col-sm-12'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_row wpb_row vc_inner vc_row-fluid'><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>Exhibitions</h2><div class='menu-footer-exhibitions-container'><ul id='menu-footer-exhibitions' class='menu'><li id='menu-item-10968' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10968'><a href='http://gsmktg.com/india-international-mega-trade-fair-3/'>India International Mega Trade Fair</a></li><li id='menu-item-10967' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10967'><a href='http://gsmktg.com/home-decor/'>GS Home &#038; Decor</a></li><li id='menu-item-12343' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-12343'><a href='http://gsmktg.com/gs-tourism-fair/'>GS Tourism Fair</a></li><li id='menu-item-10962' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10962'><a href='http://gsmktg.com/gs-consumer-expo/'>GS Consumer Expo</a></li></ul></div></div></div></div></div></div><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>Locations</h2><div class='menu-footer-locations-container'><ul id='menu-footer-locations' class='menu'><li id='menu-item-10985' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10985'><a href='http://gsmktg.com/kolkata/'>Kolkata</a></li><li id='menu-item-10987' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10987'><a href='http://gsmktg.com/visakhapatnam-2/'>Visakhapatnam</a></li><li id='menu-item-10981' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10981'><a href='http://gsmktg.com/bhubaneswar-2/'>Bhubaneswar</a></li><li id='menu-item-10986' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10986'><a href='http://gsmktg.com/ranchi-2/'>Ranchi</a></li></ul></div></div></div></div></div></div><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>For Exhibitors</h2><div class='menu-footer-forexhibitors-container'><ul id='menu-footer-forexhibitors' class='menu'><li id='menu-item-10991' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10991'><a href='http://gsmktg.com/exhibitor/exhibition-manual/'>Exhibition Manual</a></li><li id='menu-item-10992' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10992'><a href='http://gsmktg.com/exhibition-presentation-services__trashed/'>Exhibition Presentation &#038; Services</a></li><li id='menu-item-10993' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10993'><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/'>Facts and Figures</a></li><li id='menu-item-10994' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10994'><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/'>Reason for Exhibiting</a></li></ul></div></div></div></div></div></div><div class='col-sm-3'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='vc_wp_custommenu wpb_content_element'><div class='widget widget_nav_menu'><h2 class='widgettitle'>For Visitors</h2><div class='menu-footer-forvisitors-container'><ul id='menu-footer-forvisitors' class='menu'><li id='menu-item-11000' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-11000'><a href='http://gsmktg.com/reason-for-visiting/'>Reason For Visiting</a></li><li id='menu-item-10997' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10997'><a href='http://gsmktg.com/facts-figure-for-visitors/'>Facts &#038; Figure Visitors</a></li><li id='menu-item-11001' class='menu-item menu-item-type-custom menu-item-object-custom menu-item-11001'><a href='#'>Mobile App</a></li><li id='menu-item-10999' class='menu-item menu-item-type-post_type menu-item-object-page menu-item-10999'><a href='http://gsmktg.com/mobile-app-guide-2/'>Mobile App Guide</a></li></ul></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='wpb-container vc_row wpb_row vc_row-fluid'><div class='container'><div class='row'><div class='col-sm-12'><div class='vc_column-inner '><div class='wpb_wrapper'><div class='wpb_raw_code wpb_content_element wpb_raw_html'><div class='wpb_wrapper'><div class='bo-social-icons text-center'><a class='bo-social-outline-light radius-6x' href='https://www.facebook.com/gsmarketingassociates/?ref=aymt_homepage_panel'><i class='fa fa-facebook'></i></a><a class='bo-social-outline-light radius-6x' href='https://twitter.com/gsmktga'><i class='fa fa-twitter'></i></a><a class='bo-social-outline-light radius-6x' href='https://plus.google.com/110788377399692549560/posts?gmbpt=true&hl=en'><i class='fa fa-google'></i></a><a class='bo-social-outline-light radius-6x' href='https://www.linkedin.com/company/7961893?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A7961893%2Cidx%3A3-5-10%2CtarId%3A1464350269377%2Ctas%3AGS%20Marketing'><i class='fa fa-linkedin'></i></a><a class='bo-social-outline-light radius-6x' href='https://www.instagram.com/iimtf/'><i class='fa fa-instagram'></i></a></div></div></div><div class='wpb_text_column wpb_content_element '><div class='wpb_wrapper'><div class='text-center' style='font-size: 12px;'><p>© 2016 GS Marketing - All Rights Reserved</p></div></div></div></div></div></div></div></div></div></div></div></footer><!-- #colophon --><div id='pbr-off-canvas' class='pbr-off-canvas sidebar-offcanvas hidden-lg hidden-md'><div class='pbr-off-canvas-body'><div class='offcanvas-head bg-primary'><button type='button' class='btn btn-offcanvas btn-toggle-canvas btn-default' data-toggle='offcanvas'><i class='fa fa-close'></i></button><span>Menu</span></div><nav class='navbar navbar-offcanvas navbar-static' role='navigation'><div class='navbar-collapse navbar-offcanvas-collapse'><ul id='main-menu-offcanvas' class='nav navbar-nav'><li class='dropdown menu-item-9869 level-0'><a href='#'>About </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-9872 level-1'><a href='http://gsmktg.com/about/companyinfo/'>Company Info</a></li><li class='menu-item-11324 level-1'><a href='http://gsmktg.com/about/our-leadership/'>Our Leadership</a></li><li class='menu-item-9871 level-1'><a href='http://gsmktg.com/about/sponsors/'>Partners and Sponsors</a></li></ul></li><li class='dropdown menu-item-9865 level-0'><a href='#'>Exhibitions </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-10601 level-1'><a href='http://gsmktg.com/india-international-mega-trade-fair-3/'>India International Mega Trade Fair</a></li><li class='menu-item-10892 level-1'><a href='http://gsmktg.com/home-decor/'>GS Home &#038; Decor</a></li><li class='menu-item-12018 level-1'><a href='http://gsmktg.com/gs-tourism-fair/'>GS Tourism Fair</a></li><li class='menu-item-11399 level-1'><a href='http://gsmktg.com/gs-consumer-expo/'>GS Consumer Expo</a></li><li class='menu-item-11229 level-1'><a href='http://gsmktg.com/schedule/'>Schedule Calendar</a></li></ul></li><li class='dropdown menu-item-9595 level-0'><a href='#'>Locations </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-9602 level-1'><a href='http://gsmktg.com/kolkata/'>Kolkata</a></li><li class='menu-item-10198 level-1'><a href='http://gsmktg.com/visakhapatnam-2/'>Visakhapatnam</a></li><li class='menu-item-10199 level-1'><a href='http://gsmktg.com/bhubaneswar-2/'>Bhubaneswar</a></li><li class='menu-item-10197 level-1'><a href='http://gsmktg.com/ranchi-2/'>Ranchi</a></li></ul></li><li class='dropdown menu-item-9359 level-0'><a href='#'>For Exhibitors </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-12470 level-1'><a href='http://gsmktg.com/exhibitor-lounge/'>Exhibitor Lounge</a></li><li class='menu-item-10864 level-1'><a href='http://gsmktg.com/exhibitor/reason-for-exhibiting/'>Reason For Exhibiting</a></li><li class='menu-item-11364 level-1'><a href='http://gsmktg.com/exhibitor/facts-and-figures-exhibitors/'>Facts And Figures Exhibitors</a></li><li class='menu-item-10867 level-1'><a href='http://gsmktg.com/exhibitor/exhibition-presentation-services/'>Exhibition Presentation Services</a></li><li class='menu-item-10266 level-1'><a href='http://gsmktg.com/stall-booking/'>Stall Booking</a></li><li class='menu-item-10235 level-1'><a href='http://gsmktg.com/exhibitor/exhibition-manual/'>Exhibition Manual</a></li><li class='menu-item-12095 level-1'><a href='http://gsmktg.com/media/'>Exhibition Media Ads</a></li></ul></li><li class='dropdown menu-item-9873 level-0'><a href='#'>For Visitors </a> <b class='caret'></b><ul class='dropdown-menu'><li class='menu-item-10688 level-1'><a href='http://gsmktg.com/reason-for-visiting/'>Reason For Visiting</a></li><li class='menu-item-10696 level-1'><a href='http://gsmktg.com/facts-figure-for-visitors/'>Facts &#038; Figure Visitors</a></li><li class='menu-item-9349 level-1'><a href='http://gsmktg.com/visitor-ticketing/'>Buy Tickets</a></li><li class='menu-item-9361 level-1'><a href='#'>Mobile App</a></li><li class='menu-item-9350 level-1'><a href='http://gsmktg.com/mobile-app-guide/'>Mobile App Guide</a></li></ul></li><li class='menu-item-11210 level-0'><a href='http://gsmktg.com/press/'>Press</a></li><li class='menu-item-11211 level-0'><a href='http://gsmktg.com/blog/'>Blog</a></li><li class='menu-item-10229 level-0'><a href='http://gsmktg.com/contact-us/'>Contact</a></li><li class='menu-item-12468 level-0'><a href='http://gsmktg.com/registration-form/'>Register</a></li><li class='menu-item-12469 level-0'><a href='http://gsmktg.com/my-account/'>Login</a></li></ul></div></nav></div></div></div></div><div class='modal fade' id='pbr-quickview-modal' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog modal-lg'><div class='modal-content'><div class='modal-header'><button type='button' class='close btn btn-close' data-dismiss='modal' aria-hidden='true'><i class='fa fa-times'></i></button></div><div class='modal-body'><span class='spinner'></span></div></div></div></div><link rel='stylesheet' id='style-admin-css' href='http://gsmktg.com/wp-content/plugins/easy-logo-slider/css/style-admin.css?ver=4.5.3' type='text/css' media='all' /><link rel='stylesheet' id='prettyphoto-css' href='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/prettyphoto/css/prettyPhoto.min.css?ver=4.11.2.1' type='text/css' media='all' /><script type='text/javascript'>/* <![CDATA[ */var _wpcf7 = { 'loaderUrl': 'http://gsmktg.com/wp-content/plugins/contact-form-7/images/ajax-loader.gif', 'recaptchaEmpty': 'Please verify that you are not a robot.', 'sending': 'Sending ...' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var mysticky_name = { 'mysticky_string': '.header-main', 'mysticky_active_on_height_string': '320', 'mysticky_disable_at_width_string': '359' };/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/mystickymenu/js/mystickymenu.min.js?ver=1.0.0'></script><script type='text/javascript'>/* <![CDATA[ */var wc_add_to_cart_params = { 'ajax_url': '/wp-admin/admin-ajax.php', 'wc_ajax_url': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%%', 'i18n_view_cart': 'View Cart', 'cart_url': 'http://gsmktg.com/cart/', 'is_cart': '', 'cart_redirect_after_add': 'no' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var woocommerce_params = { 'ajax_url': '/wp-admin/admin-ajax.php', 'wc_ajax_url': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%%' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var wc_cart_fragments_params = { 'ajax_url': '/wp-admin/admin-ajax.php', 'wc_ajax_url': '/exhibitor/ideas-for-marketing/?wc-ajax=%%endpoint%%', 'fragment_name': 'wc_fragments' };/* ]]> */</script><script type='text/javascript'>/* <![CDATA[ */var eventizAjax = { 'ajaxurl': 'http://gsmktg.com/wp-admin/admin-ajax.php' };/* ]]> */</script><script type='text/javascript' src='http://gsmktg.com/wp-content/plugins/js_composer/assets/lib/vc_carousel/js/transition.min.js?ver=4.11.2.1'></script><!-- Wordpress Blocks plugin developed by RenzoJohnson.com --><script type='text/javascript'>(function () {var request, b = document.body, c = 'className', cs = 'customize-support', rcs = new RegExp('(^|s+)(no-)?' + cs + '(s+|$)');request = true;b[c] = b[c].replace(rcs, ' ');b[c] += (window.postMessage && request ? ' ' : ' no-') + cs;}());</script></body></html>";
                    //var response = new HttpResponseMessage();
                    //  response.Content = new StringContent("<html><head></head><body>" + retval + "</body></html>");
                    response.Content = new StringContent(htmlPage);
                    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                }
            }
            return response;
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <returns></returns>
        [Route("android/bill/{ticketId}")]
        public IHttpActionResult GetBill(Guid organizerId, Guid ticketId)
        {
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Reading))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizer == null)
                    return NotFound();

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    return NotFound();

                var baseUrl = ConfigurationManager.AppSettings["BaseUrl"];
                var returnUrl = baseUrl + String.Format("/api/v1/organizers/{0}/citrus/android/return/{1}", organizerId, ticketId);
                string access_key = ConfigurationManager.AppSettings["Citrus.AccessKey"];
                string secret_key = ConfigurationManager.AppSettings["Citrus.SecretKey"];
                string return_url = returnUrl;
                string txn_id = eventTicket.TxnIdForPaymentGateWay;

                //  double TotalPriceOfTicket = Convert.ToDouble(ticket.TotalPriceOfTicket);
                decimal TotalPriceOfTicket = (Convert.ToInt32(eventTicket.TotalPriceOfTicket) / 1000.000m) * 1000m;

                string data_string = "merchantAccessKey=" + access_key + "&transactionId=" + txn_id + "&amount=" + TotalPriceOfTicket;
                byte[] key = Encoding.ASCII.GetBytes(secret_key);
                HMACSHA1 hmac = new HMACSHA1(key);
                MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(data_string));
                string signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

                // double currencyValue = (TotalPriceOfTicket / 100.00d) * 100;
                var amountObject = new { value = TotalPriceOfTicket, currency = "INR" };
                var citrusAmount = new CitrusAmount() { value = TotalPriceOfTicket.ToString(), currency = "INR" };
                var objectToReturn = new
                {
                    merchantTxnId = txn_id,
                    amount = citrusAmount,
                    requestSignature = signature,
                    merchantAccessKey = access_key,
                    returnUrl = return_url
                };

                return Ok(objectToReturn);
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <param name="formData"></param>
        /// <returns></returns>
        [Route("android/return/{ticketId}")]
        public HttpResponseMessage PostReturn(Guid organizerId, Guid ticketId, FormDataCollection formData)
        {
            string k1 = formData["TxId"];
            string k2 = formData["TxStatus"];
            string k3 = formData["amount"];
            string k4 = formData["pgTxnNo"];
            string k5 = formData["issuerRefNo"];
            string k6 = formData["authIdCode"];
            string k7 = formData["firstName"];
            string k8 = formData["lastName"];
            string k9 = formData["pgRespCode"];
            string k10 = formData["addressZip"];
            string k11 = formData["TxMsg"];
            string k12 = formData["paymentMode"];
            DateTime k13 = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, INDIAN_ZONE);

            string secret_key = ConfigurationManager.AppSettings["Citrus.SecretKey"];
            string verification_data = k1 + k2 + k3 + k4 + k5 + k6 + k7 + k8 + k9 + k10;
            byte[] key = Encoding.ASCII.GetBytes(secret_key);
            HMACSHA1 hmac = new HMACSHA1(key);
            MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(verification_data));
            string signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

            string sigrecd = formData["signature"];

            var returnValue = new
            {
                TxId = k1,
                TxStatus = k2,
                amount = k3,
                pgTxnNo = k4,
                issuerRefNo = k5,
                authIdCode = k6,
                firstName = k7,
                lastName = k8,
                pgRespCode = k9,
                addressZip = k10,
                TxMsg = k11,
                paymentMode = k12,
                txnDateTime = k13
            };

            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Writing))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizerId == null)
                    throw new ValidationException("Organizer not Valid");

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    throw new ValidationException("Ticket is not Valid");

                var transactionEntity = Transaction.Create(returnValue.TxStatus, Double.Parse(returnValue.amount),
                    returnValue.pgTxnNo, returnValue.issuerRefNo, returnValue.authIdCode,
                    returnValue.firstName, returnValue.lastName, returnValue.pgRespCode, returnValue.addressZip, returnValue.TxId, returnValue.paymentMode, returnValue.txnDateTime, returnValue.TxMsg);

                transactionEntity.EventTicket = eventTicket;
                EventTicketType eventTicketType = eventTicket.EventTicketType;
                Event eventDetails = _eventRepository.GetById(eventTicketType.Event.Id);

                var visitorName = eventTicket.Visitor.FirstName;
                var tokenNumbertoSms = eventTicket.TokenNumber;
                var mobileNo = eventTicket.Visitor.MobileNo;
                var ticketType = eventTicket.EventTicketType.Name;
                var venueNameSMS = eventDetails.Venue.City;
                var venueNameEmail = eventDetails.Address;
                var ticketDate = eventTicket.TicketDate.ToString("dd-MMM-yyyy");
                var noOfTickets = eventTicket.NumberOfTicket;

                string retJsonForAndroid = "{\"TxId\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k1 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"TxStatus\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k2 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"amount\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k3 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"pgTxnNo\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k4 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"issuerRefNo\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k5 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"authIdCode\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k6 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"firstName\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k7 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"lastName\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k8 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"pgRespCode\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k9 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"addressZip\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k10 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"TxMsg\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k11 + "\"}";

                var response = new HttpResponseMessage();
                string data;
                if (signature == formData["signature"])
                {
                    data = retJsonForAndroid;
                }
                else
                {
                    data = "{\"error\"error\":\"Transaction Failed\",\"Reason\":\"Signature Verification Failed\"}";
                }

                if (k2.ToLower() == "success".ToLower())
                {
                    eventTicket.PaymentCompleted = true;
                    var paymentMode = "Mobile Ticket";
                    var paymentType = " PAID ONLINE";
                    var eventDate = eventDetails.StartDate.ToString("dd-MMM-yyyy") + " To " + eventDetails.EndDate.ToString("dd-MMM-yyyy");
                    var exhibitionTime = eventDetails.Time;
                    //string htmlPage = "<html><head></head><body> <p>'" + data + "</p> <p> " + k1 + " / " + k2 + " / " + k3 + " / " + k4 + " / " + k5 + " / " + k6 + " / " + k7 + " / " + k8 + " / " + k9 + " / " + k10 + " / " + k11 + " / " + k12 + " / " + k13 + "'</p></body></html>";
                    //string subject = "E-Ticket," + eventDetails.Name + " " + venue;
                    //GeneratePDFandMailasAttachMent(htmlPage, "test", subject, eventTicket.Visitor); 
                    var eventExhibitionMapcriteria = new EventExhibitionMapSearchCriteria { EventId = eventDetails.Id };
                    var eventExhibitionMapsepcification = new EventExhibitionMapSpecificationForSearch(eventExhibitionMapcriteria);
                    var eventExhibitionMap = _eventExhibitionMapRepository.Find(eventExhibitionMapsepcification);

                    var visitorDiscountCouponMapCriteria = new VisitorDiscountCouponMapSearchCriteria { EventTicketId = eventTicket.Id };
                    var visitorDiscountCouponMapSpecification = new VisitorDiscountCouponMapSpecificationForSearch(visitorDiscountCouponMapCriteria);
                    var visitorDiscountCouponMap = _visitorDiscountCouponMapRepository.Find(visitorDiscountCouponMapSpecification).FirstOrDefault();
                    var exhibitionNames = "";

                    var totalAmount = eventTicketType.NonBusinessHrs * eventTicket.NumberOfTicket; ;
                    var discountedAmount = 0;
                    var finalAmount = 0;

                    string discountEmail = "";
                    string Bgcolor = "";
                    if (visitorDiscountCouponMap != null)
                    {
                        discountedAmount = (int)Math.Round((double)((Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start of dicount --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;background:#febb13'> <tbody> <tr> <td width='50%'> <div style='height: 0;border-style: solid;border-width: 100px 120px 0 0;border-color: #1f2533 transparent transparent transparent;line-height: 0px;_border-color: #007bff #000000 #000000 #000000;_filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');width: 30%;'></div> </td> <td width='50%'> <h3>Avail {0}% Discount</h3> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of discount -->", visitorDiscountCouponMap.DiscountCoupon.Discount);
                    }
                    else
                    {
                        discountedAmount = (int)Math.Round((double)((20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start of dicount --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;background:#febb13'> <tbody> <tr> <td width='50%'> <div style='height: 0;border-style: solid;border-width: 100px 120px 0 0;border-color: #1f2533 transparent transparent transparent;line-height: 0px;_border-color: #007bff #000000 #000000 #000000;_filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');width: 30%;'></div> </td> <td width='50%'> <h3>Avail {0}% Discount</h3> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of discount -->", 20);
                    }

                    foreach (EventExhibitionMap singleEventExhibitionMap in eventExhibitionMap)
                    {
                        Exhibition exhibition = _exhibitionRepository.GetById(singleEventExhibitionMap.Exhibition.Id);
                        if (exhibition != null)
                        {
                            TimeSpan dayCount = eventTicket.TicketDate.Date - eventDetails.StartDate.Date;
                            if (dayCount.Days < 0)
                            {
                                string noTicket = "<html><body>" + "No Ticket Found Please try again" + "</body></html>";
                                Bgcolor = "#EAEAE7";
                            }

                            TicketColors colors = new TicketColors();
                            if (eventTicket.IsPayOnLocation == true)
                            {
                                Bgcolor = "#EAEAE7";
                            }
                            else
                            {
                                Bgcolor = colors[dayCount.Days];
                            }
                        }
                        else
                        {
                            Bgcolor = "#EAEAE7";
                        }
                        if (eventDetails.isActive && eventDetails.StartDate.Date <= eventTicket.TicketDate.Date && eventDetails.EndDate.Date >= eventTicket.TicketDate.Date)
                        {
                            var exhibitionName = exhibition.Name;
                            exhibitionNames += string.Format("<h3 style='margin-top:5px;margin-bottom:5px;color:#febb13'>{0}</h3>", exhibitionName);
                        }
                    }

                    SendSMS(paymentMode, paymentType, tokenNumbertoSms, mobileNo, ticketType, venueNameSMS, ticketDate, noOfTickets, finalAmount);

                    var ticketData = string.Format("<h5 style='margin-top:5px;margin-bottom:5px;'>{0}</h5> <b style='margin-top:5px;margin-bottom:5px;'>{1}</b>&nbsp;&nbsp; | &nbsp;&nbsp;<u>{2}</u> </td> <td width='30%' align='center' style='padding: 10px;border-left: dotted 1px;'> <h4 style='font-weight:bolder;'>{3}</h4> <img src='http://gsmktg.com/mobile_images/ticket_icon.png' style='width:30%;height:auto;'><br> Tickets:<b>{4}</b> </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Date </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {5} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Amount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {6} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Quantity </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {7} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Discount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {8} </td> </tr> <tr width='100%' style='paddimg:10px;border-top: #D0CEC7 solid 1px;'> <td width='70%' align='left' style='padding: 10px;'> <b>Total Amount</b> </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> <b>{9} </b> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> </td> </tr> </tbody></table><!--ticket-->",
                        eventDetails.Address, eventDate, eventDetails.Time, paymentType, noOfTickets, ticketDate, totalAmount, noOfTickets, discountedAmount, finalAmount);
                    string htmlPagemail = "<html xmlns='http://www.w3.org/1999/xhtml'> <head> <meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> <meta name='viewport' content='width=device-width, initial-scale=1.0'/> <title>Ticket</title> <style type='text/css'> /* Client-specific Styles */ #outlook a {padding:0;} /* Force Outlook to provide a 'view in browser' menu link. */ body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;font-family: Helvetica, arial, sans-serif;} /* Prevent Webkit and Windows Mobile platforms from changing default font sizes, while not breaking desktop design. */ .ExternalClass {width:100%;} /* Force Hotmail to display emails at full width */ .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Force Hotmail to display normal line spacing.*/ #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;} img {outline:none; text-decoration:none;border:none; -ms-interpolation-mode: bicubic;} a img {border:none;} .image_fix {display:block;} p {margin: 0px 0px !important;} table td {border-collapse: collapse;} table { border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; } a {color: #0a8cce;text-decoration: none;text-decoration:none!important;} /*STYLES*/ table[class=full] { width: 100%; clear: both; } /*IPAD STYLES*/ @media only screen and (max-width: 640px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 440px!important;text-align:center!important;} table[class=devicewidthinner] {width: 420px!important;text-align:center!important;} img[class=banner] {width: 440px!important;height:220px!important;} img[class=colimg2] {width: 440px!important;height:220px!important;} } /*IPHONE STYLES*/ @media only screen and (max-width: 480px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 280px!important;text-align:center!important;} table[class=devicewidthinner] {width: 260px!important;text-align:center!important;} img[class=banner] {width: 280px!important;height:140px!important;} img[class=colimg2] {width: 280px!important;height:140px!important;} td[class=mobile-hide]{display:none!important;} td[class='padding-bottom25']{padding-bottom:25px!important;} } u { border-bottom: 1px dotted #febb13; text-decoration: none; } .myBgColor{ background:" + Bgcolor + "; } </style> </head> <body> <!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='banner'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid;background:#fff;'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;color:#fff;paddimg:10px;'> <td width='30%' align='left' style='padding: 10px;'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='' border='0' width='100%' style='display:block; border:none; outline:none; text-decoration:none;'> </td> <td width='70%' align='center' style='padding: 10px;border-left: dotted 1px #000;'> <h3 style='padding: 0px;'>Ticket Booking ID : " + tokenNumbertoSms + "</h3></td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- Start of seperator --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <!--Start of ticket --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='preheader' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr width='100%' > <td width='100%' > <table width='550' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;;color:#fff;paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'>" + exhibitionNames + " " + ticketData + "" + discountEmail + "<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start Full Text --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='full-text'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td> <table width='550' align='center' cellpadding='0' cellspacing='0' border='0' class='devicewidthinner' style='border: 1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Title --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 30px; color: #333333; text-align:center; line-height: 50px;' st-title='fulltext-heading'> Your Ticket Confirmation </td> </tr> <!-- End of Title --> <!-- spacing --> <tr> <td width='100%' height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- End of spacing --> <!-- content --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 16px; color: #666666; text-align:center; line-height: 30px;' st-content='fulltext-content'> <span>You have received this email from <a href='http://www.gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </td> </tr> <!-- End of content --> </tbody> </table> </td> </tr> <!-- Spacing --> <tr> <td height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- end of full text --><!-- Start of Postfooter --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='postfooter' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth'> <tbody> <tr> <td align='center' valign='middle' style='font-family: Helvetica, arial, sans-serif; font-size: 14px;color: #666666' st-content='postfooter'> Best regards, GS Marketing Team © 2017 GS Marketing - All Rights Reserved </td> </tr> <!-- Spacing --> <tr> <td width='100%' height='20'></td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of postfooter --><!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> </body></html>";

                    string subject = "E-Ticket," + eventDetails.Name + " " + venueNameEmail;
                    GeneratePDFandMailasAttachMent(htmlPagemail, eventTicket.Id.ToString(), subject, eventTicket.Visitor);
                }
                else
                {
                    eventTicket.PaymentCompleted = false;
                }

                _eventTicketRepository.Update(eventTicket);
                _transactionRepository.Add(transactionEntity);
                unitOfWork.SaveChanges();

                response.Content = new StringContent("<html><head></head><body><script> function postResponseiOS() { return '" + data + "';} CitrusResponse.pgResponse( '" + data + "'); </script></body></html>");
                response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                return response;
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <returns></returns>
        [Route("ios/bill/{ticketId}")]
        public IHttpActionResult GetIOSBill(Guid organizerId, Guid ticketId)
        {
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Reading))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizer == null)
                    return NotFound();

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    return NotFound();
                var objectToReturn = BillGenerator(organizerId, eventTicket);

                return Ok(objectToReturn);
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <returns></returns>
        [Route("ios/bill/{ticketId}")]
        public IHttpActionResult PostIOSBill(Guid organizerId, Guid ticketId)
        {
            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Reading))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizer == null)
                    return NotFound();

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    return NotFound();
                var objectToReturn = BillGenerator(organizerId, eventTicket);

                return Ok(objectToReturn);
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <param name="ticketId"></param>
        /// <param name="formData"></param>
        /// <returns></returns>
        [Route("ios/return/{ticketId}")]
        public HttpResponseMessage PostIOSReturn(Guid organizerId, Guid ticketId, FormDataCollection formData)
        {
            string k1 = formData["TxId"];
            string k2 = formData["TxStatus"];
            string k3 = formData["amount"];
            string k4 = formData["pgTxnNo"];
            string k5 = formData["issuerRefNo"];
            string k6 = formData["authIdCode"];
            string k7 = formData["firstName"];
            string k8 = formData["lastName"];
            string k9 = formData["pgRespCode"];
            string k10 = formData["addressZip"];
            string k11 = formData["TxMsg"];
            string k12 = formData["paymentMode"];
            DateTime k13 = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, INDIAN_ZONE);

            string secret_key = ConfigurationManager.AppSettings["Citrus.SecretKey"];
            string verification_data = k1 + k2 + k3 + k4 + k5 + k6 + k7 + k8 + k9 + k10;
            byte[] key = Encoding.ASCII.GetBytes(secret_key);
            HMACSHA1 hmac = new HMACSHA1(key);
            MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(verification_data));
            string signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

            string sigrecd = formData["signature"];

            var returnValue = new
            {
                TxId = k1,
                TxStatus = k2,
                amount = k3,
                pgTxnNo = k4,
                issuerRefNo = k5,
                authIdCode = k6,
                firstName = k7,
                lastName = k8,
                pgRespCode = k9,
                addressZip = k10,
                TxMsg = k11,
                paymentMode = k12,
                txnDateTime = k13
            };

            using (var unitOfWork = new UnitOfWorkScope<EuphoriaContext>(UnitOfWorkScopePurpose.Writing))
            {
                var organizer = _organizerRepository.GetById(organizerId);
                if (organizerId == null)
                    throw new ValidationException("Organizer not Valid");

                var eventTicket = _eventTicketRepository.GetById(ticketId);
                if (eventTicket == null)
                    throw new ValidationException("Ticket is not Valid");

                var transactionEntity = Transaction.Create(returnValue.TxStatus, Double.Parse(returnValue.amount),
                    returnValue.pgTxnNo, returnValue.issuerRefNo, returnValue.authIdCode,
                    returnValue.firstName, returnValue.lastName, returnValue.pgRespCode, returnValue.addressZip, returnValue.TxId, returnValue.paymentMode, returnValue.txnDateTime, returnValue.TxMsg);

                transactionEntity.EventTicket = eventTicket;
                EventTicketType eventTicketType = eventTicket.EventTicketType;
                Event eventDetails = _eventRepository.GetById(eventTicketType.Event.Id);

                var visitorName = eventTicket.Visitor.FirstName;
                var tokenNumbertoSms = eventTicket.TokenNumber;
                var mobileNo = eventTicket.Visitor.MobileNo;
                var ticketType = eventTicket.EventTicketType.Name;
                var venueNameSMS = eventDetails.Venue.City;
                var venueNameEmail = eventDetails.Address;
                var ticketDate = eventTicket.TicketDate.ToString("dd-MMM-yyyy");
                var noOfTickets = eventTicket.NumberOfTicket;

                string retJsonForAndroid = "{\"TxId\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k1 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"TxStatus\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k2 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"amount\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k3 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"pgTxnNo\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k4 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"issuerRefNo\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k5 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"authIdCode\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k6 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"firstName\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k7 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"lastName\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k8 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"pgRespCode\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k9 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"addressZip\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k10 + "\",";
                retJsonForAndroid = retJsonForAndroid + "\"TxMsg\"" + ":";
                retJsonForAndroid = retJsonForAndroid + "\"" + k11 + "\"}";

                var response = new HttpResponseMessage();
                string data;
                if (signature == formData["signature"])
                {
                    data = retJsonForAndroid;
                }
                else
                {
                    data = "{\"error\"error\":\"Transaction Failed\",\"Reason\":\"Signature Verification Failed\"}";
                }

                if (k2.ToLower() == "success".ToLower())
                {
                    eventTicket.PaymentCompleted = true;
                    var paymentMode = "Mobile Ticket";
                    var paymentType = " PAID ONLINE";
                    var eventDate = eventDetails.StartDate.ToString("dd-MMM-yyyy") + " To " + eventDetails.EndDate.ToString("dd-MMM-yyyy");
                    var exhibitionTime = eventDetails.Time;

                    //string htmlPage = "<html><head></head><body> <p>'" + data + "</p> <p> " + k1 + " / " + k2 + " / " + k3 + " / " + k4 + " / " + k5 + " / " + k6 + " / " + k7 + " / " + k8 + " / " + k9 + " / " + k10 + " / " + k11 + " / " + k12 + " / " + k13 + "'</p></body></html>";
                    //string subject = "E-Ticket," + eventDetails.Name + " " + venue;
                    //GeneratePDFandMailasAttachMent(htmlPage, "test", subject, eventTicket.Visitor);

                    var eventExhibitionMapcriteria = new EventExhibitionMapSearchCriteria { EventId = eventDetails.Id };
                    var eventExhibitionMapsepcification = new EventExhibitionMapSpecificationForSearch(eventExhibitionMapcriteria);
                    var eventExhibitionMap = _eventExhibitionMapRepository.Find(eventExhibitionMapsepcification);

                    var visitorDiscountCouponMapCriteria = new VisitorDiscountCouponMapSearchCriteria { EventTicketId = eventTicket.Id };
                    var visitorDiscountCouponMapSpecification = new VisitorDiscountCouponMapSpecificationForSearch(visitorDiscountCouponMapCriteria);
                    var visitorDiscountCouponMap = _visitorDiscountCouponMapRepository.Find(visitorDiscountCouponMapSpecification).FirstOrDefault();
                    var exhibitionNames = "";

                    var totalAmount = eventTicketType.NonBusinessHrs * eventTicket.NumberOfTicket; ;
                    var discountedAmount = 0;
                    var finalAmount = 0;

                    string discountEmail = "";
                    string Bgcolor = "";
                    if (visitorDiscountCouponMap != null)
                    {
                        if (visitorDiscountCouponMap.DiscountCoupon.Discount == 100)
                        {
                            discountEmail = string.Format("<table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td></tr></tbody> </table> </td></tr></tbody> </table> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;/* For browsers that do not support gradients */ background: -webkit-linear-gradient(-135deg, #febb13, yellow); /* For Safari 5.1 to 6.0 */ background: -o-linear-gradient(-135deg, #febb13, yellow); /* For Opera 11.1 to 12.0 */ background: -moz-linear-gradient(-135deg, #febb13, yellow); /* For Firefox 3.6 to 15 */ background: linear-gradient(-135deg, #febb13, yellow); /* Standard syntax */'> <tbody> <tr> <td width='100%'> <div> <center> <h1 style='margin: 0px;padding-top: 5px;'>Congratulations</h1> <h2>This is a <span style='font-weight:bold;font-size: 1.5em;color:red'>Free</span> ticket</h2> </center> </div></td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table>");
                        }
                        else
                        {
                            discountedAmount = (int)Math.Round((double)((Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                            finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (Convert.ToDouble(visitorDiscountCouponMap.DiscountCoupon.Discount) / 100.00) * Convert.ToDouble(totalAmount)));
                            discountEmail = string.Format("<table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td></tr></tbody> </table> </td></tr></tbody> </table> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;/* For browsers that do not support gradients */ background: -webkit-linear-gradient(-135deg, #febb13, yellow); /* For Safari 5.1 to 6.0 */ background: -o-linear-gradient(-135deg, #febb13, yellow); /* For Opera 11.1 to 12.0 */ background: -moz-linear-gradient(-135deg, #febb13, yellow); /* For Firefox 3.6 to 15 */ background: linear-gradient(-135deg, #febb13, yellow); /* Standard syntax */'> <tbody> <tr> <td width='100%'> <div> <center> <h1 style='margin: 0px;padding-top: 5px;'>Congratulations</h1> <h2>You get <span style='font-weight:bold;font-size: 1.5em;color:red'>{0}%</span>Discount</h2> </center> </div></td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table><!-- End of discount -->", visitorDiscountCouponMap.DiscountCoupon.Discount);
                        }
                    }
                    else
                    {
                        discountedAmount = (int)Math.Round((double)((20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        finalAmount = (int)Math.Round((double)(Convert.ToDouble(totalAmount) - (20.00 / 100.00) * Convert.ToDouble(totalAmount)));
                        discountEmail = string.Format("<table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td></tr></tbody> </table> </td></tr></tbody> </table> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='550' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' style='border:3px dotted #000;/* For browsers that do not support gradients */ background: -webkit-linear-gradient(-135deg, #febb13, yellow); /* For Safari 5.1 to 6.0 */ background: -o-linear-gradient(-135deg, #febb13, yellow); /* For Opera 11.1 to 12.0 */ background: -moz-linear-gradient(-135deg, #febb13, yellow); /* For Firefox 3.6 to 15 */ background: linear-gradient(-135deg, #febb13, yellow); /* Standard syntax */'> <tbody> <tr> <td width='100%'> <div> <center> <h1 style='margin: 0px;padding-top: 5px;'>Congratulations</h1> <h2>You get <span style='font-weight:bold;font-size: 1.5em;color:red'>{0}%</span>Discount</h2> </center> </div></td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table><!-- End of discount -->", 20);
                    }

                    foreach (EventExhibitionMap singleEventExhibitionMap in eventExhibitionMap)
                    {
                        Exhibition exhibition = _exhibitionRepository.GetById(singleEventExhibitionMap.Exhibition.Id);
                        if (exhibition != null)
                        {
                            TimeSpan dayCount = eventTicket.TicketDate.Date - eventDetails.StartDate.Date;
                            if (dayCount.Days < 0)
                            {
                                string noTicket = "<html><body>" + "No Ticket Found Please try again" + "</body></html>";
                                Bgcolor = "#EAEAE7";
                            }

                            TicketColors colors = new TicketColors();
                            if (eventTicket.IsPayOnLocation == true)
                            {
                                Bgcolor = "#EAEAE7";
                            }
                            else
                            {
                                Bgcolor = colors[dayCount.Days];
                            }
                        }
                        else
                        {
                            Bgcolor = "#EAEAE7";
                        }
                        if (eventDetails.isActive && eventDetails.StartDate.Date <= eventTicket.TicketDate.Date && eventDetails.EndDate.Date >= eventTicket.TicketDate.Date)
                        {
                            var exhibitionName = exhibition.Name;
                            exhibitionNames += string.Format("<h3 style='margin-top:5px;margin-bottom:5px;color:#febb13'>{0}</h3>", exhibitionName);
                        }
                    }

                    SendSMS(paymentMode, paymentType, tokenNumbertoSms, mobileNo, ticketType, venueNameSMS, ticketDate, noOfTickets, finalAmount);

                    var ticketData = string.Format("<h5 style='margin-top:5px;margin-bottom:5px;'>{0}</h5> <b style='margin-top:5px;margin-bottom:5px;'>{1}</b>&nbsp;&nbsp; | &nbsp;&nbsp;<u>{2}</u> </td> <td width='30%' align='center' style='padding: 10px;border-left: dotted 1px;'> <h4 style='font-weight:bolder;'>{3}</h4> <img src='http://gsmktg.com/mobile_images/ticket_icon.png' style='width:30%;height:auto;'><br> Tickets:<b>{4}</b> </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Date </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {5} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Amount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {6} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Ticket Quantity </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {7} </td> </tr> <tr width='100%' style='paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'> Discount </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> {8} </td> </tr> <tr width='100%' style='paddimg:10px;border-top: #D0CEC7 solid 1px;'> <td width='70%' align='left' style='padding: 10px;'> <b>Total Amount</b> </td> <td width='30%' align='right' style='padding: 10px;border-left: dotted 1px #D0CEC7;'> <b>{9} </b> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> </td> </tr> </tbody></table><!--ticket-->",
                        eventDetails.Address, eventDate, eventDetails.Time, paymentType, noOfTickets, ticketDate, totalAmount, noOfTickets, discountedAmount, finalAmount);
                    string htmlPagemail = "<html xmlns='http://www.w3.org/1999/xhtml'> <head> <meta http-equiv='Content-Type' content='text/html; charset=utf-8' /> <meta name='viewport' content='width=device-width, initial-scale=1.0'/> <title>Ticket</title> <style type='text/css'> /* Client-specific Styles */ #outlook a {padding:0;} /* Force Outlook to provide a 'view in browser' menu link. */ body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;font-family: Helvetica, arial, sans-serif;} /* Prevent Webkit and Windows Mobile platforms from changing default font sizes, while not breaking desktop design. */ .ExternalClass {width:100%;} /* Force Hotmail to display emails at full width */ .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Force Hotmail to display normal line spacing.*/ #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;} img {outline:none; text-decoration:none;border:none; -ms-interpolation-mode: bicubic;} a img {border:none;} .image_fix {display:block;} p {margin: 0px 0px !important;} table td {border-collapse: collapse;} table { border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; } a {color: #0a8cce;text-decoration: none;text-decoration:none!important;} /*STYLES*/ table[class=full] { width: 100%; clear: both; } /*IPAD STYLES*/ @media only screen and (max-width: 640px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 440px!important;text-align:center!important;} table[class=devicewidthinner] {width: 420px!important;text-align:center!important;} img[class=banner] {width: 440px!important;height:220px!important;} img[class=colimg2] {width: 440px!important;height:220px!important;} } /*IPHONE STYLES*/ @media only screen and (max-width: 480px) { a[href^='tel'], a[href^='sms'] { text-decoration: none; color: #0a8cce; /* or whatever your want */ pointer-events: none; cursor: default; } .mobile_link a[href^='tel'], .mobile_link a[href^='sms'] { text-decoration: default; color: #0a8cce !important; pointer-events: auto; cursor: default; } table[id=devicewidth] {width: 280px!important;text-align:center!important;} table[class=devicewidthinner] {width: 260px!important;text-align:center!important;} img[class=banner] {width: 280px!important;height:140px!important;} img[class=colimg2] {width: 280px!important;height:140px!important;} td[class=mobile-hide]{display:none!important;} td[class='padding-bottom25']{padding-bottom:25px!important;} } u { border-bottom: 1px dotted #febb13; text-decoration: none; } .myBgColor{ background:" + Bgcolor + "; } </style> </head> <body> <!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='banner'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid;background:#fff;'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;color:#fff;paddimg:10px;'> <td width='30%' align='left' style='padding: 10px;'> <img src='http://gsmktg.com/wp-content/uploads/2016/06/resize-logo.png' alt='' border='0' width='100%' style='display:block; border:none; outline:none; text-decoration:none;'> </td> <td width='70%' align='center' style='padding: 10px;border-left: dotted 1px #000;'> <h3 style='padding: 0px;'>Ticket Booking ID : " + tokenNumbertoSms + "</h3></td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- Start of seperator --><table width='100%'cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor' > <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> <!--Start of ticket --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='preheader' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr width='100%' > <td width='100%' > <table width='550' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' style='border:1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Spacing --> <tr width='100%' style='background:#1f2533;;color:#fff;paddimg:10px;'> <td width='70%' align='left' style='padding: 10px;'>" + exhibitionNames + " " + ticketData + "" + discountEmail + "<!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator' > <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth' class='myBgColor'> <tbody> <tr> <td align='center' height='10' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --><!-- Start Full Text --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='full-text'> <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor' > <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td> <table width='550' align='center' cellpadding='0' cellspacing='0' border='0' class='devicewidthinner' style='border: 1px solid #A9A9A9;background:#FAF9F4'> <tbody> <!-- Title --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 30px; color: #333333; text-align:center; line-height: 50px;' st-title='fulltext-heading'> Your Ticket Confirmation </td> </tr> <!-- End of Title --> <!-- spacing --> <tr> <td width='100%' height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- End of spacing --> <!-- content --> <tr> <td style='font-family: Helvetica, arial, sans-serif; font-size: 16px; color: #666666; text-align:center; line-height: 30px;' st-content='fulltext-content'> <span>You have received this email from <a href='http://www.gsmktg.com/'>www.gsmktg.com</a> ,<br> please add <a href='mailto:info@gsmktg.com' target='_top'>info@gsmktg.com</a> to your address book to ensure email delivery in your inbox</span> <hr style='margin:10px;background-color:#febb13; height: 1px; border: 0;'> <span> <b>Important Note,</b> Please carry this email confirmation along with you. </span> </td> </tr> <!-- End of content --> </tbody> </table> </td> </tr> <!-- Spacing --> <tr> <td height='20' style='font-size:1px; line-height:1px; mso-line-height-rule: exactly;'>&nbsp;</td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- end of full text --><!-- Start of Postfooter --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='postfooter' > <tbody> <tr> <td> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth' class='myBgColor'> <tbody> <tr> <td width='100%'> <table width='600' cellpadding='0' cellspacing='0' border='0' align='center' id='devicewidth'> <tbody> <tr> <td align='center' valign='middle' style='font-family: Helvetica, arial, sans-serif; font-size: 14px;color: #666666' st-content='postfooter'> Best regards, GS Marketing Team © 2017 GS Marketing - All Rights Reserved </td> </tr> <!-- Spacing --> <tr> <td width='100%' height='20'></td> </tr> <!-- Spacing --> </tbody> </table> </td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of postfooter --><!-- Start of seperator --><table width='100%' cellpadding='0' cellspacing='0' border='0' id='backgroundTable' st-sortable='seperator'> <tbody> <tr> <td> <table width='600' align='center' cellspacing='0' cellpadding='0' border='0' id='devicewidth'> <tbody> <tr> <td align='center' height='20' style='font-size:1px; line-height:1px;'>&nbsp;</td> </tr> </tbody> </table> </td> </tr> </tbody></table><!-- End of seperator --> </body></html>";

                    string subject = "E-Ticket," + eventDetails.Name + " " + venueNameEmail;
                    GeneratePDFandMailasAttachMent(htmlPagemail, eventTicket.Id.ToString(), subject, eventTicket.Visitor);
                }
                else
                {
                    eventTicket.PaymentCompleted = false;
                }
                _eventTicketRepository.Update(eventTicket);
                _transactionRepository.Add(transactionEntity);
                unitOfWork.SaveChanges();

                response.Content = new StringContent("<html><head></head><body><script> function postResponseiOS() { return '" + data + "';} CitrusResponse.pgResponse( '" + data + "'); </script></body></html>");
                response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
                return response;
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="organizerId"></param>
        /// <returns></returns>
        [Route("android/loadcash")]
        public HttpResponseMessage GetLoadCash(Guid organizerId)
        {
            var response = new HttpResponseMessage();
            response.Content = new StringContent("<html><head></head><body><script>function postResponse(data) {document.write(data);CitrusResponse.loadWalletResponse(data);}var url = window.location.href;var index = url.indexOf('" + "#" + "');if(index != -1){var queryString = url.substring(index + 1);postResponse('#' + queryString);}</script></body></html>");
            response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
            return response;
        }

        private static BillGeneratorDTO BillGenerator(Guid organizerId, EventTicket eventTicket)
        {
            var baseUrl = ConfigurationManager.AppSettings["BaseUrl"];
            var returnUrl = baseUrl + String.Format("/api/v1/organizers/{0}/citrus/ios/return/{1}", organizerId, eventTicket.Id);
            string access_key = ConfigurationManager.AppSettings["Citrus.AccessKey"];
            string secret_key = ConfigurationManager.AppSettings["Citrus.SecretKey"];
            string return_url = returnUrl;
            string txn_id = eventTicket.TxnIdForPaymentGateWay;

            decimal TotalPriceOfTicket = (Convert.ToInt32(eventTicket.TotalPriceOfTicket) / 1000.000m) * 1000m;

            string data_string = "merchantAccessKey=" + access_key + "&transactionId=" + txn_id + "&amount=" + TotalPriceOfTicket;
            byte[] key = Encoding.ASCII.GetBytes(secret_key);
            HMACSHA1 hmac = new HMACSHA1(key);
            MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(data_string));
            string signature = BitConverter.ToString(hmac.ComputeHash(stream)).Replace("-", "").ToLower();

            var amountObject = new { value = TotalPriceOfTicket, currency = "INR" };
            var citrusAmount = new CitrussAmount() { value = TotalPriceOfTicket.ToString(), currency = "INR" };

            BillGeneratorDTO objectToReturn = new BillGeneratorDTO()
            {
                merchantTxnId = txn_id,
                requestSignature = signature,
                merchantAccessKey = access_key,
                returnUrl = return_url,
                amount = GetDTO(citrusAmount)
            };
            return objectToReturn;
        }

        private static CitrussAmount GetDTO(CitrussAmount amount)
        {
            return new CitrussAmount
            {
                value = amount.value,
                currency = amount.currency
            };
        }

        private void SendSMS(string paymentMode, string paymentType, string tokenNumbertoSms, string mobileNo, string ticketType, string venue, string ticketDate, int noOfTicktets, int finalPrice)
        {
            var messageText = "";
            if (finalPrice == 0)
            {
                messageText = "Thank you for Booking, {0}, Type : {1}, Venue : {2}, TicketNo : {3}, Quantity : {4}, Date : {5}, Price: FREE Ticket";
                messageText = string.Format(messageText, paymentMode, paymentType, venue, tokenNumbertoSms, noOfTicktets, ticketDate);
            }
            else
            {
                messageText = "Thank you for Booking Ticket, {0}, Type : {1}, Venue : {2}, TicketNo : {3}, Quantity : {4}, Date : {5}, Ticket Price:{6}";
                messageText = string.Format(messageText, paymentMode, paymentType, venue, tokenNumbertoSms, noOfTicktets, ticketDate, finalPrice);
            }

            SolutionInfoTechSMSService smsService = new SolutionInfoTechSMSService();
            NotificationService notificationService = new NotificationService(smsService, mobileNo, messageText);
            notificationService.Send();
        }

        private void GeneratePDFandMailasAttachMent(string htmlPage, string fileName, string subject, Visitor visitor)
        {
            try
            {
                string pdfFile = HttpContext.Current.Server.MapPath(ConfigurationManager.AppSettings["PdfFolderLocation"]) + "\\" + fileName + ".pdf";

                // PDFGenerator generator = new PDFGenerator();
                //  generator.CreatePDFFromHTMLFile(htmlPage,pdfFile);
                IEmailService emailService = new SendGridEmailService();
                emailService.Send(visitor.EmailId, subject, htmlPage);
            }
            catch (Exception ex)
            {
                //TODO:need to handle exception or log
            }
        }

        private void GeneratePDFandMailasAttachMentStall(string htmlPage, string fileName, Exhibitor exhibitor)
        {
            try
            {
                //string pdfFile = HttpContext.Current.Server.MapPath(ConfigurationManager.AppSettings["PdfFolderLocation"]) + "\\" + fileName + ".pdf";
                // PDFGenerator generator = new PDFGenerator();
                //  generator.CreatePDFFromHTMLFile(htmlPage,pdfFile);

                IEmailService emailService = new SendGridEmailService();
                emailService.Send(exhibitor.EmailId, "Mega Trade Fair 2016 ,Payment Receipt", htmlPage);
            }
            catch (Exception ex)
            {
                //TODO:need to handle exception or log
            }
        }
    }
}